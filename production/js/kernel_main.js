var JSON;function CBXSession(){var s=this;this.mess={},this.timeout=null,this.sessid=null,this.bShowMess=!0,this.dateStart=new Date,this.dateInput=new Date,this.dateCheck=new Date,this.activityInterval=0,this.notifier=null,this.Expand=function(t,e,i,n){this.timeout=t,this.sessid=e,this.bShowMess=i,this.key=n,BX.ready(function(){BX.bind(document,"keypress",s.OnUserInput),BX.bind(document.body,"mousemove",s.OnUserInput),BX.bind(document.body,"click",s.OnUserInput),setTimeout(s.CheckSession,1e3*(s.timeout-60))})},this.OnUserInput=function(){var t=new Date;s.dateInput.setTime(t.valueOf())},this.CheckSession=function(){if(!((new Date).valueOf()-s.dateCheck.valueOf()<3e4)){s.activityInterval=Math.round((s.dateInput.valueOf()-s.dateStart.valueOf())/1e3),s.dateStart.setTime(s.dateInput.valueOf());var t=s.activityInterval>s.timeout?s.timeout-60:s.activityInterval,e={method:"GET",dataType:"html",url:"/bitrix/tools/public_session.php?sessid="+s.sessid+"&interval="+t+"&k="+s.key,data:"",onsuccess:function(t){s.CheckResult(t)},lsId:"sess_expand",lsTimeout:60};0<t&&(e.lsForce=!0),BX.ajax(e)}},this.CheckResult=function(t){if("SESSION_EXPIRED"==t){if(s.bShowMess){if(!s.notifier){s.notifier=document.body.appendChild(BX.create("DIV",{props:{className:"bx-session-message"},style:{top:"0px",backgroundColor:"#FFEB41",border:"1px solid #EDDA3C",width:"630px",fontFamily:"Arial,Helvetica,sans-serif",fontSize:"13px",fontWeight:"bold",textAlign:"center",color:"black",position:"absolute",zIndex:"10000",padding:"10px"},html:'<a class="bx-session-message-close" style="display:block; width:12px; height:12px; background:url(/bitrix/js/main/core/images/close.gif) center no-repeat; float:right;" href="javascript:bxSession.Close()"></a>'+s.mess.messSessExpired}));var e=BX.GetWindowScrollPos(),i=BX.GetWindowInnerSize();s.notifier.style.left=parseInt(e.scrollLeft+i.innerWidth/2-parseInt(s.notifier.clientWidth)/2)+"px",BX.browser.IsIE()?(s.notifier.style.top=e.scrollTop+"px",BX.bind(window,"scroll",function(){var t=BX.GetWindowScrollPos();s.notifier.style.top=t.scrollTop+"px"})):s.notifier.style.position="fixed"}s.notifier.style.display=""}}else{var n;n="SESSION_CHANGED"==t?s.timeout-60:s.activityInterval<60?60:s.activityInterval>s.timeout?s.timeout-60:s.activityInterval;var o=new Date;s.dateCheck.setTime(o.valueOf()),setTimeout(s.CheckSession,1e3*n)}},this.Close=function(){this.notifier.style.display="none"}}!function(window){if(!window.BX||!window.BX.extend){var _bxtmp;if(window.BX&&(_bxtmp=window.BX),window.BX=function(t,e){var i;return BX.type.isNotEmptyString(t)?(e&&null!=NODECACHE[t]&&(i=NODECACHE[t]),i=i||document.getElementById(t),e&&(NODECACHE[t]=i),i):BX.type.isDomNode(t)?t:BX.type.isFunction(t)?BX.ready(t):null},BX.debugEnableFlag=!0,BX.message=function(t){if(BX.type.isString(t))return void 0===BX.message[t]&&(BX.onCustomEvent("onBXMessageNotFound",[t]),void 0===BX.message[t]&&(BX.debug("message undefined: "+t),BX.message[t]="")),BX.message[t];for(var e in t)t.hasOwnProperty(e)&&(BX.message[e]=t[e]);return!0},_bxtmp){for(var i in _bxtmp)if(_bxtmp.hasOwnProperty(i))if(BX[i]){if("message"==i)for(var j in _bxtmp[i])_bxtmp[i].hasOwnProperty(j)&&(BX.message[j]=_bxtmp[i][j])}else BX[i]=_bxtmp[i];_bxtmp=null}var __readyHandler=null,readyBound=!1,readyList=[],proxySalt=Math.random(),proxyId=1,proxyList=[],NODECACHE={},deniedEvents=[],eventsList=[],customEvents={},garbageCollectors=[],cssList=[],cssInit=!1,jsList=[],jsInit=!1,bSafari=-1!=navigator.userAgent.toLowerCase().indexOf("webkit"),bOpera=-1!=navigator.userAgent.toLowerCase().indexOf("opera"),bFirefox=-1!=navigator.userAgent.toLowerCase().indexOf("firefox"),bChrome=-1!=navigator.userAgent.toLowerCase().indexOf("chrome"),bIE=document.attachEvent&&!bOpera,r={script:/<script([^>]*)>/gi,script_end:/<\/script>/gi,script_src:/src=["\']([^"\']+)["\']/i,script_type:/type=["\']([^"\']+)["\']/i,space:/\s+/,ltrim:/^[\s\r\n]+/g,rtrim:/[\s\r\n]+$/g,style:/<link.*?(rel="stylesheet"|type="text\/css")[^>]*>/i,style_href:/href=["\']([^"\']+)["\']/i},eventTypes={click:"MouseEvent",dblclick:"MouseEvent",mousedown:"MouseEvent",mousemove:"MouseEvent",mouseout:"MouseEvent",mouseover:"MouseEvent",mouseup:"MouseEvent",focus:"MouseEvent",blur:"MouseEvent"},lastWait=[],CHECK_FORM_ELEMENTS={tagName:/^INPUT|SELECT|TEXTAREA|BUTTON$/i},PRELOADING=1,PRELOADED=2,LOADING=3,LOADED=4,assets={},isAsync=null;BX.MSLEFT=1,BX.MSMIDDLE=2,BX.MSRIGHT=4,BX.ext=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},BX.extend=function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,(t.prototype.constructor=t).superclass=e.prototype,e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)},BX.namespace=function(t){var e=t.split("."),i=BX;"BX"===e[0]&&(e=e.slice(1));for(var n=0;n<e.length;n++)void 0===i[e[n]]&&(i[e[n]]={}),i=i[e[n]];return i},BX.debug=function(){BX.debugStatus()&&(window.console&&window.console.log&&window.console.log("BX.debug: ",0<arguments.length?arguments:arguments[0]),window.console&&window.console.trace)},BX.debugEnable=function(t){t="boolean"!=typeof t||t,BX.debugEnableFlag=t},BX.debugStatus=function(){return BX.debugEnableFlag||!0},BX.is_subclass_of=function(t,e){return t instanceof e||!!e.superclass&&BX.is_subclass_of(t,e.superclass)},BX.clearNodeCache=function(){return!(NODECACHE={})},BX.bitrix_sessid=function(){return BX.message("bitrix_sessid")},BX.create=function(t,e,i){var n;return i=i||document,null==e&&"object"==typeof t&&t.constructor!==String&&(t=(e=t).tag),n=BX.browser.IsIE()&&!BX.browser.IsIE9()&&null!=e&&null!=e.props&&(e.props.name||e.props.id)?i.createElement("<"+t+(e.props.name?' name="'+e.props.name+'"':"")+(e.props.id?' id="'+e.props.id+'"':"")+">"):i.createElement(t),e?BX.adjust(n,e):n},BX.adjust=function(t,e){var i,n;if(!t.nodeType)return null;if(9==t.nodeType&&(t=t.body),e.attrs)for(i in e.attrs)e.attrs.hasOwnProperty(i)&&("class"==i||"className"==i?t.className=e.attrs[i]:"for"==i?t.htmlFor=e.attrs[i]:""==e.attrs[i]?t.removeAttribute(i):t.setAttribute(i,e.attrs[i]));if(e.style)for(i in e.style)e.style.hasOwnProperty(i)&&(t.style[i]=e.style[i]);if(e.props)for(i in e.props)e.props.hasOwnProperty(i)&&(t[i]=e.props[i]);if(e.events)for(i in e.events)e.events.hasOwnProperty(i)&&BX.bind(t,i,e.events[i]);if(e.children&&0<e.children.length)for(i=0,n=e.children.length;i<n;i++)BX.type.isNotEmptyString(e.children[i])?t.innerHTML+=e.children[i]:BX.type.isElementNode(e.children[i])&&t.appendChild(e.children[i]);else e.text?(BX.cleanNode(t),t.appendChild((t.ownerDocument||document).createTextNode(e.text))):e.html&&(t.innerHTML=e.html);return t},BX.remove=function(t){return t&&null!=t.parentNode&&t.parentNode.removeChild(t),t=null},BX.cleanNode=function(t,e){if(e=!!e,(t=BX(t))&&t.childNodes)for(;0<t.childNodes.length;)t.removeChild(t.firstChild);return t&&e&&(t=BX.remove(t)),t},BX.html=function(e,i,n){if(void 0===i)return e.innerHTML;void 0===n&&(n={}),i=BX.processHTML(i.toString());var t=[],o=[];if(void 0!==i.STYLE&&0<i.STYLE.length)for(var s in i.STYLE)t.push(i.STYLE[s]);if(void 0!==i.SCRIPT&&0<i.SCRIPT.length)for(var s in i.SCRIPT)i.SCRIPT[s].isInternal?o.push(i.SCRIPT[s].JS):t.push(i.SCRIPT[s].JS);n.htmlFirst&&void 0!==i.HTML&&e&&(e.innerHTML=i.HTML);var r=new BX.Promise,a=function(){for(var t in!n.htmlFirst&&void 0!==i.HTML&&e&&(e.innerHTML=i.HTML),o)BX.evalGlobal(o[t]);BX.type.isFunction(n.callback)&&n.callback(),r.fulfill()};return 0<t.length?BX.load(t,a):a(),r},BX.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},BX.prepend=function(t,e){e.insertBefore(t,e.firstChild)},BX.append=function(t,e){e.appendChild(t)},BX.addClass=function(t,e){var i;if(t=BX(t),""==(e=BX.util.trim(e)))return t;if(t)if(t.className)if(t.classList&&e.indexOf(" ")<0)t.classList.add(e);else{i=(e||"").split(r.space);for(var n=" "+t.className+" ",o=0,s=i.length;o<s;o++)n.indexOf(" "+i[o]+" ")<0&&(t.className+=" "+i[o])}else t.className=e;return t},BX.removeClass=function(t,e){if((t=BX(t))&&t.className&&e)if(BX.type.isString(e))if(t.classList&&e.indexOf(" ")<0)t.classList.remove(e);else{for(var i=e.split(r.space),n=" "+t.className+" ",o=0,s=i.length;o<s;o++)n=n.replace(" "+i[o]+" "," ");t.className=BX.util.trim(n)}else t.className="";return t},BX.toggleClass=function(t,e){var i;if(t=BX(t),BX.type.isArray(e)){i=" "+t.className+" ";for(var n=0,o=e.length;n<o;n++)if(BX.hasClass(t,e[n])){i=(" "+i+" ").replace(" "+e[n]+" "," "),i+=" "+e[o-1<=n?0:n+1],n--;break}n==o?t.className+=" "+e[0]:t.className=i,t.className=BX.util.trim(t.className)}else BX.type.isNotEmptyString(e)&&(t.classList?t.classList.toggle(e):(i=t.className,BX.hasClass(t,e)?i=(" "+i+" ").replace(" "+e+" "," "):i+=" "+e,t.className=BX.util.trim(i)));return t},BX.hasClass=function(t,e){return(t=BX(t))&&BX.type.isDomNode(t)?!(!t.className||!e)&&(t.classList&&e&&e.indexOf(" ")<0?t.classList.contains(BX.util.trim(e)):0<=(" "+t.className+" ").indexOf(" "+e+" ")):(BX.debug(t),!1)},BX.setOpacity=function(t,e){null!=t.style.filter?(t.style.zoom="100%",t.style.filter=100==e?"":"alpha(opacity="+e.toString()+")"):null!=t.style.opacity?t.style.opacity=(e/100).toString():null!=t.style.MozOpacity&&(t.style.MozOpacity=(e/100).toString())},BX.hoverEvents=function(t){return t?BX.adjust(t,{events:BX.hoverEvents()}):{mouseover:BX.hoverEventsHover,mouseout:BX.hoverEventsHout}},BX.hoverEventsHover=function(){BX.addClass(this,"bx-hover"),this.BXHOVER=!0},BX.hoverEventsHout=function(){BX.removeClass(this,"bx-hover"),this.BXHOVER=!1},BX.focusEvents=function(t){return t?BX.adjust(t,{events:BX.focusEvents()}):{mouseover:BX.focusEventsFocus,mouseout:BX.focusEventsBlur}},BX.focusEventsFocus=function(){BX.addClass(this,"bx-focus"),this.BXFOCUS=!0},BX.focusEventsBlur=function(){BX.removeClass(this,"bx-focus"),this.BXFOCUS=!1},BX.setUnselectable=function(t){t.style.userSelect=t.style.MozUserSelect=t.style.WebkitUserSelect=t.style.KhtmlUserSelect=t.style="none",t.setAttribute("unSelectable","on")},BX.setSelectable=function(t){t.style.userSelect=t.style.MozUserSelect=t.style.WebkitUserSelect=t.style.KhtmlUserSelect=t.style="",t.removeAttribute("unSelectable")},BX.styleIEPropertyName=function(t){if("float"==t)t=BX.browser.IsIE()?"styleFloat":"cssFloat";else{var e=BX.browser.isPropertySupported(t);if(e)t=e;else{var i=/(\-([a-z]){1})/g;i.test(t)&&(t=t.replace(i,function(){return arguments[2].toUpperCase()}))}}return t},BX.style=function(t,e,i){if(!BX.type.isElementNode(t))return null;if(null!=i)return t.style[BX.styleIEPropertyName(e)]=i,t;var n;if(t.currentStyle)n=t.currentStyle[BX.styleIEPropertyName(e)];else if(window.getComputedStyle){var o=BX.browser.isPropertySupported(e,!0);o&&(e=o),n=BX.GetContext(t).getComputedStyle(t,null).getPropertyValue(e)}return n||(n=""),n},BX.focus=function(t){try{return t.focus(),!0}catch(t){return!1}},BX.firstChild=function(t){for(var e=t.firstChild;e&&!BX.type.isElementNode(e);)e=e.nextSibling;return e},BX.lastChild=function(t){for(var e=t.lastChild;e&&!BX.type.isElementNode(e);)e=e.previousSibling;return e},BX.previousSibling=function(t){for(var e=t.previousSibling;e&&!BX.type.isElementNode(e);)e=e.previousSibling;return e},BX.nextSibling=function(t){for(var e=t.nextSibling;e&&!BX.type.isElementNode(e);)e=e.nextSibling;return e},BX.findChildrenByClassName=function(t,e,n){if(!t||!t.childNodes)return null;var o=[];if(void 0===t.getElementsByClassName)n=!1!==n,o=BX.findChildren(t,{className:e},n);else{var s=t.getElementsByClassName(e);for(i=0,l=s.length;i<l;i++)o[i]=s[i]}return o},BX.findChildByClassName=function(t,e,i){if(!t||!t.childNodes)return null;var n=null;if(void 0===t.getElementsByClassName)i=!1!==i,n=BX.findChild(t,{className:e},i);else{var o=t.getElementsByClassName(e);n=o&&void 0!==o[0]?o[0]:null}return n},BX.findChildren=function(t,e,i){return BX.findChild(t,e,i,!0)},BX.findChild=function(t,e,i,n){if(!t||!t.childNodes)return null;i=!!i,n=!!n;for(var o=t.childNodes.length,s=[],r=0;r<o;r++){var a=t.childNodes[r];if(_checkNode(a,e)){if(!n)return a;s.push(a)}if(1==i){var l=BX.findChild(a,e,i,n);if(l){if(!n)return l;s=BX.util.array_merge(s,l)}}}return n||0<s.length?s:null},BX.findParent=function(t,e,i){if(!t)return null;for(var n=t;n.parentNode;){var o=n.parentNode;if(_checkNode(o,e))return o;if(n=o,i&&(BX.type.isFunction(i)||"object"==typeof i))if(BX.type.isElementNode(i)){if(n==i)break}else if(_checkNode(n,i))break}return null},BX.findNextSibling=function(t,e){if(!t)return null;for(var i=t;i.nextSibling;){var n=i.nextSibling;if(_checkNode(n,e))return n;i=n}return null},BX.findPreviousSibling=function(t,e){if(!t)return null;for(var i=t;i.previousSibling;){var n=i.previousSibling;if(_checkNode(n,e))return n;i=n}return null},BX.checkNode=function(t,e){return _checkNode(t,e)},BX.findFormElements=function(t){BX.type.isString(t)&&(t=document.forms[t]||BX(t));var e=[];return BX.type.isElementNode(t)&&(e="FORM"==t.tagName.toUpperCase()?t.elements:BX.findChildren(t,CHECK_FORM_ELEMENTS,!0)),e},BX.isParentForNode=function(t,e){if(!BX.type.isDomNode(t)||!BX.type.isDomNode(e))return!1;for(;;){if(t==e)return!0;if(!e||!e.parentNode)break;e=e.parentNode}return!1},BX.clone=function(t,e){var i,n,o;if(!1!==e&&(e=!0),null===t)return null;if(BX.type.isDomNode(t))i=t.cloneNode(e);else if("object"==typeof t)if(BX.type.isArray(t))for(i=[],n=0,o=t.length;n<o;n++)"object"==typeof t[n]&&e?i[n]=BX.clone(t[n],e):i[n]=t[n];else for(n in i={},t.constructor&&(i=BX.type.isDate(t)?new Date(t):new t.constructor),t)"object"==typeof t[n]&&e?i[n]=BX.clone(t[n],e):i[n]=t[n];else i=t;return i},BX.merge=function(){var t=Array.prototype.slice.call(arguments);if(t.length<2)return{};for(var e=t.shift(),i=0;i<t.length;i++)for(var n in t[i])if(void 0!==t[i]&&null!=t[i]&&t[i].hasOwnProperty(n)){if(void 0===t[i][n]||null==t[i][n])continue;if("object"!=typeof t[i][n]||BX.type.isDomNode(t[i][n])||void 0!==t[i][n].isUIWidget)e[n]=t[i][n];else{var o="length"in t[i][n];"object"!=typeof e[n]&&(e[n]=o?[]:{}),o?BX.util.array_merge(e[n],t[i][n]):BX.merge(e[n],t[i][n])}}return e},BX.mergeEx=function(){var t=Array.prototype.slice.call(arguments);if(t.length<2)return{};for(var e=t.shift(),i=0;i<t.length;i++)for(var n in t[i])void 0!==t[i]&&null!=t[i]&&t[i].hasOwnProperty(n)&&(BX.type.isPlainObject(t[i][n])&&BX.type.isPlainObject(e[n])?BX.mergeEx(e[n],t[i][n]):e[n]=BX.type.isPlainObject(t[i][n])?BX.clone(t[i][n]):t[i][n]);return e},BX.bind=function(t,e,i){if(t){if("mousewheel"===e)BX.bind(t,"DOMMouseScroll",i);else if("transitionend"===e)BX.bind(t,"webkitTransitionEnd",i),BX.bind(t,"msTransitionEnd",i),BX.bind(t,"oTransitionEnd",i);else if("bxchange"===e)return BX.bind(t,"change",i),BX.bind(t,"cut",i),BX.bind(t,"paste",i),BX.bind(t,"drop",i),void BX.bind(t,"keyup",i);if(t.addEventListener)t.addEventListener(e,i,!1);else if(t.attachEvent)t.attachEvent("on"+e,BX.proxy(i,t));else try{t["on"+e]=i}catch(t){BX.debug(t)}eventsList[eventsList.length]={element:t,event:e,fn:i}}},BX.unbind=function(t,e,i){if(t){if("mousewheel"===e)BX.unbind(t,"DOMMouseScroll",i);else if("transitionend"===e)BX.unbind(t,"webkitTransitionEnd",i),BX.unbind(t,"msTransitionEnd",i),BX.unbind(t,"oTransitionEnd",i);else if("bxchange"===e)return BX.unbind(t,"change",i),BX.unbind(t,"cut",i),BX.unbind(t,"paste",i),BX.unbind(t,"drop",i),void BX.unbind(t,"keyup",i);t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,BX.proxy(i,t)):t["on"+e]=null}},BX.getEventButton=function(t){var e=0;if(void 0!==(t=t||window.event).which)switch(t.which){case 1:e|=BX.MSLEFT;break;case 2:e|=BX.MSMIDDLE;break;case 3:e|=BX.MSRIGHT}else void 0!==t.button&&(e=event.button);return e||BX.MSLEFT},BX.unbindAll=function(t){if(t){for(var e=0,i=eventsList.length;e<i;e++)try{!eventsList[e]||null!=t&&t!=eventsList[e].element||(BX.unbind(eventsList[e].element,eventsList[e].event,eventsList[e].fn),eventsList[e]=null)}catch(t){}null==t&&(eventsList=[])}};var captured_events=null,_bind=null;BX.CaptureEvents=function(n,o){_bind||(_bind=BX.bind,captured_events=[],BX.bind=function(t,e,i){t===n&&e===o&&captured_events.push(i),_bind.apply(this,arguments)})},BX.CaptureEventsGet=function(){if(_bind){BX.bind=_bind;var t=captured_events;return captured_events=_bind=null,t}return null},BX.fireEvent=function(t,e){var i=!1,n=null;if(BX.type.isDomNode(t))if(i=!0,document.createEventObject)"MouseEvent"!=eventTypes[e]&&((n=document.createEventObject()).type=e,i=t.fireEvent("on"+e,n)),t[e]&&t[e]();else{switch(n=null,eventTypes[e]){case"MouseEvent":n=document.createEvent("MouseEvent");try{n.initMouseEvent(e,!0,!0,top,1,0,0,0,0,0,0,0,0,0,null)}catch(t){n.initMouseEvent(e,!0,!0,window,1,0,0,0,0,0,0,0,0,0,null)}break;default:(n=document.createEvent("Event")).initEvent(e,!0,!0)}i=t.dispatchEvent(n)}return i},BX.getWheelData=function(t){return(t=t||window.event).wheelData=t.detail?-1*t.detail:t.wheelDelta/40,t.wheelData},BX.proxy_context=null,BX.delegate=function(i,n){return i&&n?function(){var t=BX.proxy_context;BX.proxy_context=this;var e=i.apply(n,arguments);return BX.proxy_context=t,e}:i},BX.delegateLater=function(i,n,o){return function(){if(n[i]){var t=BX.proxy_context;BX.proxy_context=this;var e=n[i].apply(o||n,arguments);return BX.proxy_context=t,e}return null}},BX._initObjectProxy=function(t){void 0===t["__proxy_id_"+proxySalt]&&(t["__proxy_id_"+proxySalt]=proxyList.length,proxyList[t["__proxy_id_"+proxySalt]]={})},BX.proxy=function(t,e){return t&&e?(BX._initObjectProxy(e),void 0===t["__proxy_id_"+proxySalt]&&(t["__proxy_id_"+proxySalt]=proxyId++),proxyList[e["__proxy_id_"+proxySalt]][t["__proxy_id_"+proxySalt]]||(proxyList[e["__proxy_id_"+proxySalt]][t["__proxy_id_"+proxySalt]]=BX.delegate(t,e)),proxyList[e["__proxy_id_"+proxySalt]][t["__proxy_id_"+proxySalt]]):t},BX.defer=function(e,t){return t?BX.defer_proxy(e,t):function(){var t=arguments;setTimeout(function(){e.apply(this,t)},10)}},BX.defer_proxy=function(t,e){return t&&e?(BX.proxy(t,e),this._initObjectProxy(e),void 0===t["__defer_id_"+proxySalt]&&(t["__defer_id_"+proxySalt]=proxyId++),proxyList[e["__proxy_id_"+proxySalt]][t["__defer_id_"+proxySalt]]||(proxyList[e["__proxy_id_"+proxySalt]][t["__defer_id_"+proxySalt]]=BX.defer(BX.delegate(t,e))),proxyList[e["__proxy_id_"+proxySalt]][t["__defer_id_"+proxySalt]]):t},BX.once=function(t,e,i){if(void 0===i["__once_id_"+e+"_"+proxySalt]&&(i["__once_id_"+e+"_"+proxySalt]=proxyId++),this._initObjectProxy(t),!proxyList[t["__proxy_id_"+proxySalt]][i["__once_id_"+e+"_"+proxySalt]]){var n=function(){BX.unbind(t,e,n),i.apply(this,arguments)};proxyList[t["__proxy_id_"+proxySalt]][i["__once_id_"+e+"_"+proxySalt]]=n}return proxyList[t["__proxy_id_"+proxySalt]][i["__once_id_"+e+"_"+proxySalt]]},BX.bindDelegate=function(t,e,i,n){var o=BX.delegateEvent(i,n);return BX.bind(t,e,o),o},BX.delegateEvent=function(i,n){return function(t){for(var e=(t=t||window.event).target||t.srcElement;e!=this;){if(_checkNode(e,i))return n.call(e,t);if(!e||!e.parentNode)break;e=e.parentNode}return null}},BX.False=function(){return!1},BX.DoNothing=function(){},BX.denyEvent=function(t,e){deniedEvents.push([t,e,t["on"+e]]),t["on"+e]=BX.DoNothing},BX.allowEvent=function(t,e){for(var i=0,n=deniedEvents.length;i<n;i++)if(deniedEvents[i][0]==t&&deniedEvents[i][1]==e)return t["on"+e]=deniedEvents[i][2],void BX.util.deleteFromArray(deniedEvents,i)},BX.fixEventPageXY=function(t){return BX.fixEventPageX(t),BX.fixEventPageY(t),t},BX.fixEventPageX=function(t){return null==t.pageX&&null!=t.clientX&&(t.pageX=t.clientX+(document.documentElement&&document.documentElement.scrollLeft||document.body&&document.body.scrollLeft||0)-(document.documentElement.clientLeft||0)),t},BX.fixEventPageY=function(t){return null==t.pageY&&null!=t.clientY&&(t.pageY=t.clientY+(document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0)-(document.documentElement.clientTop||0)),t},BX.PreventDefault=function(t){return t||(t=window.event),t.stopPropagation?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1),!1},BX.eventReturnFalse=function(t){return(t=t||window.event)&&t.preventDefault?t.preventDefault():t.returnValue=!1,!1},BX.eventCancelBubble=function(t){(t=t||window.event)&&t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},BX.addCustomEvent=function(t,e,i){BX.type.isString(t)&&(i=e,e=t,t=window),e=e.toUpperCase(),customEvents[e]||(customEvents[e]=[]),customEvents[e].push({handler:i,obj:t})},BX.removeCustomEvent=function(t,e,i){if(BX.type.isString(t)&&(i=e,e=t,t=window),e=e.toUpperCase(),customEvents[e])for(var n=0,o=customEvents[e].length;n<o;n++)if(customEvents[e][n]&&customEvents[e][n].handler==i&&customEvents[e][n].obj==t)return void delete customEvents[e][n]},BX.onCustomEvent=function(t,e,i,n){if(BX.type.isString(t)&&(n=i,i=e,e=t,t=window),e=e.toUpperCase(),customEvents[e]){var o;i||(i=[]);for(var s=0,r=customEvents[e].length;s<r;s++)(o=customEvents[e][s])&&o.handler&&(o.obj!=window&&o.obj!=t||o.handler.apply(t,n?BX.clone(i):i))}},BX.bindDebouncedChange=function(n,e,t,i,o){o=o||window,i=i||300;var s="bx-dc-previous-value";BX.data(n,s,n.value);var r=function(t,e){var i=BX.data(n,s);void 0!==i&&i==e||("object"!=typeof o?t(e):t.apply(o,[e]))},a=BX.debounce(function(){var t=n.value;r(e,t),BX.data(n,s,t)},i);if(BX.bind(n,"keyup",a),BX.bind(n,"change",a),BX.bind(n,"input",a),BX.type.isFunction(t)){var l=function(){r(t,n.value)};BX.bind(n,"keyup",l),BX.bind(n,"change",l),BX.bind(n,"input",l)}},BX.parseJSON=function(data,context){var result=null;if(BX.type.isString(data))try{0<=data.indexOf("\n")?eval("result = "+data):result=new Function("return "+data)()}catch(t){BX.onCustomEvent(context,"onParseJSONFailure",[data,context])}else if(BX.type.isPlainObject(data))return data;return result},BX.isReady=!1,BX.ready=function(t){bindReady(),BX.type.isFunction(t)?BX.isReady?t.call(document):readyList&&readyList.push(t):BX.debug("READY: not a function! ",t)},BX.submit=function(t,e,i,n){t["BXFormSubmit_"+(e=e||"save")]||(t["BXFormSubmit_"+e]=t.appendChild(BX.create("INPUT",{props:{type:"submit",name:e,value:i||"Y"},style:{display:"none"}}))),t.sessid&&(t.sessid.value=BX.bitrix_sessid()),setTimeout(BX.delegate(function(){BX.fireEvent(this,"click"),n&&n()},t["BXFormSubmit_"+e]),10)},BX.debounce=function(e,i,n){var o=0;return function(){n=n||this;var t=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(n,t)},i)}},BX.throttle=function(e,i,n){var o,s=0,r=null;return function(){if(n=n||this,r=arguments,o=!0,!s){var t=function(){s=o?(e.apply(n,r),o=!1,setTimeout(t,i)):null};t()}}},BX.browser={IsIE:function(){return bIE},IsIE6:function(){return/MSIE 6/i.test(navigator.userAgent)},IsIE7:function(){return/MSIE 7/i.test(navigator.userAgent)},IsIE8:function(){return/MSIE 8/i.test(navigator.userAgent)},IsIE9:function(){return!!document.documentMode&&9<=document.documentMode},IsIE10:function(){return!!document.documentMode&&10<=document.documentMode},IsIE11:function(){return 11<=BX.browser.DetectIeVersion()},IsOpera:function(){return bOpera},IsSafari:function(){return bSafari},IsFirefox:function(){return bFirefox},IsChrome:function(){return bChrome},IsMac:function(){return/Macintosh/i.test(navigator.userAgent)},IsAndroid:function(){return/Android/i.test(navigator.userAgent)},IsIOS:function(){return/(iPad;)|(iPhone;)/i.test(navigator.userAgent)},IsMobile:function(){return/(ipad|iphone|android|mobile|touch)/i.test(navigator.userAgent)},DetectIeVersion:function(){if(BX.browser.IsOpera()||BX.browser.IsSafari()||BX.browser.IsFirefox()||BX.browser.IsChrome())return-1;var t=-1;(window.MSStream&&!window.ActiveXObject&&"ActiveXObject"in window?t=11:BX.browser.IsIE10()?t=10:BX.browser.IsIE9()?t=9:BX.browser.IsIE()&&(t=8),-1==t||8==t)&&("Microsoft Internet Explorer"==navigator.appName?null!=new RegExp("MSIE ([0-9]+[.0-9]*)").exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1)):"Netscape"==navigator.appName&&(t=11,null!=new RegExp("Trident/.*rv:([0-9]+[.0-9]*)").exec(navigator.userAgent)&&(t=parseFloat(RegExp.$1))));return t},IsDoctype:function(t){return(t=t||document).compatMode?"CSS1Compat"==t.compatMode:t.documentElement&&t.documentElement.clientHeight},SupportLocalStorage:function(){return!!BX.localStorage&&!!BX.localStorage.checkBrowser()},addGlobalClass:function(){var t="bx-core";if(!BX.hasClass(document.documentElement,t)){BX.browser.IsIOS()?t+=" bx-ios":BX.browser.IsMac()?t+=" bx-mac":BX.browser.IsAndroid()&&(t+=" bx-android"),t+=BX.browser.IsMobile()?" bx-touch":" bx-no-touch",t+=BX.browser.isRetina()?" bx-retina":" bx-no-retina";var e=-1;/AppleWebKit/.test(navigator.userAgent)?t+=" bx-chrome":0<(e=BX.browser.DetectIeVersion())?(t+=" bx-ie bx-ie"+e,7<e&&e<10&&!BX.browser.IsDoctype()&&(t+=" bx-quirks")):/Opera/.test(navigator.userAgent)?t+=" bx-opera":/Gecko/.test(navigator.userAgent)&&(t+=" bx-firefox"),BX.addClass(document.documentElement,t)}},isPropertySupported:function(t,e){if(!BX.type.isNotEmptyString(t))return!1;var i,n,o=-1<t.indexOf("-")?(n=/(\-([a-z]){1})/g).test(i=t)?i.replace(n,function(){return arguments[2].toUpperCase()}):i:t;e=!!e;for(var s=o.charAt(0).toUpperCase()+o.slice(1),r=(o+" "+["Webkit","Moz","O","ms"].join(s+" ")+s).split(" "),a=document.body||document.documentElement,l=0;l<r.length;l++){var h=r[l];if(void 0!==a.style[h]){var p=h==o?"":"-"+h.substr(0,h.length-o.length).toLowerCase()+"-";return e?p+o.replace(/([A-Z])/g,function(){return"-"+arguments[1].toLowerCase()}):h}}return!1},addGlobalFeatures:function(t,e){if(BX.type.isArray(t)){for(var i=[],n=0;n<t.length;n++){var o=!!BX.browser.isPropertySupported(t[n]);i.push("bx-"+(o?"":"no-")+t[n].toLowerCase())}BX.addClass(document.documentElement,i.join(" "))}},isRetina:function(){return window.devicePixelRatio&&2<=window.devicePixelRatio}},BX.show=function(t,e){!t.BXDISPLAY&&_checkDisplay(t,e)||(t.style.display=t.BXDISPLAY)},BX.hide=function(t,e){t.BXDISPLAY||_checkDisplay(t,e),t.style.display="none"},BX.toggle=function(t,e){if(!e&&BX.type.isElementNode(t)){(t.BXDISPLAY?!_checkDisplay(t):"none"==t.style.display)?BX.show(t):BX.hide(t)}else if(BX.type.isArray(e)){for(var i=0,n=e.length;i<n;i++)if(t==e[i]){t=e[i==n-1?0:i+1];break}i==n&&(t=e[0])}return t},BX.util={array_values:function(t){if(!BX.type.isArray(t))return BX.util._array_values_ob(t);for(var e=[],i=0,n=t.length;i<n;i++)null!==t[i]&&void 0!==t[i]&&e.push(t[i]);return e},_array_values_ob:function(t){var e=[];for(var i in t)null!==t[i]&&void 0!==t[i]&&e.push(t[i]);return e},array_keys:function(t){if(!BX.type.isArray(t))return BX.util._array_keys_ob(t);for(var e=[],i=0,n=t.length;i<n;i++)null!==t[i]&&void 0!==t[i]&&e.push(i);return e},_array_keys_ob:function(t){var e=[];for(var i in t)null!==t[i]&&void 0!==t[i]&&e.push(i);return e},object_keys:function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i);return e},array_merge:function(t,e){BX.type.isArray(t)||(t=[]),BX.type.isArray(e)||(e=[]);var i=t.length,n=0;if("number"==typeof e.length)for(var o=e.length;n<o;n++)t[i++]=e[n];else for(;void 0!==e[n];)t[i++]=e[n++];return t.length=i,t},array_unique:function(t){var e,i=0,n=t.length;if(n<2)return t;for(;i<n-1;i++)for(e=i+1;e<n;e++)t[i]==t[e]&&(t.splice(e--,1),n--);return t},in_array:function(t,e){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},array_search:function(t,e){for(var i=0;i<e.length;i++)if(e[i]==t)return i;return-1},object_search_key:function(t,e){if(void 0!==e[t])return e[t];for(var i in e)if("object"==typeof e[i]){var n=BX.util.object_search_key(t,e[i]);if(!1!==n)return n}return!1},trim:function(t){return BX.type.isString(t)?t.replace(r.ltrim,"").replace(r.rtrim,""):t},urlencode:function(t){return encodeURIComponent(t)},deleteFromArray:function(t,e){return t.slice(0,e).concat(t.slice(e+1))},insertIntoArray:function(t,e,i){return t.slice(0,e).concat([i]).concat(t.slice(e))},htmlspecialchars:function(t){return t.replace?t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},htmlspecialcharsback:function(t){return t.replace?t.replace(/\&quot;/g,'"').replace(/&#39;/g,"'").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&amp;/g,"&"):t},preg_quote:function(t,e){return t.replace?t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\"+(e||"")+"-]","g"),"\\$&"):t},jsencode:function(t){if(!t||!t.replace)return t;for(var e=[{c:"\\\\",r:"\\\\"},{c:"\\t",r:"\\t"},{c:"\\n",r:"\\n"},{c:"\\r",r:"\\r"},{c:'"',r:'\\"'},{c:"'",r:"\\'"},{c:"<",r:"\\x3C"},{c:">",r:"\\x3E"},{c:"\\u2028",r:"\\u2028"},{c:"\\u2029",r:"\\u2029"}],i=0;i<e.length;i++)t=t.replace(new RegExp(e[i].c,"g"),e[i].r);return t},nl2br:function(t){return t&&t.replace?t.replace(/([^>])\n/g,"$1<br/>"):t},str_pad:function(t,e,i,n){return i=i||" ",n=n||"right",t=t.toString(),"left"==n?BX.util.str_pad_left(t,e,i):BX.util.str_pad_right(t,e,i)},str_pad_left:function(t,e,i){var n=t.length,o=i.length;if(e<=n)return t;for(;n<e;n+=o)t=i+t;return t},str_pad_right:function(t,e,i){var n=t.length,o=i.length;if(e<=n)return t;for(;n<e;n+=o)t+=i;return t},strip_tags:function(t){return t.split(/<[^>]+>/g).join("")},strip_php_tags:function(t){return t.replace(/<\?(.|[\r\n])*?\?>/g,"")},popup:function(t,e,i){var n,o;return o=BX.browser.IsOpera()?(n=document.body.offsetWidth,document.body.offsetHeight):(n=screen.width,screen.height),window.open(t,"","status=no,scrollbars=yes,resizable=yes,width="+e+",height="+i+",top="+Math.floor((o-i)/2-14)+",left="+Math.floor((n-e)/2-5))},objectSort:function(t,e,i){i="asc"==i?"asc":"desc";var n,o=[];for(n in t)t.hasOwnProperty(n)&&t[n][e]&&o.push([n,t[n][e]]);"asc"==i?o.sort(function(t,e){var i,n;return(n=isNaN(t[1])||isNaN(e[1])?(i=t[1].toString().toLowerCase(),e[1].toString().toLowerCase()):(i=parseInt(t[1]),parseInt(e[1])))<i?1:i<n?-1:0}):o.sort(function(t,e){var i,n;return n=isNaN(t[1])||isNaN(e[1])?(i=t[1].toString().toLowerCase(),e[1].toString().toLowerCase()):(i=parseInt(t[1]),parseInt(e[1])),i<n?1:n<i?-1:0});var s=Array();for(n=0;n<o.length;n++)s.push(t[o[n][0]]);return s},hex2rgb:function(t){for(var e=t.replace(/[# ]/g,"").replace(/^(.)(.)(.)$/,"$1$1$2$2$3$3").match(/.{2}/g),i=0;i<3;i++)e[i]=parseInt(e[i],16);return{r:e[0],g:e[1],b:e[2]}},remove_url_param:function(t,e){var i,n;if(BX.type.isArray(e))for(var o=0;o<e.length;o++)t=BX.util.remove_url_param(t,e[o]);else 0<=(i=t.indexOf("?"))&&i!=t.length-1&&(n=t.substr(i+1),t=t.substr(0,i+1),n=(n=n.replace(new RegExp("(^|&)"+e+"=[^&#]*","i"),"")).replace(/^&/,""),BX.type.isNotEmptyString(n)?t+=n:t=t.substr(0,t.length-1));return t},add_url_param:function(t,e){var i,n,o="",s="";for(i in e)t=this.remove_url_param(t,i),o+=(""!=o?"&":"")+i+"="+e[i];return 0<=(n=t.indexOf("#"))&&(s=t.substr(n),t=t.substr(0,n)),t=0<=(n=t.indexOf("?"))?t+(n!=t.length-1?"&":"")+o+s:t+"?"+o+s},even:function(t){return parseInt(t)%2==0},hashCode:function(t){if(!BX.type.isNotEmptyString(t))return 0;for(var e=0,i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e},getRandomString:function(t){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i=e.length;t=parseInt(t),(isNaN(t)||t<=0)&&(t=8);for(var n="",o=0;o<t;o++)n+=e.charAt(Math.floor(Math.random()*i));return n},number_format:function(t,e,i,n){var o,s,r="";return e=Math.abs(e),(isNaN(e)||e<0)&&(e=2),i=i||",",void 0===n&&(n="."),(t=(+t||0).toFixed(e))<0&&(r="-",t=-t),r+((s=3<(o=parseInt(t,10)+"").length?o.length%3:0)?o.substr(0,s)+n:"")+o.substr(s).replace(/(\d{3})(?=\d)/g,"$1"+n)+(e?i+Math.abs(t-o).toFixed(e).replace(/-/,"0").slice(2):"")},getExtension:function(t){var e=(t=t||"").split("?")[0].split(".");return e[e.length-1].toLowerCase()},addObjectToForm:function(t,e,i){for(var n in BX.type.isString(i)||(i=""),t)if(t.hasOwnProperty(n)){var o=t[n],s=""!==i?i+"["+n+"]":n;if(BX.type.isArray(o))for(var r=0;r<o.length;r++)BX.util.addObjectToForm(o[r],e,s+"["+r.toString()+"]");else BX.type.isPlainObject(o)?BX.util.addObjectToForm(o,e,s):""!==(o=BX.type.isFunction(o.toString)?o.toString():"")&&e.appendChild(BX.create("INPUT",{attrs:{type:"hidden",name:s,value:o}}))}},observe:function(t,e){if(!BX.browser.IsChrome()||"object"!=typeof t)return!1;var i=function(t){t.forEach(function(t){t.name})};return(e=!1!==e)?Object.observe(t,i):Object.unobserve(t,i),e}},BX.type={isString:function(t){return""===t||!!t&&("string"==typeof t||t instanceof String)},isNotEmptyString:function(t){return!!BX.type.isString(t)&&0<t.length},isBoolean:function(t){return!0===t||!1===t},isNumber:function(t){return 0===t||!!t&&("number"==typeof t||t instanceof Number)},isFunction:function(t){return null!==t&&("function"==typeof t||t instanceof Function)},isElementNode:function(t){return t&&"object"==typeof t&&"nodeType"in t&&1==t.nodeType&&t.tagName&&"SCRIPT"!=t.tagName.toUpperCase()&&"STYLE"!=t.tagName.toUpperCase()&&"LINK"!=t.tagName.toUpperCase()},isDomNode:function(t){return t&&"object"==typeof t&&"nodeType"in t},isArray:function(t){return t&&"[object Array]"==Object.prototype.toString.call(t)},isDate:function(t){return t&&"[object Date]"==Object.prototype.toString.call(t)},isPlainObject:function(t){if(!t||"object"!=typeof t||t.nodeType)return!1;var e,i=Object.prototype.hasOwnProperty;try{if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(e in t);return void 0===e||i.call(t,e)}},BX.isNodeInDom=function(t,e){return t===(e||document)||!!t.parentNode&&BX.isNodeInDom(t.parentNode)},BX.isNodeHidden=function(t){return t!==document&&("none"==BX.style(t,"display")||(!t.parentNode||BX.isNodeHidden(t.parentNode)))},BX.evalPack=function(t){for(;0<t.length;){var e=t.shift();if("SCRIPT_EXT"==e.TYPE||"SCRIPT_SRC"==e.TYPE)return void BX.loadScript(e.DATA,function(){BX.evalPack(t)});"SCRIPT"==e.TYPE&&BX.evalGlobal(e.DATA)}},BX.evalGlobal=function(t){if(t){var e=document.getElementsByTagName("head")[0]||document.documentElement,i=document.createElement("script");i.type="text/javascript",BX.browser.IsIE()?i.text=t:i.appendChild(document.createTextNode(t)),e.insertBefore(i,e.firstChild),e.removeChild(i)}},BX.processHTML=function(t,e){for(var i,n,o,s,a,l=[],h=[],p=[],u=r.script.lastIndex=r.script_end.lastIndex=0;null!==(i=r.script.exec(t));){r.script_end.lastIndex=r.script.lastIndex;var c=r.script_end.exec(t);if(null===c)break;var d=!1;if(null!==(a=i[1].match(r.script_type))&&("text/html"!=a[1]&&"text/template"!=a[1]||(d=!0)),d)p.push([u,r.script_end.lastIndex-u]);else{p.push([u,i.index-u]);var f=e||"-1"!=i[1].indexOf("bxrunfirst");if(null!==(o=i[1].match(r.script_src)))l.push({bRunFirst:f,isInternal:!1,JS:o[1]});else{var m=i.index+i[0].length,B=t.substr(m,c.index-m);l.push({bRunFirst:f,isInternal:!0,JS:B})}}u=c.index+9,r.script.lastIndex=u}p.push([u,0===u?t.length:t.length-u]);for(var _="",y=0,g=p.length;y<g;y++)_+=t.substr(p[y][0],p[y][1]);for(;null!==(n=_.match(r.style));)null!==(s=n[0].match(r.style_href))&&n[0].indexOf('media="')<0&&h.push(s[1]),_=_.replace(n[0],"");return{HTML:_,SCRIPT:l,STYLE:h}},BX.garbage=function(t,e){garbageCollectors.push({callback:t,context:e})},BX.GetDocElement=function(t){return t=t||document,BX.browser.IsDoctype(t)?t.documentElement:t.body},BX.GetContext=function(t){return BX.type.isElementNode(t)?t.ownerDocument.parentWindow||t.ownerDocument.defaultView||window:BX.type.isDomNode(t)&&(t.parentWindow||t.defaultView)||window},BX.GetWindowInnerSize=function(t){var e,i;return t=t||document,window.innerHeight?(e=BX.GetContext(t).innerWidth,i=BX.GetContext(t).innerHeight):t.documentElement&&(t.documentElement.clientHeight||t.documentElement.clientWidth)?(e=t.documentElement.clientWidth,i=t.documentElement.clientHeight):t.body&&(e=t.body.clientWidth,i=t.body.clientHeight),{innerWidth:e,innerHeight:i}},BX.GetWindowScrollPos=function(t){var e,i;return t=t||document,window.pageYOffset?(e=BX.GetContext(t).pageXOffset,i=BX.GetContext(t).pageYOffset):t.documentElement&&(t.documentElement.scrollTop||t.documentElement.scrollLeft)?(e=t.documentElement.scrollLeft,i=t.documentElement.scrollTop):t.body&&(e=t.body.scrollLeft,i=t.body.scrollTop),{scrollLeft:e,scrollTop:i}},BX.GetWindowScrollSize=function(t){var e,i;return t||(t=document),t.compatMode&&"CSS1Compat"==t.compatMode?(e=t.documentElement.scrollWidth,i=t.documentElement.scrollHeight):(i=t.body.scrollHeight>t.body.offsetHeight?t.body.scrollHeight:t.body.offsetHeight,e=t.body.scrollWidth>t.body.offsetWidth||t.compatMode&&"BackCompat"==t.compatMode||t.documentElement&&!t.documentElement.clientWidth?t.body.scrollWidth:t.body.offsetWidth),{scrollWidth:e,scrollHeight:i}},BX.GetWindowSize=function(t){var e=this.GetWindowInnerSize(t),i=this.GetWindowScrollPos(t),n=this.GetWindowScrollSize(t);return{innerWidth:e.innerWidth,innerHeight:e.innerHeight,scrollLeft:i.scrollLeft,scrollTop:i.scrollTop,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight}},BX.scrollTop=function(t,e){if(void 0===e)return t==window?BX.GetWindowScrollPos().scrollTop:t.scrollTop;if(t==window)throw new Error("scrollTop() for window is not implemented");t.scrollTop=parseInt(e)},BX.scrollLeft=function(t,e){if(void 0===e)return t==window?BX.GetWindowScrollPos().scrollLeft:t.scrollLeft;if(t==window)throw new Error("scrollLeft() for window is not implemented");t.scrollLeft=parseInt(e)},BX.hide_object=function(t){(t=BX(t)).style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.height="10px",t.style.width="10px"},BX.is_relative=function(t){var e=BX.style(t,"position");return"relative"==e||"absolute"==e},BX.is_float=function(t){var e=BX.style(t,"float");return"right"==e||"left"==e},BX.is_fixed=function(t){return"fixed"==BX.style(t,"position")},BX.pos=function(e,t){var i={top:0,right:0,bottom:0,left:0,width:0,height:0};if(t=!!t,!e)return i;if(void 0===e.getBoundingClientRect||e.ownerDocument!=document||t){for(var n=0,o=0,s=e.offsetWidth,r=e.offsetHeight,a=!0;null!=e&&(a||!t||!BX.is_relative(e));e=e.offsetParent)if(n+=e.offsetLeft,o+=e.offsetTop,a)a=!1;else{var l=parseInt(BX.style(e,"border-left-width")),h=parseInt(BX.style(e,"border-top-width"));!isNaN(l)&&0<l&&(n+=l),!isNaN(h)&&0<h&&(o+=h)}i.top=o,i.left=n,i.width=s,i.height=r,i.right=i.left+s,i.bottom=i.top+r}else{var p={};try{p=e.getBoundingClientRect()}catch(t){p={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight,right:e.offsetLeft+e.offsetWidth,bottom:e.offsetTop+e.offsetHeight}}var u=document.documentElement,c=document.body;i.top=p.top+(u.scrollTop||c.scrollTop),i.left=p.left+(u.scrollLeft||c.scrollLeft),i.width=p.right-p.left,i.height=p.bottom-p.top,i.right=p.right+(u.scrollLeft||c.scrollLeft),i.bottom=p.bottom+(u.scrollTop||c.scrollTop)}for(var d in i)i.hasOwnProperty(d)&&(i[d]=Math.round(i[d]));return i},BX.width=function(t,e){if(void 0===e)return t==window?window.innerWidth:BX.pos(t).width;BX.style(t,"width",parseInt(e)+"px")},BX.height=function(t,e){if(void 0===e)return t==window?window.innerHeight:BX.pos(t).height;BX.style(t,"height",parseInt(e)+"px")},BX.align=function(t,e,i,n){n=n?n.toLowerCase():"";var o=document;BX.type.isElementNode(t)&&(o=t.ownerDocument,t=BX.pos(t));var s=t.left,r=t.bottom,a=BX.GetWindowScrollPos(o),l=BX.GetWindowInnerSize(o);return l.innerWidth+a.scrollLeft-(t.left+e)<0&&(s=0<=t.right-e?t.right-e:a.scrollLeft),(l.innerHeight+a.scrollTop-(t.bottom+i)<0||~n.indexOf("top"))&&(r=0<=t.top-i||~n.indexOf("top")?t.top-i:a.scrollTop),{left:s,top:r}},BX.scrollToNode=function(t){var e=BX(t);if(e.scrollIntoView)e.scrollIntoView(!0);else{var i=BX.pos(e);window.scrollTo(i.left,i.top)}},BX.showWait=function(t,e){t=BX(t)||document.body||document.documentElement,e=e||BX.message("JS_CORE_LOADING");var i=t.id||Math.random(),n=t.bxmsg=document.body.appendChild(BX.create("DIV",{props:{id:"wait_"+i},style:{background:'url("/bitrix/js/main/core/images/wait.gif") no-repeat scroll 10px center #fcf7d1',border:"1px solid #E1B52D",color:"black",fontFamily:"Verdana,Arial,sans-serif",fontSize:"11px",padding:"10px 30px 10px 37px",position:"absolute",zIndex:"10000",textAlign:"center"},text:e}));return setTimeout(BX.delegate(_adjustWait,t),10),lastWait[lastWait.length]=n},BX.closeWait=function(t,e){if(t&&!e&&(e=t.bxmsg),t&&!e&&BX.hasClass(t,"bx-core-waitwindow")&&(e=t),t&&!e&&(e=BX("wait_"+t.id)),e||(e=lastWait.pop()),e&&e.parentNode){for(var i=0,n=lastWait.length;i<n;i++)if(e==lastWait[i]){lastWait=BX.util.deleteFromArray(lastWait,i);break}e.parentNode.removeChild(e),t&&(t.bxmsg=null),BX.cleanNode(e,!0)}},BX.setJSList=function(t){BX.type.isArray(t)&&(jsList=t)},BX.getJSList=function(){return initJsList(),jsList},BX.setCSSList=function(t){BX.type.isArray(t)&&(cssList=t)},BX.getCSSList=function(){return initCssList(),cssList},BX.getJSPath=function(t){return t.replace(/^(http[s]*:)*\/\/[^\/]+/i,"")},BX.getCSSPath=function(t){return t.replace(/^(http[s]*:)*\/\/[^\/]+/i,"")},BX.getCDNPath=function(t){return t},BX.loadScript=function(s,r,a){if(BX.isReady){a=a||document,BX.type.isString(s)&&(s=[s]);var l=function(t){if(t>=s.length)return r&&BX.type.isFunction(r)?r():null;if(s[t]){var e=BX.getJSPath(s[t]);if(!isScriptLoaded(e)){var i=a.getElementsByTagName("head")[0]||a.documentElement,n=a.createElement("script");n.src=s[t];var o=!1;return n.onload=n.onreadystatechange=function(){o||n.readyState&&"loaded"!=n.readyState&&"complete"!=n.readyState||(o=!0,setTimeout(function(){l(++t)},50),n.onload=n.onreadystatechange=null,i&&n.parentNode&&i.removeChild(n))},jsList.push(e),i.insertBefore(n,i.firstChild)}l(++t)}else l(++t);return null};l(0)}else{var t=arguments;BX.ready(function(){BX.loadScript.apply(this,t)})}},BX.loadCSS=function(t,e,i){if(!BX.isReady){var n=arguments;return BX.ready(function(){BX.loadCSS.apply(this,n)}),null}var o=!1;BX.type.isString(t)&&(o=!0,t=[t]);var s,r=t.length,a=null,l=[];if(0==r)return null;if(e=e||document,!(i=i||window).bxhead){var h=e.getElementsByTagName("HEAD");if(i.bxhead=h[0],!i.bxhead)return null}for(s=0;s<r;s++){var p=BX.getCSSPath(t[s]);if(!isCssLoaded(p)){(a=document.createElement("LINK")).href=t[s],a.rel="stylesheet",a.type="text/css";var u=getTemplateLink(i.bxhead);null!==u?u.parentNode.insertBefore(a,u):i.bxhead.appendChild(a),l.push(a),cssList.push(p)}}return o?a:l},BX.load=function(t,e,i){if(BX.isReady)return i=i||document,null===isAsync&&(isAsync="async"in i.createElement("script")||"MozAppearance"in i.documentElement.style||window.opera),isAsync?loadAsync(t,e,i):loadAsyncEmulation(t,e,i);var n=arguments;return BX.ready(function(){BX.load.apply(this,n)}),null},BX.convert={nodeListToArray:function(e){try{return Array.prototype.slice.call(e,0)}catch(t){for(var i=[],n=0,o=e.length;n<o;n++)i.push(e[n]);return i}}},BX.reload=function(t,e){!0===t&&(e=!0,t=null);var i=t||top.location.href,n=i.indexOf("#"),o="";-1!=n&&(o=i.substr(n),i=i.substr(0,n)),e&&i.indexOf("clear_cache=Y")<0&&(i+=(-1==i.indexOf("?")?"?":"&")+"clear_cache=Y"),o&&(e&&("view/"==o.substr(0,5)||"#view/"==o.substr(0,6))&&o.indexOf("clear_cache%3DY")<0&&(o+=(-1==o.indexOf("%3F")?"%3F":"%26")+"clear_cache%3DY"),i=i.replace(/(\?|\&)_r=[\d]*/,""),i+=(-1==i.indexOf("?")?"?":"&")+"_r="+Math.round(1e4*Math.random())+o),top.location.href=i},BX.clearCache=function(){BX.showWait(),BX.reload(!0)},BX.template=function(t,e,i){BX.ready(function(){_processTpl(BX(t),e,i)})},BX.isAmPmMode=function(){return null!=BX.message("FORMAT_DATETIME").match("T")},BX.formatDate=function(t,e){var i=(t=t||new Date).getHours()||t.getMinutes()||t.getSeconds();return(e||(i?BX.message("FORMAT_DATETIME"):BX.message("FORMAT_DATE"))).replace(/YYYY/gi,t.getFullYear()).replace(/MMMM/gi,BX.util.str_pad_left((t.getMonth()+1).toString(),2,"0")).replace(/MM/gi,BX.util.str_pad_left((t.getMonth()+1).toString(),2,"0")).replace(/DD/gi,BX.util.str_pad_left(t.getDate().toString(),2,"0")).replace(/HH/gi,BX.util.str_pad_left(t.getHours().toString(),2,"0")).replace(/MI/gi,BX.util.str_pad_left(t.getMinutes().toString(),2,"0")).replace(/SS/gi,BX.util.str_pad_left(t.getSeconds().toString(),2,"0"))},BX.formatName=function(t,e,i){e=e||"";var n={TITLE:(t=t||{}).TITLE||"",NAME:t.NAME||"",LAST_NAME:t.LAST_NAME||"",SECOND_NAME:t.SECOND_NAME||"",LOGIN:t.LOGIN||"",NAME_SHORT:t.NAME?t.NAME.substr(0,1)+".":"",LAST_NAME_SHORT:t.LAST_NAME?t.LAST_NAME.substr(0,1)+".":"",SECOND_NAME_SHORT:t.SECOND_NAME?t.SECOND_NAME.substr(0,1)+".":"",EMAIL:t.EMAIL||"",ID:t.ID||"",NOBR:"","/NOBR":""},o=e;for(var s in n)n.hasOwnProperty(s)&&(o=o.replace("#"+s+"#",n[s]));return""==(o=o.replace(/([\s]+)/gi," ").trim())&&(o=""==(o="Y"==i?n.LOGIN:"")?"Noname":o),o},BX.getNumMonth=function(t){var e=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],n=["january","february","march","april","may","june","july","august","september","october","november","december"],o=t.toUpperCase();for(i=1;i<=12;i++)if(o==BX.message("MON_"+i).toUpperCase()||o==BX.message("MONTH_"+i).toUpperCase()||o==e[i-1].toUpperCase()||o==n[i-1].toUpperCase())return i;return t},BX.parseDate=function(t,e,i,n){if(BX.type.isNotEmptyString(t)){i||(i=BX.message("FORMAT_DATE")),n||(n=BX.message("FORMAT_DATETIME"));var o="";for(s=1;s<=12;s++)o=o+"|"+BX.message("MON_"+s);var s,r,a=new RegExp("([0-9]+|[a-z]+"+o+")","ig"),l=t.match(a),h=i.match(/(DD|MI|MMMM|MM|M|YYYY)/gi),p=[],u=[],c={};if(!l)return null;for(l.length>h.length&&(h=n.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)),s=0,r=l.length;s<r;s++)""!=BX.util.trim(l[s])&&(p[p.length]=l[s]);for(s=0,r=h.length;s<r;s++)""!=BX.util.trim(h[s])&&(u[u.length]=h[s]);var d=BX.util.array_search("MMMM",u);for(0<d?(p[d]=BX.getNumMonth(p[d]),u[d]="MM"):0<(d=BX.util.array_search("M",u))&&(p[d]=BX.getNumMonth(p[d]),u[d]="MM"),s=0,r=u.length;s<r;s++){var f=u[s].toUpperCase();c[f]="T"==f||"TT"==f?p[s]:parseInt(p[s],10)}if(0<c.DD&&0<c.MM&&0<c.YYYY){var m=new Date;if(e?(m.setUTCDate(1),m.setUTCFullYear(c.YYYY),m.setUTCMonth(c.MM-1),m.setUTCDate(c.DD),m.setUTCHours(0,0,0)):(m.setDate(1),m.setFullYear(c.YYYY),m.setMonth(c.MM-1),m.setDate(c.DD),m.setHours(0,0,0)),!(isNaN(c.HH)&&isNaN(c.GG)&&isNaN(c.H)&&isNaN(c.G)||isNaN(c.MI))){if(isNaN(c.H)&&isNaN(c.G))c.HH=parseInt(c.HH||c.GG||0,10);else{var B="PM"==(c.T||c.TT||"am").toUpperCase(),_=parseInt(c.H||c.G||0,10);c.HH=B?_+(12==_?0:12):_<12?_:0}isNaN(c.SS)&&(c.SS=0),e?m.setUTCHours(c.HH,c.MI,c.SS):m.setHours(c.HH,c.MI,c.SS)}return m}}return null},BX.selectUtils={addNewOption:function(t,e,i,n,o){if(t=BX(t)){var s=t.length;if(!1!==o)for(var r=0;r<s;r++)if(t[r].value==e)return;t.options[s]=new Option(i,e,!1,!1)}!0===n&&this.sortSelect(t)},deleteOption:function(t,e){if(t=BX(t))for(var i=0;i<t.length;i++)if(t[i].value==e){t.remove(i);break}},deleteSelectedOptions:function(t){if(t=BX(t))for(var e=0;e<t.length;)t[e].selected?(t[e].selected=!1,t.remove(e)):e++},deleteAllOptions:function(t){if(t=BX(t))for(var e=t.length-1;0<=e;e--)t.remove(e)},optionCompare:function(t,e){var i=t.optText.toLowerCase(),n=e.optText.toLowerCase();return n<i?1:i<n?-1:0},sortSelect:function(t){if(t=BX(t)){var e,i=[],n=t.options.length;for(e=0;e<n;e++)i[e]={optText:t[e].text,optValue:t[e].value};for(i.sort(this.optionCompare),t.length=0,n=i.length,e=0;e<n;e++)t[e]=new Option(i[e].optText,i[e].optValue,!1,!1)}},selectAllOptions:function(t){if(t=BX(t))for(var e=t.length,i=0;i<e;i++)t[i].selected=!0},selectOption:function(t,e){if(t=BX(t))for(var i=t.length,n=0;n<i;n++)t[n].selected=t[n].value==e},addSelectedOptions:function(t,e,i,n){if(t=BX(t))for(var o=t.length,s=0;s<o;s++)t[s].selected&&this.addNewOption(e,t[s].value,t[s].text,n,i)},moveOptionsUp:function(t){if(t=BX(t))for(var e=t.length,i=0;i<e;i++)if(t[i].selected&&0<i&&0==t[i-1].selected){var n=new Option(t[i].text,t[i].value);t[i]=new Option(t[i-1].text,t[i-1].value),t[i].selected=!1,t[i-1]=n,t[i-1].selected=!0}},moveOptionsDown:function(t){if(t=BX(t))for(var e=t.length,i=e-1;0<=i;i--)if(t[i].selected&&i<e-1&&0==t[i+1].selected){var n=new Option(t[i].text,t[i].value);t[i]=new Option(t[i+1].text,t[i+1].value),t[i].selected=!1,t[i+1]=n,t[i+1].selected=!0}}},BX.getEventTarget=function(t){return t.target?t.target:t.srcElement?t.srcElement:null},BX.hint=function(t,e,i,n){null==i&&(i=e,e=""),null==t.BXHINT&&(t.BXHINT=new BX.CHint({parent:t,hint:i,title:e,id:n}),t.BXHINT.Show())},BX.hint_replace=function(t,e,i){if(null==i&&(i=e,e=""),!t||!t.parentNode||!i)return null;var n=new BX.CHint({hint:i,title:e});return n.CreateParent(),t.parentNode.insertBefore(n.PARENT,t),t.parentNode.removeChild(t),n.PARENT.style.marginLeft="5px",t},BX.CHint=function(t){for(var e in this.PARENT=BX(t.parent),this.HINT=t.hint,this.HINT_TITLE=t.title,this.PARAMS={},this.defaultSettings)null==t[e]?this.PARAMS[e]=this.defaultSettings[e]:this.PARAMS[e]=t[e];null!=t.id&&(this.ID=t.id),this.timer=null,this.bInited=!1,this.msover=!0,this.PARAMS.showOnce?(this.__show(),this.msover=!1,this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout)):this.PARENT&&(BX.bind(this.PARENT,"mouseover",BX.proxy(this.Show,this)),BX.bind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))),BX.addCustomEvent("onMenuOpen",BX.delegate(this.disable,this)),BX.addCustomEvent("onMenuClose",BX.delegate(this.enable,this))},BX.CHint.prototype.defaultSettings={show_timeout:1e3,hide_timeout:500,dx:2,showOnce:!1,preventHide:!0,min_width:250},BX.CHint.prototype.CreateParent=function(t,e){this.PARENT&&(BX.unbind(this.PARENT,"mouseover",BX.proxy(this.Show,this)),BX.unbind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))),e||(e={});var i="icon";return!e.type||"link"!=e.type&&"icon"!=e.type||(i=e.type),t&&(i="element"),"icon"==i?t=BX.create("IMG",{props:{src:e.iconSrc?e.iconSrc:"/bitrix/js/main/core/images/hint.gif"}}):"link"==i&&(t=BX.create("A",{props:{href:"javascript:void(0)"},html:"[?]"})),this.PARENT=t,BX.bind(this.PARENT,"mouseover",BX.proxy(this.Show,this)),BX.bind(this.PARENT,"mouseout",BX.proxy(this.Hide,this)),this.PARENT},BX.CHint.prototype.Show=function(){this.msover=!0,null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(BX.proxy(this.__show,this),this.PARAMS.show_timeout)},BX.CHint.prototype.Hide=function(){this.msover=!1,null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout)},BX.CHint.prototype.__show=function(){this.msover&&!this.disabled&&(this.bInited||this.Init(),this.prepareAdjustPos()&&(this.DIV.style.display="block",this.adjustPos(),BX.bind(window,"scroll",BX.proxy(this.__onscroll,this)),this.PARAMS.showOnce&&(this.timer=setTimeout(BX.proxy(this.__hide,this),this.PARAMS.hide_timeout))))},BX.CHint.prototype.__onscroll=function(){BX.admin&&BX.admin.panel&&BX.admin.panel.isFixed()&&(this.scrollTimer&&clearTimeout(this.scrollTimer),this.DIV.style.display="none",this.scrollTimer=setTimeout(BX.proxy(this.Reopen,this),this.PARAMS.show_timeout))},BX.CHint.prototype.Reopen=function(){null!=this.timer&&clearTimeout(this.timer),this.timer=setTimeout(BX.proxy(this.__show,this),50)},BX.CHint.prototype.__hide=function(){this.msover||this.bInited&&(BX.unbind(window,"scroll",BX.proxy(this.Reopen,this)),this.PARAMS.showOnce?this.Destroy():this.DIV.style.display="none")},BX.CHint.prototype.__hide_immediately=function(){this.msover=!1,this.__hide()},BX.CHint.prototype.Init=function(){this.DIV=document.body.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip"},style:{display:"none"},children:[BX.create("DIV",{props:{className:"bx-panel-tooltip-top-border"},html:'<div class="bx-panel-tooltip-corner bx-panel-tooltip-left-corner"></div><div class="bx-panel-tooltip-border"></div><div class="bx-panel-tooltip-corner bx-panel-tooltip-right-corner"></div>'}),this.CONTENT=BX.create("DIV",{props:{className:"bx-panel-tooltip-content"},children:[BX.create("DIV",{props:{className:"bx-panel-tooltip-underlay"},children:[BX.create("DIV",{props:{className:"bx-panel-tooltip-underlay-bg"}})]})]}),BX.create("DIV",{props:{className:"bx-panel-tooltip-bottom-border"},html:'<div class="bx-panel-tooltip-corner bx-panel-tooltip-left-corner"></div><div class="bx-panel-tooltip-border"></div><div class="bx-panel-tooltip-corner bx-panel-tooltip-right-corner"></div>'})]})),this.ID&&this.CONTENT.insertBefore(BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-panel-tooltip-close"},events:{click:BX.delegate(this.Close,this)}}),this.CONTENT.firstChild),this.HINT_TITLE&&this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-title"},text:this.HINT_TITLE})),this.HINT&&(this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-text"}})).appendChild(BX.create("SPAN",{html:this.HINT}))),this.PARAMS.preventHide&&(BX.bind(this.DIV,"mouseout",BX.proxy(this.Hide,this)),BX.bind(this.DIV,"mouseover",BX.proxy(this.Show,this))),this.bInited=!0},BX.CHint.prototype.setContent=function(t){this.HINT=t,this.CONTENT_TEXT?this.CONTENT_TEXT.innerHTML=this.HINT:this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-panel-tooltip-text"}})).appendChild(BX.create("SPAN",{html:this.HINT}))},BX.CHint.prototype.prepareAdjustPos=function(){return this._wnd={scrollPos:BX.GetWindowScrollPos(),scrollSize:BX.GetWindowScrollSize()},"none"!=BX.style(this.PARENT,"display")},BX.CHint.prototype.getAdjustPos=function(){var t={},e=BX.pos(this.PARENT),i=0;if(t.top=e.bottom+this.PARAMS.dx,BX.admin&&BX.admin.panel.DIV&&(i=BX.admin.panel.DIV.offsetHeight+this.PARAMS.dx,BX.admin.panel.isFixed()&&(i+=this._wnd.scrollPos.scrollTop)),t.top<i?t.top=i:t.top+this.DIV.offsetHeight>this._wnd.scrollSize.scrollHeight&&(t.top=e.top-this.PARAMS.dx-this.DIV.offsetHeight),t.left=e.left,e.left<this.PARAMS.dx)e.left=this.PARAMS.dx;else{var n=this.DIV.offsetWidth,o=this._wnd.scrollSize.scrollWidth-n-this.PARAMS.dx;t.left>o&&(t.left=o)}return t},BX.CHint.prototype.adjustWidth=function(){if(!this.bWidthAdjusted){var t=this.DIV.offsetWidth,e=this.DIV.offsetHeight;t>this.PARAMS.min_width&&(t=Math.round(Math.sqrt(1.618*t*e))),t<this.PARAMS.min_width&&(t=this.PARAMS.min_width),this.DIV.style.width=t+"px",this._adjustWidthInt&&clearInterval(this._adjustWidthInt),this._adjustWidthInt=setInterval(BX.delegate(this._adjustWidthInterval,this),5),this.bWidthAdjusted=!0}},BX.CHint.prototype._adjustWidthInterval=function(){this.DIV&&"none"!=this.DIV.style.display||clearInterval(this._adjustWidthInt);var t=this.DIV.offsetWidth,e=this.CONTENT_TEXT.offsetWidth;0<t&&0<e&&t-e<20&&t<1500?this.DIV.style.width=t+20+"px":clearInterval(this._adjustWidthInt)},BX.CHint.prototype.adjustPos=function(){this.adjustWidth();var t=this.getAdjustPos();this.DIV.style.top=t.top+"px",this.DIV.style.left=t.left+"px"},BX.CHint.prototype.Close=function(){this.ID&&BX.WindowManager&&BX.WindowManager.saveWindowOptions(this.ID,{display:"off"}),this.__hide_immediately(),this.Destroy()},BX.CHint.prototype.Destroy=function(){this.PARENT&&(BX.unbind(this.PARENT,"mouseover",BX.proxy(this.Show,this)),BX.unbind(this.PARENT,"mouseout",BX.proxy(this.Hide,this))),this.DIV&&(BX.unbind(this.DIV,"mouseover",BX.proxy(this.Show,this)),BX.unbind(this.DIV,"mouseout",BX.proxy(this.Hide,this)),BX.cleanNode(this.DIV,!0))},BX.CHint.prototype.enable=function(){this.disabled=!1},BX.CHint.prototype.disable=function(){this.__hide_immediately(),this.disabled=!0},document.addEventListener?__readyHandler=function(){document.removeEventListener("DOMContentLoaded",__readyHandler,!1),runReady()}:document.attachEvent&&(__readyHandler=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",__readyHandler),runReady())}),window.attachEvent?window.attachEvent("onunload",Trash):window.addEventListener?window.addEventListener("unload",Trash,!1):window.onunload=Trash,BX(BX.DoNothing),window.BX=BX,BX.browser.addGlobalClass(),BX.data=function(t,e,i){if(void 0!==t&&void 0!==e)if(void 0!==i)dataStorage.set(t,e,i);else{var n;if(null!=(n=dataStorage.get(t,e)))return n;if("getAttribute"in t){if(null===(n=t.getAttribute("data-"+e.toString())))return;return n}}},BX.DataStorage=function(){this.keyOffset=1,this.data={},this.uniqueTag="BX-"+Math.random(),this.resolve=function(e,t){if(void 0===e[this.uniqueTag]){if(!t)return;try{Object.defineProperty(e,this.uniqueTag,{value:this.keyOffset++})}catch(t){e[this.uniqueTag]=this.keyOffset++}}return e[this.uniqueTag]},this.get=function(t,e){if((t==document||BX.type.isElementNode(t))&&void 0!==e&&void 0!==(t=this.resolve(t,!1))&&void 0!==this.data[t])return this.data[t][e]},this.set=function(t,e,i){if((t==document||BX.type.isElementNode(t))&&void 0!==i){var n=this.resolve(t,!0);void 0===this.data[n]&&(this.data[n]={}),this.data[n][e]=i}}};var dataStorage=new BX.DataStorage;BX.LazyLoad={images:[],imageStatus:{hidden:-2,error:-1,undefined:0,inited:1,loaded:2},imageTypes:{image:1,background:2},registerImage:function(t,e){BX.type.isNotEmptyString(t)&&this.images.push({id:t,node:null,src:null,type:null,func:BX.type.isFunction(e)?e:null,status:this.imageStatus.undefined})},registerImages:function(t,e){if(BX.type.isArray(t))for(var i=0,n=t.length;i<n;i++)this.registerImage(t[i],e)},showImages:function(t){var e=null,i=!1;t=!1!==t;for(var n=0,o=this.images.length;n<o;n++)(e=this.images[n]).status==this.imageStatus.undefined&&this.initImage(e),e.status===this.imageStatus.inited&&(e.node&&e.node.parentNode?(i=!0,t&&e.func&&(i=e.func(e)),!0===i&&this.isElementVisibleOnScreen(e.node)&&(e.type==this.imageTypes.image?e.node.src=e.src:e.node.style.backgroundImage="url('"+e.src+"')",e.node.setAttribute("data-src",""),e.status=this.imageStatus.loaded)):(e.node=null,e.status=this.imageStatus.error))},initImage:function(t){t.status=this.imageStatus.error;var e=BX(t.id);if(e){var i=e.getAttribute("data-src");BX.type.isNotEmptyString(i)&&(t.node=e,t.src=i,t.status=this.imageStatus.inited,t.type="img"==t.node.tagName.toLowerCase()?this.imageTypes.image:this.imageTypes.background)}},isElementVisibleOnScreen:function(t){var e=this.getElementCoords(t),i=window.pageYOffset||document.documentElement.scrollTop,n=i+document.documentElement.clientHeight;e.bottom=e.top+t.offsetHeight;var o=e.top>i&&e.top<n,s=e.bottom<n&&e.bottom>i;return o||s},isElementVisibleOn2Screens:function(t){var e=this.getElementCoords(t),i=document.documentElement.clientHeight,n=window.pageYOffset||document.documentElement.scrollTop,o=n+i;e.bottom=e.top+t.offsetHeight,n-=i,o+=i;var s=e.top>n&&e.top<o,r=e.bottom<o&&e.bottom>n;return s||r},getElementCoords:function(t){var e=t.getBoundingClientRect();return{originTop:e.top,originLeft:e.left,top:e.top+window.pageYOffset,left:e.left+window.pageXOffset}},onScroll:function(){BX.LazyLoad.showImages()},clearImages:function(){this.images=[]}},BX.getCookie=function(t){var e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return e?decodeURIComponent(e[1]):void 0},BX.setCookie=function(t,e,i){var n=(i=i||{}).expires;if("number"==typeof n&&n){var o=new Date;o.setTime(o.getTime()+1e3*n),n=i.expires=o}n&&n.toUTCString&&(i.expires=n.toUTCString());var s=t+"="+(e=encodeURIComponent(e));for(var r in i)if(i.hasOwnProperty(r)){s+="; "+r;var a=i[r];!0!==a&&(s+="="+a)}return document.cookie=s,!0},BX.FixFontSize=function(t){var e,i;this.node=null,this.prevWindowSize=0,this.prevWrapperSize=0,this.mainWrapper=null,this.textWrapper=null,this.objList=t.objList,this.minFontSizeList=[],this.minFontSize=0,t.onresize&&(this.prevWindowSize=window.innerWidth||document.documentElement.clientWidth,BX.bind(window,"resize",BX.proxy(BX.throttle(this.onResize,350),this))),t.onAdaptiveResize&&(e=this.objList[0].scaleBy||this.objList[0].node,i=getComputedStyle(e),this.prevWrapperSize=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight),BX.bind(window,"resize",BX.proxy(BX.throttle(this.onAdaptiveResize,350),this))),this.createTestNodes(),this.decrease()},BX.FixFontSize.prototype={createTestNodes:function(){this.textWrapper=BX.create("div",{style:{display:"inline-block",whiteSpace:"nowrap"}}),this.mainWrapper=BX.create("div",{style:{height:0,overflow:"hidden"},children:[this.textWrapper]})},insertTestNodes:function(){document.body.appendChild(this.mainWrapper)},removeTestNodes:function(){document.body.removeChild(this.mainWrapper)},decrease:function(){var t,e,i,n;this.insertTestNodes();for(var o=this.objList.length-1;0<=o;o--)if(i=this.objList[o].scaleBy||this.objList[o].node,n=getComputedStyle(i),t=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight),e=parseInt(getComputedStyle(this.objList[o].node)["font-size"]),this.textWrapperSetStyle(this.objList[o].node),this.textWrapperInsertText(this.objList[o].node)){for(;this.textWrapper.offsetWidth>t&&0<e;)this.textWrapper.style.fontSize=--e+"px";this.objList[o].smallestValue?(this.minFontSize=this.minFontSize?Math.min(this.minFontSize,e):e,this.minFontSizeList.push(this.objList[o].node)):this.objList[o].node.style.fontSize=e+"px"}0<this.minFontSizeList.length&&this.setMinFont(),this.removeTestNodes()},increase:function(){var t,e,i,n;this.insertTestNodes(),this.insertTestNodes();for(var o=this.objList.length-1;0<=o;o--)if(i=this.objList[o].scaleBy||this.objList[o].node,n=getComputedStyle(i),t=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight),e=parseInt(getComputedStyle(this.objList[o].node)["font-size"]),this.textWrapperSetStyle(this.objList[o].node),this.textWrapperInsertText(this.objList[o].node)){for(;this.textWrapper.offsetWidth<t&&e<this.objList[o].maxFontSize;)this.textWrapper.style.fontSize=++e+"px";e--,this.objList[o].smallestValue?(this.minFontSize=this.minFontSize?Math.min(this.minFontSize,e):e,this.minFontSizeList.push(this.objList[o].node)):this.objList[o].node.style.fontSize=e+"px"}0<this.minFontSizeList.length&&this.setMinFont(),this.removeTestNodes()},setMinFont:function(){for(var t=this.minFontSizeList.length-1;0<=t;t--)this.minFontSizeList[t].style.fontSize=this.minFontSize+"px";this.minFontSize=0},onResize:function(){var t=window.innerWidth||document.documentElement.clientWidth;this.prevWindowSize>t?this.decrease():this.prevWindowSize<t&&this.increase(),this.prevWindowSize=t},onAdaptiveResize:function(){var t=this.objList[0].scaleBy||this.objList[0].node,e=getComputedStyle(t),i=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight);this.prevWrapperSize>i?this.decrease():this.prevWrapperSize<i&&this.increase(),this.prevWrapperSize=i},textWrapperInsertText:function(t){return t.textContent?(this.textWrapper.textContent=t.textContent,!0):!!t.innerText&&(this.textWrapper.innerText=t.innerText,!0)},textWrapperSetStyle:function(t){this.textWrapper.style.fontFamily=getComputedStyle(t)["font-family"],this.textWrapper.style.fontSize=getComputedStyle(t)["font-size"],this.textWrapper.style.fontStyle=getComputedStyle(t)["font-style"],this.textWrapper.style.fontWeight=getComputedStyle(t)["font-weight"],this.textWrapper.style.lineHeight=getComputedStyle(t)["line-height"]}},BX.FixFontSize.init=function(t){return new BX.FixFontSize(t)},void 0===BX.ParamBag&&(BX.ParamBag=function(){this._params={}},BX.ParamBag.prototype={initialize:function(t){this._params=t||{}},getParam:function(t,e){var i=this._params;return void 0!==i[t]?i[t]:e},setParam:function(t,e){this._params[t]=e},clear:function(){this._params={}}},BX.ParamBag.create=function(t){var e=new BX.ParamBag;return e.initialize(t),e}),void 0===BX.Promise&&(BX.Promise=function(t,e){this.state=null,this.value=null,this.reason=null,this.next=null,this.ctx=e||this,this.onFulfilled=[],this.onRejected=[]},BX.Promise.prototype.fulfill=function(t){this.checkState(),this.value=t,this.state=!0,this.execute()},BX.Promise.prototype.reject=function(t){this.checkState(),this.reason=t,this.state=!1,this.execute()},BX.Promise.prototype.then=function(t,e){return BX.type.isFunction(t)&&this.onFulfilled.push(t),BX.type.isFunction(e)&&this.onRejected.push(e),null===this.next&&(this.next=new BX.Promise(null,this.ctx)),null!==this.state&&this.execute(),this.next},BX.Promise.prototype.setAutoResolve=function(t,e){this.timer=setTimeout(BX.delegate(function(){null===this.state&&this[t?"fulfill":"reject"]()},this),e||15)},BX.Promise.prototype.cancelAutoResolve=function(){clearTimeout(this.timer)},BX.Promise.prototype.resolve=function(t){var e=this;this===t?this.reject(new TypeError("Promise cannot fulfill or reject itself")):t instanceof BX.Promise?t.then(function(t){e.fulfill(t)},function(t){e.reject(t)}):this.fulfill(t)},BX.Promise.prototype.execute=function(){if(null!==this.state){var t,e=void 0,i=void 0,n=void 0;if(!0===this.state)if(this.onFulfilled.length)try{for(t=0;t<this.onFulfilled.length;t++)void 0!==(n=this.onFulfilled[t].apply(this.ctx,[this.value]))&&(e=n)}catch(t){BX.debug(t),i=t}else e=this.value;else if(!1===this.state)if(this.onRejected.length)try{for(t=0;t<this.onRejected.length;t++)void 0!==(n=this.onRejected[t].apply(this.ctx,[this.reason]))&&(e=n)}catch(t){BX.debug(t),i=t}else i=this.reason;null!==this.next&&(void 0!==i?this.next.reject(i):void 0!==e&&this.next.resolve(e))}},BX.Promise.prototype.checkState=function(){if(null!==this.state)throw new Error("You can not do fulfill() or reject() multiple times")})}function loadAsync(t,e,i){if(BX.type.isArray(t)){BX.type.isFunction(e)||(e=null);var n,o,s={};for(o=0;o<t.length;o++)n=getAsset(n=t[o]),s[n.name]=n;for(o=0;o<t.length;o++)load(n=getAsset(n=t[o]),function(){var t;r(s)&&((t=(t=e)||BX.DoNothing)._done||(t(),t._done=1))},i)}function r(t){for(var e in t=t||assets)if(t.hasOwnProperty(e)&&t[e].state!==LOADED)return!1;return!0}}function loadAsyncEmulation(t,e,i){function n(t){void 0===t.state&&(t.state=PRELOADING,t.onpreload=[],loadAsset({url:t.url,type:"cache",ext:t.ext},function(){!function(t){if(t.state=PRELOADED,BX.type.isArray(t.onpreload)&&t.onpreload)for(var e=0;e<t.onpreload.length;e++)t.onpreload[e].call()}(t)},i))}if(BX.type.isArray(t)){BX.type.isFunction(e)||(e=null);for(var o=[].slice.call(t,1),s=0;s<o.length;s++)n(getAsset(o[s]));load(getAsset(t[0]),1===t.length?e:function(){loadAsyncEmulation.apply(null,[o,e,i])},i)}}function load(t,e,i){e=e||BX.DoNothing,t.state!==LOADED?t.state!==PRELOADING?(t.state=LOADING,loadAsset(t,function(){t.state=LOADED,e()},i)):t.onpreload.push(function(){load(t,e,i)}):e()}function loadAsset(n,e,o){function t(t){r.onload=r.onreadystatechange=r.onerror=null,e()}function s(t){("load"===(t=t||window.event).type||/loaded|complete/.test(r.readyState)&&(!o.documentMode||o.documentMode<9))&&(window.clearTimeout(n.errorTimeout),window.clearTimeout(n.cssTimeout),r.onload=r.onreadystatechange=r.onerror=null,e())}var r;e=e||BX.DoNothing;var i=BX.type.isNotEmptyString(n.ext)?n.ext:BX.util.getExtension(n.url);"css"===i?((r=o.createElement("link")).type="text/"+(n.type||"css"),r.rel="stylesheet",r.href=n.url,n.cssRetries=0,n.cssTimeout=window.setTimeout(function t(){if(n.state!==LOADED&&n.cssRetries<=20){for(var e=0,i=o.styleSheets.length;e<i;e++)if(o.styleSheets[e].href===r.href)return void s({type:"load"});n.cssRetries++,n.cssTimeout=window.setTimeout(t,250)}},500)):((r=o.createElement("script")).type="text/"+(n.type||"javascript"),r.src=n.url),r.onload=r.onreadystatechange=s,r.onerror=t,r.async=!1,r.defer=!1,n.errorTimeout=window.setTimeout(function(){t()},7e3),"css"===i?cssList.push(BX.getCSSPath(n.url)):jsList.push(BX.getJSPath(n.url));var a=null,l=o.head||o.getElementsByTagName("head")[0];"css"===i&&null!==(a=getTemplateLink(l))?a.parentNode.insertBefore(r,a):l.insertBefore(r,l.lastChild)}function getAsset(t){var e={};"object"==typeof t?(e=t).name=e.name?e.name:BX.util.hashCode(t.url):e={name:BX.util.hashCode(t),url:t},("css"===(BX.type.isNotEmptyString(e.ext)?e.ext:BX.util.getExtension(e.url))&&isCssLoaded(e.url)||isScriptLoaded(e.url))&&(e.state=LOADED);var i=assets[e.name];return i&&i.url===e.url?i:assets[e.name]=e}function isCssLoaded(t){return initCssList(),BX.util.in_array(BX.getCSSPath(t),cssList)}function initCssList(){if(!cssInit){var t=document.getElementsByTagName("link");if(t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e].getAttribute("href");BX.type.isNotEmptyString(i)&&cssList.push(BX.getCSSPath(i))}cssInit=!0}}function getTemplateLink(s){var t=function(t){for(var e=s.getElementsByTagName(t),i=0,n=e.length;i<n;i++){var o=e[i].getAttribute("data-template-style");if(BX.type.isNotEmptyString(o)&&"true"==o)return e[i]}return null},e=t("link");return null===e&&(e=t("style")),e}function isScriptLoaded(t){return initJsList(),BX.util.in_array(BX.getJSPath(t),jsList)}function initJsList(){if(!jsInit){var t=document.getElementsByTagName("script");if(t&&0<t.length)for(var e=0;e<t.length;e++){var i=t[e].getAttribute("src");BX.type.isNotEmptyString(i)&&jsList.push(BX.getJSPath(i))}jsInit=!0}}function bindReady(){if(!readyBound){if(readyBound=!0,"complete"===document.readyState)return runReady();if(document.addEventListener)document.addEventListener("DOMContentLoaded",__readyHandler,!1),window.addEventListener("load",runReady,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",__readyHandler),window.attachEvent("onload",runReady);var t=!1;try{t=null==window.frameElement}catch(t){}document.documentElement.doScroll&&t&&doScrollCheck()}}return null}function runReady(){if(!BX.isReady){if(!document.body)return setTimeout(runReady,15);if(BX.isReady=!0,readyList&&0<readyList.length){for(var t,e=0;readyList&&(t=readyList[e++]);)try{t.call(document)}catch(t){BX.debug("BX.ready error: ",t)}readyList=null}}return null}function doScrollCheck(){if(!BX.isReady){try{document.documentElement.doScroll("left")}catch(t){return void setTimeout(doScrollCheck,1)}runReady()}}function _adjustWait(){if(this.bxmsg){var t=BX.pos(this),e=t.top;e<BX.GetDocElement().scrollTop&&(e=BX.GetDocElement().scrollTop+5),this.bxmsg.style.top=e+5+"px",this==BX.GetDocElement()?this.bxmsg.style.right="5px":this.bxmsg.style.left=t.right-this.bxmsg.offsetWidth-5+"px"}}function _checkDisplay(t,e){void 0!==e&&(t.BXDISPLAY=e);var i=t.style.display||BX.style(t,"display");return"none"!=i?(t.BXDISPLAY=t.BXDISPLAY||i,!0):(t.BXDISPLAY=t.BXDISPLAY||"block",!1)}function _processTpl(t,e,i){if(t){i&&t.parentNode.removeChild(t);for(var n={},o=BX.findChildren(t,{attribute:"data-role"},!0),s=0,r=o.length;s<r;s++)n[o[s].getAttribute("data-role")]=o[s];e.apply(t,[n])}}function _checkNode(t,e){if(e=e||{},BX.type.isFunction(e))return e.call(window,t);if(!e.allowTextNodes&&!BX.type.isElementNode(t))return!1;var i,n,o;for(i in e)if(e.hasOwnProperty(i))switch(i){case"tag":case"tagName":if(BX.type.isString(e[i])){if(t.tagName.toUpperCase()!=e[i].toUpperCase())return!1}else if(e[i]instanceof RegExp&&!e[i].test(t.tagName))return!1;break;case"class":case"className":if(BX.type.isString(e[i])){if(!BX.hasClass(t,e[i]))return!1}else if(e[i]instanceof RegExp&&(!BX.type.isString(t.className)||!e[i].test(t.className)))return!1;break;case"attr":case"attribute":if(BX.type.isString(e[i])){if(!t.getAttribute(e[i]))return!1}else if(BX.type.isArray(e[i])){for(n=0,o=e[i].length;n<o;n++)if(e[i]&&!t.getAttribute(e[i]))return!1}else for(n in e[i])if(e[i].hasOwnProperty(n)){var s=t.getAttribute(n);if(e[i][n]instanceof RegExp){if(!BX.type.isString(s)||!e[i][n].test(s))return!1}else if(s!=""+e[i][n])return!1}break;case"property":if(BX.type.isString(e[i])){if(!t[e[i]])return!1}else if(BX.type.isArray(e[i])){for(n=0,o=e[i].length;n<o;n++)if(e[i]&&!t[e[i]])return!1}else for(n in e[i])if(BX.type.isString(e[i][n])){if(t[n]!=e[i][n])return!1}else if(e[i][n]instanceof RegExp&&(!BX.type.isString(t[n])||!e[i][n].test(t[n])))return!1;break;case"callback":return e[i](t)}return!0}function Trash(){var t,e;for(t=0,e=garbageCollectors.length;t<e;t++)try{garbageCollectors[t].callback.apply(garbageCollectors[t].context||window),delete garbageCollectors[t],garbageCollectors[t]=null}catch(t){}try{BX.unbindAll()}catch(t){}}}(window),function(a){if(!a.BX.ajax){var h=a.BX,p={},u={method:"GET",dataType:"html",timeout:0,async:!0,processData:!0,scriptsRunFirst:!1,emulateOnload:!0,skipAuthCheck:!1,start:!0,cache:!0,preparePost:!0,headers:!1,lsTimeout:30,lsForce:!1},c=null,r={},d={url_utf:/[^\034-\254]+/g,script_self:/\/bitrix\/js\/main\/core\/core(_ajax)*.js$/i,script_self_window:/\/bitrix\/js\/main\/core\/core_window.js$/i,script_self_admin:/\/bitrix\/js\/main\/core\/core_admin.js$/i,script_onload:/window.onload/g};h.ajax=function(n){var o;if(!n||!n.url||!h.type.isString(n.url))return!1;for(var t in p)void 0===n[t]&&(n[t]=p[t]);for(t in p={},u)void 0===n[t]&&(n[t]=u[t]);if(n.method=n.method.toUpperCase(),h.localStorage||(n.lsId=null),h.browser.IsIE()){var e=d.url_utf.exec(n.url);if(e)for(;n.url=n.url.replace(e,h.util.urlencode(e)),e=d.url_utf.exec(n.url););}"json"==n.dataType&&(n.emulateOnload=!1),n.cache||"GET"!=n.method||(n.url=h.ajax._uncache(n.url)),"POST"==n.method&&n.preparePost&&(n.data=h.ajax.prepareData(n.data));var i=!0;if(n.lsId&&!n.lsForce){var s=h.localStorage.get("ajax-"+n.lsId);if(null!==s){i=!1;var r=function(t){if(t.key=="ajax-"+n.lsId&&"BXAJAXWAIT"!=t.value){var e=t.value;!!t.oldValue&&null==e?n.onfailure&&n.onfailure("timeout"):h.ajax.__run(n,e),h.removeCustomEvent("onLocalStorageChange",r)}};"BXAJAXWAIT"==s?h.addCustomEvent("onLocalStorageChange",r):setTimeout(function(){r({key:"ajax-"+n.lsId,value:s})},10)}}if(i){if(n.xhr=h.ajax.xhr(),!n.xhr)return;if(n.lsId&&h.localStorage.set("ajax-"+n.lsId,"BXAJAXWAIT",n.lsTimeout),n.xhr.open(n.method,n.url,n.async),n.skipBxHeader||h.ajax.isCrossDomain(n.url)||n.xhr.setRequestHeader("Bx-ajax","true"),"POST"==n.method&&n.preparePost&&n.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),"object"==typeof n.headers)for(t=0;t<n.headers.length;t++)n.xhr.setRequestHeader(n.headers[t].name,n.headers[t].value);n.onprogress&&h.bind(n.xhr,"progress",n.onprogress);var a=!1,l=n.xhr.onreadystatechange=function(t){if(!a)if("timeout"===t)n.onfailure&&n.onfailure("timeout"),h.onCustomEvent(n.xhr,"onAjaxFailure",["timeout","",n]),n.xhr.onreadystatechange=h.DoNothing,n.xhr.abort(),n.async&&(n.xhr=null);else if(4==n.xhr.readyState||"run"==t){if(o=h.ajax.xhrSuccess(n.xhr)?"success":"error",a=!0,n.xhr.onreadystatechange=h.DoNothing,"success"==o){var e=!n.skipAuthCheck&&!h.ajax.isCrossDomain(n.url)&&n.xhr.getResponseHeader("X-Bitrix-Ajax-Status");if(e&&"Authorize"==e)n.onfailure&&n.onfailure("auth",n.xhr.status),h.onCustomEvent(n.xhr,"onAjaxFailure",["auth",n.xhr.status,n]);else{var i=n.xhr.responseText;n.lsId&&h.localStorage.set("ajax-"+n.lsId,i,n.lsTimeout),h.ajax.__run(n,i)}}else n.onfailure&&n.onfailure("status",n.xhr.status),h.onCustomEvent(n.xhr,"onAjaxFailure",["status",n.xhr.status,n]);n.async&&(n.xhr=null)}};return n.async&&0<n.timeout&&setTimeout(function(){n.xhr&&!a&&l("timeout")},1e3*n.timeout),n.start&&(n.xhr.send(n.data),n.async||l("run")),n.xhr}},h.ajax.xhr=function(){if(a.XMLHttpRequest)try{return new XMLHttpRequest}catch(t){}else if(a.ActiveXObject){try{return new a.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new a.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new a.ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}throw new Error("This browser does not support XMLHttpRequest.")}return null},h.ajax.isCrossDomain=function(t,e){if(e=e||a.location,0===t.indexOf("//")&&(t=e.protocol+t),0!==t.indexOf("http"))return!1;var i=a.document.createElement("a");return i.href=t,i.protocol!==e.protocol||i.hostname!==e.hostname||h.ajax.getHostPort(i.protocol,i.host)!==h.ajax.getHostPort(e.protocol,e.host)},h.ajax.getHostPort=function(t,e){var i=/:(\d+)$/.exec(e);return i?i[1]:"http:"===t?"80":"https:"===t?"443":""},h.ajax.__prepareOnload=function(t){if(0<t.length){h.ajax["onload_"+c]=null;for(var e=0,i=t.length;e<i;e++)t[e].isInternal&&(t[e].JS=t[e].JS.replace(d.script_onload,"BX.ajax.onload_"+c))}h.CaptureEventsGet(),h.CaptureEvents(a,"load")},h.ajax.__runOnload=function(){null!=h.ajax["onload_"+c]&&(h.ajax["onload_"+c].apply(a),h.ajax["onload_"+c]=null);var t=h.CaptureEventsGet();if(t)for(var e=0;e<t.length;e++)t[e].apply(a)},h.ajax.__run=function(t,e){t.processData?e=h.ajax.processRequestData(e,t):(t.onsuccess&&t.onsuccess(e),h.onCustomEvent(t.xhr,"onAjaxSuccess",[e,t]))},h.ajax._onParseJSONFailure=function(t){this.jsonFailure=!0,this.jsonResponse=t,this.jsonProactive=/^\[WAF\]/.test(t)},h.ajax.processRequestData=function(t,e){var i,n=[],o=[];switch(e.dataType.toUpperCase()){case"JSON":if(h.addCustomEvent(e.xhr,"onParseJSONFailure",h.proxy(h.ajax._onParseJSONFailure,e)),i=h.parseJSON(t,e.xhr),h.removeCustomEvent(e.xhr,"onParseJSONFailure",h.proxy(h.ajax._onParseJSONFailure,e)),i&&h.type.isArray(i.bxjs))for(var s=0;s<i.bxjs.length;s++)h.type.isNotEmptyString(i.bxjs[s])?n.push({isInternal:!1,JS:i.bxjs[s],bRunFirst:e.scriptsRunFirst}):n.push(i.bxjs[s]);i&&h.type.isArray(i.bxcss)&&(o=i.bxcss);break;case"SCRIPT":n.push({isInternal:!0,JS:t,bRunFirst:e.scriptsRunFirst}),i=t;break;default:var r=h.processHTML(t,e.scriptsRunFirst);i=r.HTML,n=r.SCRIPT,o=r.STYLE}var a=!1;null==c&&(c=parseInt(1e6*Math.random()),a=!0),0<o.length&&h.loadCSS(o),e.emulateOnload&&h.ajax.__prepareOnload(n);var l=h.DoNothing;(e.emulateOnload||a)&&(l=h.defer(function(){e.emulateOnload&&h.ajax.__runOnload(),a&&(c=null),h.onCustomEvent(e.xhr,"onAjaxSuccessFinish",[e])}));try{if(e.jsonFailure)throw{type:"json_failure",data:e.jsonResponse,bProactive:e.jsonProactive};e.scripts=n,h.ajax.processScripts(e.scripts,!0),e.onsuccess&&e.onsuccess(i),h.onCustomEvent(e.xhr,"onAjaxSuccess",[i,e]),h.ajax.processScripts(e.scripts,!1,l)}catch(t){e.onfailure&&e.onfailure("processing",t),h.onCustomEvent(e.xhr,"onAjaxFailure",["processing",t,e])}},h.ajax.processScripts=function(t,e,i){var n=[],o="";i=i||h.DoNothing;for(var s=0,r=t.length;s<r;s++)void 0!==e&&e!=!!t[s].bRunFirst||(t[s].isInternal?o+=";"+t[s].JS:n.push(t[s].JS));n=h.util.array_unique(n);var a=0<o.length?function(){h.evalGlobal(o)}:h.DoNothing;0<n.length?h.load(n,function(){a(),i()}):(a(),i())},h.ajax.prepareData=function(t,e){var i="";if(h.type.isString(t))i=t;else if(null!=t)for(var n in t)if(t.hasOwnProperty(n)){0<i.length&&(i+="&");var o=h.util.urlencode(n);e&&(o=e+"["+o+"]"),"object"==typeof t[n]?i+=h.ajax.prepareData(t[n],o):i+=o+"="+h.util.urlencode(t[n])}return i},h.ajax.xhrSuccess=function(t){return 200<=t.status&&t.status<300||304===t.status||1223===t.status||0===t.status},h.ajax.Setup=function(t,e){for(var i in e=!!e,t)e?p[i]=t[i]:u[i]=t[i]},h.ajax.replaceLocalStorageValue=function(t,e,i){h.localStorage&&h.localStorage.set("ajax-"+t,e,i)},h.ajax._uncache=function(t){return t+(-1!==t.indexOf("?")?"&":"?")+"_="+(new Date).getTime()},h.ajax.get=function(t,e,i){return h.type.isFunction(e)&&(i=e,e=""),(e=h.ajax.prepareData(e))&&(t+=(-1!==t.indexOf("?")?"&":"?")+e,e=""),h.ajax({method:"GET",dataType:"html",url:t,data:"",onsuccess:i})},h.ajax.getCaptcha=function(t){return h.ajax.loadJSON("/bitrix/tools/ajax_captcha.php",t)},h.ajax.insertToNode=function(t,e){if(e=h(e)){var i={cancel:!1};if(h.onCustomEvent("onAjaxInsertToNode",[{url:t,node:e,eventArgs:i}]),!0===i.cancel)return;var n=null;return p.denyShowWait||(n=h.showWait(e),delete p.denyShowWait),h.ajax.get(t,function(t){e.innerHTML=t,h.closeWait(e,n)})}},h.ajax.post=function(t,e,i){return e=h.ajax.prepareData(e),h.ajax({method:"POST",dataType:"html",url:t,data:e,onsuccess:i})},h.ajax.loadScriptAjax=function(t,e,i){if(h.type.isArray(t))for(var n=0,o=t.length;n<o;n++)h.ajax.loadScriptAjax(t[n],e,i);else{var s=t.replace(/\.js\?.*/,".js");if(d.script_self.test(s))return;if(d.script_self_window.test(s)&&h.CWindow)return;if(d.script_self_admin.test(s)&&h.admin)return;if(void 0===r[s])return i?(r[s]="",h.loadScript(t)):h.ajax({url:t,method:"GET",dataType:"script",processData:!0,emulateOnload:!1,scriptsRunFirst:!0,async:!1,start:!0,onsuccess:function(t){r[s]=t,e&&e(t)}});e&&e(r[s])}},h.ajax.loadJSON=function(t,e,i,n){return h.type.isFunction(e)&&(n=i,i=e,e=""),(e=h.ajax.prepareData(e))&&(t+=(-1!==t.indexOf("?")?"&":"?")+e,e=""),h.ajax({method:"GET",dataType:"json",url:t,onsuccess:i,onfailure:n})},h.ajax.load=function(t,e){h.type.isArray(t)||(t=[t]);var i=0;h.type.isFunction(e)||(e=h.DoNothing);for(var n=function(t){h.type.isFunction(this.callback)&&this.callback(t),++i>=s&&e()},o=0,s=t.length;o<s;o++)switch(t[o].type.toUpperCase()){case"SCRIPT":h.loadScript([t[o].url],h.proxy(n,t[o]));break;case"CSS":h.loadCSS([t[o].url]),++i>=s&&e();break;case"JSON":h.ajax.loadJSON(t[o].url,h.proxy(n,t[o]));break;default:h.ajax.get(t[o].url,"",h.proxy(n,t[o]))}},h.ajax.submit=function(t,e){if(!t.target){if(null==t.BXFormTarget){var i="formTarget_"+Math.random();t.BXFormTarget=document.body.appendChild(h.create("IFRAME",{props:{name:i,id:i,src:"javascript:void(0)"},style:{display:"none"}}))}t.target=t.BXFormTarget.name}return t.BXFormCallback=e,h.bind(t.BXFormTarget,"load",h.proxy(h.ajax._submit_callback,t)),h.submit(t),!1},h.ajax.submitComponentForm=function(t,e,i){if(!t.target){if(null==t.BXFormTarget){var n="formTarget_"+Math.random();t.BXFormTarget=document.body.appendChild(h.create("IFRAME",{props:{name:n,id:n,src:"javascript:void(0)"},style:{display:"none"}}))}t.target=t.BXFormTarget.name}if(i)var o=h.showWait(e);return t.BXFormCallback=function(t){i&&h.closeWait(o);h(e).innerHTML=t,h.onCustomEvent("onAjaxSuccess",[null,null,function(){a.bxcompajaxframeonload&&setTimeout(function(){a.bxcompajaxframeonload(),a.bxcompajaxframeonload=null},10)}])},h.bind(t.BXFormTarget,"load",h.proxy(h.ajax._submit_callback,t)),!0},h.ajax._submit_callback=function(){try{if(0!=this.BXFormTarget.contentWindow.location.href.indexOf("http"))return}catch(t){return}this.BXFormCallback&&this.BXFormCallback.apply(this,[this.BXFormTarget.contentWindow.document.body.innerHTML]),h.unbindAll(this.BXFormTarget)},h.ajax.prepareForm=function(t,e){e=e||{};var i,n,o,s=[],r=t.elements.length,a=0,l=0;if(t){for(i=0;i<r;i++)if(!(o=t.elements[i]).disabled&&o.type)switch(o.type.toLowerCase()){case"text":case"textarea":case"password":case"number":case"hidden":case"select-one":s.push({name:o.name,value:o.value}),l+=o.name.length+o.value.length;break;case"file":if(o.files)for(n=0;n<o.files.length;n++)a++,s.push({name:o.name,value:o.files[n],file:!0}),l+=o.files[n].size;break;case"radio":case"checkbox":o.checked&&(s.push({name:o.name,value:o.value}),l+=o.name.length+o.value.length);break;case"select-multiple":for(var h=0;h<o.options.length;h++)o.options[h].selected&&(s.push({name:o.name,value:o.options[h].value}),l+=o.name.length+o.options[h].length)}l=i=0;for(var p,u,c,d=e;i<s.length;){var f=s[i].name.indexOf("[");-1==f?(d[s[i].name]=s[i].value,d=e,i++):(p=s[i].name.substring(0,f),-1==(c=(u=s[i].name.substring(f+1)).indexOf("]"))?(d[p]||(d[p]=[]),d=e,i++):s[i].name=0==c?(d[p]||(d[p]=[]),""+(d=d[p]).length):(d[p]||(d[p]={}),d=d[p],u.substring(0,c)+u.substring(c+1)))}}return{data:e,filesCount:a,roughSize:l}},h.ajax.submitAjax=function(t,i){if((i=null!==i&&"object"==typeof i?i:{}).url=i.url||t.getAttribute("action"),i.data=h.ajax.prepareForm(t).data,a.FormData){var r=function(t,e,i){if(i&&"object"==typeof i&&(o=i,"[object File]"!=(s=Object.prototype.toString.call(o))&&"[object Blob]"!=s))for(var n in i)i.hasOwnProperty(n)&&r(t,""==e?n:e+"["+n+"]",i[n]);else t.append(e,i||"");var o,s},o=function(t){var e={};if(null!=t)if("object"==typeof t){for(var i in t)if(t.hasOwnProperty(i)){var n=h.util.urlencode(i);"object"==typeof t[i]&&!0!==t[i].file?e[n]=o(t[i]):!0===t[i].file?e[n]=t[i].value:e[n]=h.util.urlencode(t[i])}}else e=h.util.urlencode(t);return e},e=new a.FormData;"POST"!==i.method?(i.data=h.ajax.prepareData(i.data),i.data&&(i.url+=(-1!==i.url.indexOf("?")?"&":"?")+i.data,i.data="")):(!0===i.preparePost&&(i.data=o(i.data)),r(e,"",i.data),i.data=e),i.preparePost=!1,i.start=!1;var n=h.ajax(i);i.onprogress&&n.upload.addEventListener("progress",function(t){var e=null;t.lengthComputable&&(t.total||t.totalSize)&&(e=100*t.loaded/(t.total||t.totalSize)),i.onprogress(t,e)}),n.send(e)}else h.ajax(i)},h.ajax.UpdatePageData=function(s){if(s.TITLE&&h.ajax.UpdatePageTitle(s.TITLE),(s.WINDOW_TITLE||s.TITLE)&&h.ajax.UpdateWindowTitle(s.WINDOW_TITLE||s.TITLE),s.NAV_CHAIN&&h.ajax.UpdatePageNavChain(s.NAV_CHAIN),s.CSS&&0<s.CSS.length&&h.loadCSS(s.CSS),s.SCRIPTS&&0<s.SCRIPTS.length){var r=function(t,e,i){if(e&&h.type.isArray(e.scripts))for(var n=0,o=s.SCRIPTS.length;n<o;n++)e.scripts.push({isInternal:!1,JS:s.SCRIPTS[n]});else h.loadScript(s.SCRIPTS,i);h.removeCustomEvent("onAjaxSuccess",r)};h.addCustomEvent("onAjaxSuccess",r)}else{var n=function(t,e,i){h.type.isFunction(i)&&i(),h.removeCustomEvent("onAjaxSuccess",n)};h.addCustomEvent("onAjaxSuccess",n)}},h.ajax.UpdatePageTitle=function(t){var e=h("pagetitle");e&&(e.removeChild(e.firstChild),e.firstChild?e.insertBefore(document.createTextNode(t),e.firstChild):e.appendChild(document.createTextNode(t)))},h.ajax.UpdateWindowTitle=function(t){document.title=t},h.ajax.UpdatePageNavChain=function(t){var e=h("navigation");e&&(e.innerHTML=t)},h.userOptions={options:null,bSend:!1,delay:5e3,path:"/bitrix/admin/user_options.php?"},h.userOptions.setAjaxPath=function(t){h.userOptions.path=-1==t.indexOf("?")?t+"?":t+"&"},h.userOptions.save=function(t,e,i,n,o){null==h.userOptions.options&&(h.userOptions.options={}),o=!!o,h.userOptions.options[t+"."+e+"."+i]=[t,e,i,n,o];var s=h.userOptions.__get();""!=s&&(document.cookie=h.message("COOKIE_PREFIX")+"_LAST_SETTINGS="+s+"&sessid="+h.bitrix_sessid()+"; expires=Thu, 31 Dec 2020 23:59:59 GMT; path=/;"),h.userOptions.bSend||(h.userOptions.bSend=!0,setTimeout(function(){h.userOptions.send(null)},h.userOptions.delay))},h.userOptions.send=function(t){var e=h.userOptions.__get();h.userOptions.options=null,h.userOptions.bSend=!1,""!=e&&(document.cookie=h.message("COOKIE_PREFIX")+"_LAST_SETTINGS=; path=/;",h.ajax({method:"GET",dataType:"html",processData:!1,cache:!1,url:h.userOptions.path+e+"&sessid="+h.bitrix_sessid(),onsuccess:t}))},h.userOptions.del=function(t,e,i,n){h.ajax.get(h.userOptions.path+"action=delete&c="+t+"&n="+e+(1==i?"&common=Y":"")+"&sessid="+h.bitrix_sessid(),n)},h.userOptions.__get=function(){if(!h.userOptions.options)return"";var t,e,i="",n=-1,o="";for(e in h.userOptions.options)h.userOptions.options.hasOwnProperty(e)&&(o!=(t=h.userOptions.options[e])[0]+"."+t[1]&&(i+="&p["+ ++n+"][c]="+h.util.urlencode(t[0]),i+="&p["+n+"][n]="+h.util.urlencode(t[1]),1==t[4]&&(i+="&p["+n+"][d]=Y"),o=t[0]+"."+t[1]),i+="&p["+n+"][v]["+h.util.urlencode(t[2])+"]="+h.util.urlencode(t[3]));return i.substr(1)},h.ajax.history={expected_hash:"",obParams:null,obFrame:null,obImage:null,obTimer:null,bInited:!1,bHashCollision:!1,bPushState:!(!history.pushState||!h.type.isFunction(history.pushState)),startState:null,init:function(t){if(!h.ajax.history.bInited){this.obParams=t;var e=this.obParams.getState();h.ajax.history.bPushState?(h.ajax.history.expected_hash=a.location.pathname,a.location.search&&(h.ajax.history.expected_hash+=a.location.search),h.ajax.history.put(e,h.ajax.history.expected_hash,"",!0),setTimeout(function(){h.bind(a,"popstate",h.ajax.history.__hashListener)},500)):(h.ajax.history.expected_hash=a.location.hash,h.ajax.history.expected_hash&&"#"!=h.ajax.history.expected_hash||(h.ajax.history.expected_hash="__bx_no_hash__"),o.put(h.ajax.history.expected_hash,e),h.ajax.history.obTimer=setTimeout(h.ajax.history.__hashListener,500),h.browser.IsIE()?(h.ajax.history.obFrame=document.createElement("IFRAME"),h.hide_object(h.ajax.history.obFrame),document.body.appendChild(h.ajax.history.obFrame),h.ajax.history.obFrame.contentWindow.document.open(),h.ajax.history.obFrame.contentWindow.document.write(h.ajax.history.expected_hash),h.ajax.history.obFrame.contentWindow.document.close()):h.browser.IsOpera()&&(h.ajax.history.obImage=document.createElement("IMG"),h.hide_object(h.ajax.history.obImage),document.body.appendChild(h.ajax.history.obImage),h.ajax.history.obImage.setAttribute("src","javascript:location.href = 'javascript:BX.ajax.history.__hashListener();';"))),h.ajax.history.bInited=!0}},__hashListener:function(t){if(t=t||a.event||{state:!1},h.ajax.history.bPushState)h.ajax.history.obParams.setState(t.state||h.ajax.history.startState);else{var e;if(h.ajax.history.obTimer&&(a.clearTimeout(h.ajax.history.obTimer),h.ajax.history.obTimer=null),(e=null!=h.ajax.history.obFrame?h.ajax.history.obFrame.contentWindow.document.body.innerText:a.location.hash)&&"#"!=e||(e="__bx_no_hash__"),0==e.indexOf("#")&&(e=e.substring(1)),e!=h.ajax.history.expected_hash){var i=o.get(e);if(i&&(h.ajax.history.obParams.setState(i),h.ajax.history.expected_hash=e,null!=h.ajax.history.obFrame)){var n="__bx_no_hash__"==e?"":e;a.location.hash!=n&&a.location.hash!="#"+n&&(a.location.hash=n)}}h.ajax.history.obTimer=setTimeout(h.ajax.history.__hashListener,500)}},put:function(t,e,i,n){this.bPushState?n?h.ajax.history.startState=t:history.pushState(t,"",e):(e=void 0!==i?i:"view"+e,o.put(e,t),h.ajax.history.expected_hash=e,a.location.hash=h.util.urlencode(e),null!=h.ajax.history.obFrame&&(h.ajax.history.obFrame.contentWindow.document.open(),h.ajax.history.obFrame.contentWindow.document.write(e),h.ajax.history.obFrame.contentWindow.document.close()))},checkRedirectStart:function(t,e){var i=a.location.hash;"#"==i.substring(0,1)&&(i=i.substring(1));var n=i.substring(0,5);"view/"!=n&&"view%"!=n||(h.ajax.history.bHashCollision=!0,document.write('<div id="__ajax_hash_collision_'+e+'" style="display: none;">'))},checkRedirectFinish:function(o,s){document.write("</div>");var r=a.location.hash;"#"==r.substring(0,1)&&(r=r.substring(1)),h.ready(function(){var t=r.substring(0,5);if("view/"==t||"view%"==t){var e=h("__ajax_hash_collision_"+s),i=e.firstChild;h.cleanNode(i),e.style.display="block","view%"!=t&&(r=h.util.urlencode(r));var n="/bitrix/tools/ajax_redirector.php?hash="+(r+=(-1==r.indexOf("%3F")?"%3F":"%26")+o+"="+s);h.ajax.insertToNode(n,i)}})}},h.ajax.component=function(t){this.node=t},h.ajax.component.prototype.getState=function(){var t={node:this.node,title:a.document.title,data:h(this.node).innerHTML},e=h("navigation");return null!=e&&(t.nav_chain=e.innerHTML),h.onCustomEvent(h(t.node),"onComponentAjaxHistoryGetState",[t]),t},h.ajax.component.prototype.setState=function(t){h(t.node).innerHTML=t.data,h.ajax.UpdatePageTitle(t.title),t.nav_chain&&h.ajax.UpdatePageNavChain(t.nav_chain),h.onCustomEvent(h(t.node),"onComponentAjaxHistorySetState",[t])};var o={arHistory:{},put:function(t,e){this.arHistory[t]=e},get:function(t){return this.arHistory[t]}};h.ajax.FormData=function(){this.elements=[],this.files=[],this.features={},this.isSupported(),this.log("BX FormData init")},h.ajax.FormData.isSupported=function(){var t=new h.ajax.FormData,e=t.features.supported;return t=null,e},h.ajax.FormData.prototype.log=function(t){0},h.ajax.FormData.prototype.isSupported=function(){var t={};return t.fileReader=a.FileReader&&a.FileReader.prototype.readAsBinaryString,t.readFormData=t.sendFormData=!!a.FormData,t.supported=!(!t.readFormData||!t.sendFormData),this.features=t,this.log("features:"),this.log(t),t.supported},h.ajax.FormData.prototype.append=function(t,e){"object"==typeof e?this.files.push({name:t,value:e}):this.elements.push({name:t,value:e})},h.ajax.FormData.prototype.send=function(t,e,i,n){if(this.log("FD send"),this.xhr=h.ajax({method:"POST",dataType:"html",url:t,onsuccess:e,onfailure:n,start:!1,preparePost:!1}),i&&this.xhr.upload.addEventListener("progress",function(t){t.lengthComputable&&i(t.loaded/(t.total||t.totalSize))},!1),this.features.readFormData&&this.features.sendFormData){var o=new FormData;for(var s in this.log("use browser formdata"),this.elements)this.elements.hasOwnProperty(s)&&o.append(this.elements[s].name,this.elements[s].value);for(s in this.files)this.files.hasOwnProperty(s)&&o.append(this.files[s].name,this.files[s].value);this.xhr.send(o)}return this.xhr},h.addCustomEvent("onAjaxFailure",h.debug)}}(window),JSON||(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,o,s,r,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;i<s;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;i<s;i+=1)"string"==typeof rep[i]&&(o=str(n=rep[i],l))&&r.push(quote(n)+(gap?": ":":")+o);else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l))&&r.push(quote(n)+(gap?": ":":")+o);return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(indent=gap="","number"==typeof i)for(n=0;n<i;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var i,n,o=t[e];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(void 0!==(n=walk(o,i))?o[i]=n:delete o[i]);return reviver.call(t,e,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(i){if(!i.BX.localStorage){var o=i.BX,e=null,t=null,n="_bxCurrentKey",s=!1;o.localStorage=function(){this.keyChanges={},o.bind(o.browser.IsIE()&&!o.browser.IsIE9()?document:i,"storage",o.proxy(this._onchange,this)),setInterval(o.delegate(this._clear,this),5e3)},o.localStorage.checkBrowser=function(){return s},o.localStorage.set=function(t,e,i){return o.localStorage.instance().set(t,e,i)},o.localStorage.get=function(t){return o.localStorage.instance().get(t)},o.localStorage.remove=function(t){return o.localStorage.instance().remove(t)},o.localStorage.instance=function(){if(!e){var t=o.localStorage.checkBrowser();e="native"==t?new o.localStorage:"ie8"==t?new o.localStorageIE8:"ie7"==t?new o.localStorageIE7:{set:o.DoNothing,get:function(){return null},remove:o.DoNothing}}return e},o.localStorage.prototype.prefix=function(){return t||(t="bx"+o.message("USER_ID")+"-"+(o.message.SITE_ID?o.message("SITE_ID"):"admin")+"-"),t},o.localStorage.prototype._onchange=function(t){if((t=t||i.event).key)if(0<o.browser.DetectIeVersion()&&this.keyChanges[t.key])this.keyChanges[t.key]=!1;else if(t.key&&t.key.substring(0,this.prefix().length)==this.prefix()){var e={key:t.key.substring(this.prefix().length,t.key.length),value:t.newValue?this._decode(t.newValue.substring(11,t.newValue.length)):null,oldValue:t.oldValue?this._decode(t.oldValue.substring(11,t.oldValue.length)):null};switch(e.key){case"BXGCE":e.value&&o.onCustomEvent(e.value.e,e.value.p);break;default:t.newValue&&o.onCustomEvent(i,"onLocalStorageSet",[e]),t.oldValue&&!t.newValue&&o.onCustomEvent(i,"onLocalStorageRemove",[e]),o.onCustomEvent(i,"onLocalStorageChange",[e])}}},o.localStorage.prototype._clear=function(){var t,e,i=+new Date;for(e=0;e<localStorage.length;e++){if("bx"==(t=localStorage.key(e)).substring(0,2))1e3*localStorage.getItem(t).split(":",1)<=i&&localStorage.removeItem(t)}},o.localStorage.prototype._encode=function(t){return t="object"==typeof t?JSON.stringify(t):t.toString()},o.localStorage.prototype._decode=function(e){var i=null;if(e)try{i=JSON.parse(e)}catch(t){i=e}return i},o.localStorage.prototype._trigger_error=function(t,e,i,n){o.onCustomEvent(this,"onLocalStorageError",[t,{key:e,value:i,ttl:n}])},o.localStorage.prototype.set=function(e,i,n){if((!n||n<=0)&&(n=60),null==e||null==e||null==i)return!1;this.keyChanges[this.prefix()+e]=!0;try{localStorage.setItem(this.prefix()+e,Math.round(+new Date/1e3)+n+":"+this._encode(i))}catch(t){this._trigger_error(t,e,i,n)}},o.localStorage.prototype.get=function(t){var e=localStorage.getItem(this.prefix()+t);if(e){var i=1e3*e.split(":",1);if(+new Date<=i)return e=e.substring(11,e.length),this._decode(e)}return null},o.localStorage.prototype.remove=function(t){this.keyChanges[this.prefix()+t]=!0,localStorage.removeItem(this.prefix()+t)},o.localStorageIE7=function(){this.NS="BXLocalStorage",this.__current_state={},this.keyChanges={},o.ready(o.delegate(this._Init,this))},o.extend(o.localStorageIE7,o.localStorage),o.localStorageIE7.prototype._Init=function(){this.storage_element=document.body.appendChild(o.create("DIV")),this.storage_element.addBehavior("#default#userData"),this.storage_element.load(this.NS);for(var t=this.storage_element.xmlDocument,e=t.firstChild.attributes.length,i=0;i<e;i++)if(t.firstChild.attributes[i]){var n=t.firstChild.attributes[i].nodeName;n.substring(0,this.prefix().length)==this.prefix()&&(this.__current_state[n]=t.firstChild.attributes[i].nodeValue)}setInterval(o.delegate(this._Listener,this),500),setInterval(o.delegate(this._clear,this),5e3)},o.localStorageIE7.prototype._Listener=function(t){this.storage_element.load(this.NS);var e,i,n,o=this.storage_element.xmlDocument,s=o.firstChild.attributes.length,r={},a=[];for(e=0;e<s;e++)o.firstChild.attributes[e]&&(i=o.firstChild.attributes[e].nodeName).substring(0,this.prefix().length)==this.prefix()&&(n=o.firstChild.attributes[e].nodeValue,this.__current_state[i]!=n&&a.push({key:i,newValue:n,oldValue:this.__current_state[i]}),r[i]=n,delete this.__current_state[i]);for(e in this.__current_state)this.__current_state.hasOwnProperty(e)&&a.push({key:e,newValue:void 0,oldValue:this.__current_state[e]});for(this.__current_state=r,e=0;e<a.length;e++)this._onchange(a[e])},o.localStorageIE7.prototype._clear=function(){this.storage_element.load(this.NS);var t,e,i=this.storage_element.xmlDocument,n=i.firstChild.attributes.length,o=+new Date;for(t=0;t<n;t++)i.firstChild.attributes[t]&&"bx"==(e=i.firstChild.attributes[t].nodeName).substring(0,2)&&1e3*i.firstChild.attributes[t].nodeValue.split(":",1)<=o&&i.firstChild.removeAttribute(e);this.storage_element.save(this.NS)},o.localStorageIE7.prototype.set=function(e,i,n){(!n||n<=0)&&(n=60);try{this.storage_element.load(this.NS);var t=this.storage_element.xmlDocument;this.keyChanges[this.prefix()+e]=!0,t.firstChild.setAttribute(this.prefix()+e,Math.round(+new Date/1e3)+n+":"+this._encode(i)),this.storage_element.save(this.NS)}catch(t){this._trigger_error(t,e,i,n)}},o.localStorageIE7.prototype.get=function(t){this.storage_element.load(this.NS);var e=this.storage_element.xmlDocument.firstChild.getAttribute(this.prefix()+t);if(e){var i=1e3*e.split(":",1);if(+new Date<=i)return e=e.substring(11,e.length),this._decode(e)}return null},o.localStorageIE7.prototype.remove=function(t){this.storage_element.load(this.NS),this.storage_element.xmlDocument.firstChild.removeAttribute(this.prefix()+t),this.keyChanges[this.prefix()+t]=!0,this.storage_element.save(this.NS)},o.localStorageIE8=function(){this.key=n,this.currentKey=null,this.currentValue=null,o.localStorageIE8.superclass.constructor.apply(this)},o.extend(o.localStorageIE8,o.localStorage),o.localStorageIE8.prototype._onchange=function(t){if(null==this.currentKey)this.currentKey=localStorage.getItem(this.key),this.currentKey&&(this.currentValue=localStorage.getItem(this.prefix()+this.currentKey));else{if(t={key:this.prefix()+this.currentKey,newValue:localStorage.getItem(this.prefix()+this.currentKey),oldValue:this.currentValue},this.currentKey=null,this.currentValue=null,this.keyChanges[t.key])return void(this.keyChanges[t.key]=!1);o.localStorageIE8.superclass._onchange.apply(this,[t])}},o.localStorageIE8.prototype.set=function(e,i,n){this.currentKey=null,this.keyChanges[this.prefix()+e]=!0;try{localStorage.setItem(this.key,e),o.localStorageIE8.superclass.set.apply(this,arguments)}catch(t){this._trigger_error(t,e,i,n)}},o.localStorageIE8.prototype.remove=function(t){this.currentKey=null,this.keyChanges[this.prefix()+t]=!0,localStorage.setItem(this.key,t),o.localStorageIE8.superclass.remove.apply(this,arguments)},o.onGlobalCustomEvent=function(t,e,i){o.localStorage.checkBrowser()&&o.localStorage.set("BXGCE",{e:t,p:e},1),i||o.onCustomEvent(t,e)};try{s=!!localStorage.setItem}catch(t){}if(s){s="native";var r=o.browser.IsIE()&&!o.browser.IsIE9()?document:i,a=function(t){void 0===(t||i.event).key&&(s="ie8"),o.unbind(r,"storage",a),o.localStorage.instance()};o.bind(r,"storage",a);try{localStorage.setItem(n,null)}catch(t){s=!1,o.localStorage.instance()}}else o.browser.IsIE7()&&(s="ie7",o.localStorage.instance())}}(window),function(e){var a=1,i=.05,n="linear",o=!1;BX.fx=function(t){if(this.options=t,null!=this.options.time&&(this.options.originalTime=this.options.time),null!=this.options.step&&(this.options.originalStep=this.options.step),!this.__checkOptions())return!1;this.__go=BX.delegate(this.go,this),this.PARAMS={}},BX.fx.prototype.__checkOptions=function(){if(typeof this.options.start!=typeof this.options.finish)return!1;var t;for(t in null==this.options.time&&(this.options.time=a),null==this.options.step&&(this.options.step=i),null==this.options.type&&(this.options.type=n),null==this.options.allowFloat&&(this.options.allowFloat=o),this.options.time*=1e3,this.options.step*=1e3,"object"!=typeof this.options.start&&(this.options.start={_param:this.options.start},this.options.finish={_param:this.options.finish}),this.options.start)null==this.options.finish[t]&&(this.options.start[t]=null,delete this.options.start[t]);return BX.type.isFunction(this.options.type)||(BX.type.isFunction(e[this.options.type])?this.options.type=e[this.options.type]:BX.type.isFunction(BX.fx.RULES[this.options.type])?this.options.type=BX.fx.RULES[this.options.type]:this.options.type=BX.fx.RULES[n]),!0},BX.fx.prototype.go=function(){var t=(new Date).valueOf();if(t<this.PARAMS.timeFinish){for(var e in this.PARAMS.current)this.PARAMS.current[e][0]=this.options.type.apply(this,[{start_value:this.PARAMS.start[e][0],finish_value:this.PARAMS.finish[e][0],current_value:this.PARAMS.current[e][0],current_time:t-this.PARAMS.timeStart,total_time:this.options.time}]);this._callback(this.options.callback),this.paused||(this.PARAMS.timer=setTimeout(this.__go,this.options.step))}else this.stop()},BX.fx.prototype._callback=function(t){var e={};for(var i in t=t||this.options.callback,this.PARAMS.current)e[i]=(this.options.allowFloat?this.PARAMS.current[i][0]:Math.round(this.PARAMS.current[i][0]))+this.PARAMS.current[i][1];return t.apply(this,[null!=e._param?e._param:e])},BX.fx.prototype.start=function(){var t,e,i;for(t in this.PARAMS.start={},this.PARAMS.current={},this.PARAMS.finish={},this.options.start)e=+this.options.start[t],i=(this.options.start[t]+"").substring((e+"").length),this.PARAMS.start[t]=[e,i],this.PARAMS.current[t]=[e,i],this.PARAMS.finish[t]=[+this.options.finish[t],i];return this._callback(this.options.callback_start),this._callback(this.options.callback),this.PARAMS.timeStart=(new Date).valueOf(),this.PARAMS.timeFinish=this.PARAMS.timeStart+this.options.time,this.PARAMS.timer=setTimeout(BX.delegate(this.go,this),this.options.step),this},BX.fx.prototype.pause=function(){this.paused?(this.PARAMS.timer=setTimeout(this.__go,this.options.step),this.paused=!1):(clearTimeout(this.PARAMS.timer),this.paused=!0)},BX.fx.prototype.stop=function(t){t=!!t,this.PARAMS.timer&&clearTimeout(this.PARAMS.timer),null!=this.options.originalTime&&(this.options.time=this.options.originalTime),null!=this.options.originalStep&&(this.options.step=this.options.originalStep),this.PARAMS.current=this.PARAMS.finish,t||(this._callback(this.options.callback),this._callback(this.options.callback_complete))},BX.fx.RULES={linear:function(t){return t.start_value+t.current_time/t.total_time*(t.finish_value-t.start_value)},decelerated:function(t){return t.start_value+Math.sqrt(t.current_time/t.total_time)*(t.finish_value-t.start_value)},accelerated:function(t){var e=t.current_time/t.total_time;return t.start_value+e*e*(t.finish_value-t.start_value)}},BX.fx.hide=function(t,e,i){if(t=BX(t),"object"==typeof e&&null==i&&(e=(i=e).type),BX.type.isNotEmptyString(e)){var n=BX.fx.EFFECTS[e](t,i,0);return n.callback_complete=function(){!1!==i.hide&&(t.style.display="none"),i.callback_complete&&i.callback_complete.apply(this,arguments)},new BX.fx(n).start()}t.style.display="none"},BX.fx.show=function(t,e,i){if(t=BX(t),"object"==typeof e&&null==i&&(e=(i=e).type),i||(i={}),BX.type.isNotEmptyString(e)){var n=BX.fx.EFFECTS[e](t,i,1);return n.callback_complete=function(){!1!==i.show&&(t.style.display="block"),i.callback_complete&&i.callback_complete.apply(this,arguments)},new BX.fx(n).start()}t.style.display="block"},BX.fx.EFFECTS={scroll:function(e,t,i){t.direction||(t.direction="vertical");var n="horizontal"==t.direction?"width":"height",o=parseInt(BX.style(e,n));if(isNaN(o)&&(o=BX.pos(e)[n]),0==i)var s=o,r=t.min_height?parseInt(t.min_height):0;else r=o,s=t.min_height?parseInt(t.min_height):0;return{start:s,finish:r,time:t.time||a,type:"linear",callback_start:function(){"static"==BX.style(e,"position")&&(e.style.position="relative"),e.style.overflow="hidden",e.style[n]=s+"px",e.style.display="block"},callback:function(t){e.style[n]=t+"px"}}},fade:function(e,t,i){var n={time:t.time||a,type:0==i?"decelerated":"linear",start:0==i?1:0,finish:0==i?0:1,allowFloat:!0};return BX.browser.IsIE()&&!BX.browser.IsIE9()?(n.start*=100,n.finish*=100,n.allowFloat=!1,n.callback_start=function(){e.style.display="block",e.style.filter+="progid:DXImageTransform.Microsoft.Alpha(opacity="+n.start+")"},n.callback=function(t){(e.filters["DXImageTransform.Microsoft.alpha"]||e.filters.alpha).opacity=t}):(n.callback_start=function(){e.style.display="block"},n.callback=function(t){e.style.opacity=e.style.KhtmlOpacity=e.style.MozOpacity=t}),n},fold:function(t,e,i){if(0==i){var n=BX.pos(t),o=n.height/(n.width+n.height),s={time:e.time||a,callback_complete:e.callback_complete,hide:e.hide};return e.type="scroll",e.direction="vertical",e.min_height=e.min_height||10,e.hide=!1,e.time=o*s.time,e.callback_complete=function(){t.style.whiteSpace="nowrap",e.direction="horizontal",e.min_height=null,e.time=s.time-e.time,e.hide=s.hide,e.callback_complete=s.callback_complete,BX.fx.hide(t,e)},BX.fx.EFFECTS.scroll(t,e,i)}},scale:function(e,t,i){var n={width:parseInt(BX.style(e,"width")),height:parseInt(BX.style(e,"height"))};if(isNaN(n.width)||isNaN(n.height)){var o=BX.pos(e);n={width:o.width,height:o.height}}if(0==i)var s=n,r={width:0,height:0};else r=n,s={width:0,height:0};return{start:s,finish:r,time:t.time||a,type:"linear",callback_start:function(){e.style.position="relative",e.style.overflow="hidden",e.style.display="block",e.style.height=s.height+"px",e.style.width=s.width+"px"},callback:function(t){e.style.height=t.height+"px",e.style.width=t.width+"px"}}}};var l={arStack:{},arRules:{},globalAnimationId:0};BX.fx.colorAnimate=function(t,e,i){if(null!=t){animationId=t.getAttribute("data-animation-id"),null==animationId&&(animationId=l.globalAnimationId,t.setAttribute("data-animation-id",l.globalAnimationId++));for(var n=e.split(/\s*,\s*/),o=0;o<n.length;o++)if(e=n[o],l.arRules[e]){var s=0;l.arStack[animationId]?l.arStack[animationId][e]&&(s=l.arStack[animationId][e].i,clearInterval(l.arStack[animationId][e].tId)):l.arStack[animationId]={},0==s&&i||s==l.arRules[e][3]&&!i||(l.arStack[animationId][e]={i:s,element:t,tId:setInterval('BX.fx.colorAnimate.run("'+animationId+'","'+e+'")',l.arRules[e][4]),back:Boolean(i)})}}},BX.fx.colorAnimate.addRule=function(t,e,i,n,o,s,r){l.arRules[t]=[BX.util.hex2rgb(e),BX.util.hex2rgb(i),n.replace(/\-(.)/g,function(){return arguments[1].toUpperCase()}),o,s||1,r||!1]},BX.fx.colorAnimate.run=function(t,e){element=l.arStack[t][e].element,l.arStack[t][e].i+=l.arStack[t][e].back?-1:1;var i=l.arStack[t][e].i/l.arRules[e][3],n=1-i,o=l.arRules[e][0],s=l.arRules[e][1];element.style[l.arRules[e][2]]="rgb("+Math.floor(o.r*n+s.r*i)+","+Math.floor(o.g*n+s.g*i)+","+Math.floor(o.b*n+s.b*i)+")",l.arStack[t][e].i!=l.arRules[e][3]&&0!=l.arStack[t][e].i||(clearInterval(l.arStack[t][e].tId),l.arRules[e][5]&&BX.fx.colorAnimate(l.arStack[t][e].element,e,!0))},BX.easing=function(t){this.options=t,this.timer=null},BX.easing.prototype.animate=function(){if(!this.options||!this.options.start||!this.options.finish||"object"!=typeof this.options.start||"object"!=typeof this.options.finish)return null;for(var t in this.options.start)void 0===this.options.finish[t]&&delete this.options.start[t];this.options.progress=function(t){var e={};for(var i in this.start)e[i]=Math.round(this.start[i]+(this.finish[i]-this.start[i])*t);this.step&&this.step(e)},this.animateProgress()},BX.easing.prototype.stop=function(t){this.timer&&(clearInterval(this.timer),this.timer=null,t&&this.options.complete&&this.options.complete())},BX.easing.prototype.animateProgress=function(){var e=new Date,i=this.options.transition||BX.easing.transitions.linear,n=this.options.duration||1e3;this.timer=setInterval(BX.proxy(function(){var t=(new Date-e)/n;1<t&&(t=1),this.options.progress(i(t)),1==t&&this.stop(!0)},this),this.options.delay||13)},BX.easing.makeEaseInOut=function(e){return function(t){return t<.5?e(2*t)/2:(2-e(2*(1-t)))/2}},BX.easing.makeEaseOut=function(e){return function(t){return 1-e(1-t)}},BX.easing.transitions={linear:function(t){return t},quad:function(t){return Math.pow(t,2)},cubic:function(t){return Math.pow(t,3)},quart:function(t){return Math.pow(t,4)},quint:function(t){return Math.pow(t,5)},circ:function(t){return 1-Math.sin(Math.acos(t))},back:function(t){return Math.pow(t,2)*(2.5*t-1.5)},elastic:function(t){return Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*1.5/3*t)},bounce:function(t){for(var e=0,i=1;;e+=i,i/=2)if((7-4*e)/11<=t)return-Math.pow((11-6*e-11*t)/4,2)+Math.pow(i,2)}}}(window),function(r){if(!BX.PopupWindowManager){BX.PopupWindowManager={_popups:[],_currentPopup:null,create:function(t,e,i){var n;if(-1!==(n=this._getPopupIndex(t)))return this._popups[n];var o=new BX.PopupWindow(t,e,i);return BX.addCustomEvent(o,"onPopupShow",BX.delegate(this.onPopupShow,this)),BX.addCustomEvent(o,"onPopupClose",BX.delegate(this.onPopupClose,this)),BX.addCustomEvent(o,"onPopupDestroy",BX.delegate(this.onPopupDestroy,this)),this._popups.push(o),o},onPopupShow:function(t){null!==this._currentPopup&&this._currentPopup.close(),this._currentPopup=t},onPopupClose:function(t){this._currentPopup=null},onPopupDestroy:function(t){var e;-1!==(e=this._getPopupIndex(t.uniquePopupId))&&(this._popups=BX.util.deleteFromArray(this._popups,e))},getCurrentPopup:function(){return this._currentPopup},isPopupExists:function(t){return-1!==this._getPopupIndex(t)},_getPopupIndex:function(t){for(var e=0;e<this._popups.length;e++)if(this._popups[e].uniquePopupId==t)return e;return-1}},BX.PopupWindow=function(t,e,i){if(BX.onCustomEvent("onPopupWindowInit",[t,e,i]),this.uniquePopupId=t,this.params=i||{},this.params.zIndex=parseInt(this.params.zIndex),this.params.zIndex=isNaN(this.params.zIndex)?0:this.params.zIndex,this.buttons=this.params.buttons&&BX.type.isArray(this.params.buttons)?this.params.buttons:[],this.offsetTop=BX.PopupWindow.getOption("offsetTop"),this.offsetLeft=BX.PopupWindow.getOption("offsetLeft"),this.firstShow=!1,this.bordersWidth=20,this.bindElementPos=null,this.closeIcon=null,this.angle=null,this.overlay=null,this.titleBar=null,this.bindOptions="object"==typeof this.params.bindOptions?this.params.bindOptions:{},this.isAutoHideBinded=!1,this.closeByEsc=!!this.params.closeByEsc,this.isCloseByEscBinded=!1,this.params.parentPopup instanceof BX.PopupWindow?(this.parentPopup=this.params.parentPopup,this.appendContainer=this.params.parentPopup.contentContainer,this.params.offsetTop=(this.params.offsetTop?this.params.offsetTop:0)-(BX.PopupWindow.fullscreenStatus?0:this.parentPopup.popupContainer.offsetTop),this.params.offsetLeft=(this.params.offsetLeft?this.params.offsetLeft:0)-(BX.PopupWindow.fullscreenStatus?0:this.parentPopup.popupContainer.offsetLeft)):(this.parentPopup=null,this.appendContainer=document.body),this.dragged=!1,this.dragPageX=0,this.dragPageY=0,this.params.events)for(var n in this.params.events)BX.addCustomEvent(this,n,this.params.events[n]);i.darkMode&&BX.addClass(this.popupContainer,"popup-window-dark");var o="popup-window";i.contentColor&&BX.type.isNotEmptyString(i.contentColor)&&(o+=" popup-window-content-"+i.contentColor),i.contentNoPaddings&&(o+=" popup-window-content-no-paddings"),i.noAllPaddings&&(o+=" popup-window-no-paddings"),i.titleBar&&(o+=" popup-window-with-titlebar"),i.className&&BX.type.isNotEmptyString(i.className)&&(o+=" "+i.className),i.darkMode&&(o+=" popup-window-dark"),this.popupContainer=document.createElement("DIV");var s="popup-window-titlebar-"+t;i.titleBar&&(this.titleBar=BX.create("div",{props:{className:"popup-window-titlebar",id:s}})),i.closeIcon&&(this.closeIcon=BX.create("a",{props:{className:"popup-window-close-icon"+(i.titleBar?" popup-window-titlebar-close-icon":""),href:""},style:"object"==typeof i.closeIcon?i.closeIcon:{},events:{click:BX.proxy(this._onCloseIconClick,this)}}),BX.browser.IsIE()&&BX.adjust(this.closeIcon,{attrs:{hidefocus:"true"}})),this.contentContainer=BX.create("div",{props:{id:"popup-window-content-"+t,className:"popup-window-content"}}),BX.adjust(this.popupContainer,{props:{id:t,className:o},style:{zIndex:this.getZindex(),position:"absolute",display:"none",top:"0px",left:"0px"},children:[this.titleBar,this.contentContainer,this.closeIcon]}),this.appendContainer.appendChild(this.popupContainer),this.buttonsContainer=null,i.angle&&this.setAngle(i.angle),i.overlay&&this.setOverlay(i.overlay),this.setOffset(this.params),this.setBindElement(e),this.setTitleBar(this.params.titleBar),this.setContent(this.params.content),this.setButtons(this.params.buttons),!1!==this.params.bindOnResize&&BX.bind(r,"resize",BX.proxy(this._onResizeWindow,this))},BX.PopupWindow.prototype.setContent=function(t){this.contentContainer&&t&&(BX.type.isElementNode(t)?(BX.cleanNode(this.contentContainer),this.contentContainer.appendChild(t.parentNode?t.parentNode.removeChild(t):t),t.style.display="block"):BX.type.isString(t)?this.contentContainer.innerHTML=t:this.contentContainer.innerHTML="&nbsp;")},BX.PopupWindow.prototype.setButtons=function(t){if(this.buttons=t&&BX.type.isArray(t)?t:[],this.buttonsContainer&&BX.remove(this.buttonsContainer),0<this.buttons.length&&this.contentContainer){for(var e=[],i=0;i<this.buttons.length;i++){var n=this.buttons[i];null!=n&&BX.is_subclass_of(n,BX.PopupWindowButton)&&(n.popupWindow=this,e.push(n.render()))}this.buttonsContainer=this.contentContainer.parentNode.appendChild(BX.create("div",{props:{className:"popup-window-buttons"},children:e}))}},BX.PopupWindow.prototype.setBindElement=function(t){t&&"object"==typeof t&&(BX.type.isDomNode(t)||BX.type.isNumber(t.top)&&BX.type.isNumber(t.left)?this.bindElement=t:BX.type.isNumber(t.clientX)&&BX.type.isNumber(t.clientY)&&(BX.fixEventPageXY(t),this.bindElement={left:t.pageX,top:t.pageY,bottom:t.pageY}))},BX.PopupWindow.prototype.getBindElementPos=function(t){if(BX.type.isDomNode(t))return BX.pos(t,!1);if(t&&"object"==typeof t)return BX.type.isNumber(t.bottom)||(t.bottom=t.top),t;var e=BX.GetWindowInnerSize(),i=BX.GetWindowScrollPos(),n=this.popupContainer.offsetWidth,o=this.popupContainer.offsetHeight;return this.bindOptions.forceTop=!0,{left:e.innerWidth/2-n/2+i.scrollLeft,top:e.innerHeight/2-o/2+i.scrollTop,bottom:e.innerHeight/2-o/2+i.scrollTop,windowSize:e,windowScroll:i,popupWidth:n,popupHeight:o}},BX.PopupWindow.prototype.setAngle=function(t){var e="popup-window-angly";if(null==this.angle){var i=this.bindOptions.position&&"top"==this.bindOptions.position?"bottom":"top",n=BX.PopupWindow.getOption("top"==i?"angleMinTop":"angleMinBottom"),o=BX.type.isNumber(t.offset)?t.offset:0,s=BX.PopupWindow.getOption("angleLeftOffset",null);0<o&&BX.type.isNumber(s)&&(o+=s-BX.PopupWindow.defaultOptions.angleLeftOffset),this.angle={element:BX.create("div",{props:{className:e+" "+e+"-"+i}}),position:i,offset:0,defaultOffset:Math.max(o,n)},this.popupContainer.appendChild(this.angle.element)}if("object"==typeof t&&t.position&&BX.util.in_array(t.position,["top","right","bottom","left","hide"])&&(BX.removeClass(this.angle.element,e+"-"+this.angle.position),BX.addClass(this.angle.element,e+"-"+t.position),this.angle.position=t.position),"object"==typeof t&&BX.type.isNumber(t.offset)){var r,a,l=t.offset;"top"==this.angle.position?(r=BX.PopupWindow.getOption("angleMinTop"),a=(a=this.popupContainer.offsetWidth-BX.PopupWindow.getOption("angleMaxTop"))<r?Math.max(r,l):a,this.angle.offset=Math.min(Math.max(r,l),a),this.angle.element.style.left=this.angle.offset+"px",this.angle.element.style.marginLeft=0):"bottom"==this.angle.position?(r=BX.PopupWindow.getOption("angleMinBottom"),a=(a=this.popupContainer.offsetWidth-BX.PopupWindow.getOption("angleMaxBottom"))<r?Math.max(r,l):a,this.angle.offset=Math.min(Math.max(r,l),a),this.angle.element.style.marginLeft=this.angle.offset+"px",this.angle.element.style.left=0):"right"==this.angle.position?(r=BX.PopupWindow.getOption("angleMinRight"),a=(a=this.popupContainer.offsetHeight-BX.PopupWindow.getOption("angleMaxRight"))<r?Math.max(r,l):a,this.angle.offset=Math.min(Math.max(r,l),a),this.angle.element.style.top=this.angle.offset+"px"):"left"==this.angle.position&&(r=BX.PopupWindow.getOption("angleMinLeft"),a=(a=this.popupContainer.offsetHeight-BX.PopupWindow.getOption("angleMaxLeft"))<r?Math.max(r,l):a,this.angle.offset=Math.min(Math.max(r,l),a),this.angle.element.style.top=this.angle.offset+"px")}},BX.PopupWindow.prototype.isTopAngle=function(){return null!=this.angle&&"top"==this.angle.position},BX.PopupWindow.prototype.isBottomAngle=function(){return null!=this.angle&&"bottom"==this.angle.position},BX.PopupWindow.prototype.isTopOrBottomAngle=function(){return null!=this.angle&&BX.util.in_array(this.angle.position,["top","bottom"])},BX.PopupWindow.prototype.getAngleHeight=function(){return this.isTopOrBottomAngle()?BX.PopupWindow.getOption("angleTopOffset"):0},BX.PopupWindow.prototype.setOffset=function(t){"object"==typeof t&&(t.offsetLeft&&BX.type.isNumber(t.offsetLeft)&&(this.offsetLeft=t.offsetLeft+BX.PopupWindow.getOption("offsetLeft")),t.offsetTop&&BX.type.isNumber(t.offsetTop)&&(this.offsetTop=t.offsetTop+BX.PopupWindow.getOption("offsetTop")))},BX.PopupWindow.prototype.setTitleBar=function(t){this.titleBar&&("object"==typeof t&&BX.type.isDomNode(t.content)?(this.titleBar.innerHTML="",this.titleBar.appendChild(t.content)):"string"==typeof t&&(this.titleBar.innerHTML="",this.titleBar.appendChild(BX.create("span",{props:{className:"popup-window-titlebar-text"},text:t}))),this.params.draggable&&(this.titleBar.style.cursor="move",BX.bind(this.titleBar,"mousedown",BX.proxy(this._startDrag,this))))},BX.PopupWindow.prototype.setClosingByEsc=function(t){(t=!!t)?(this.closeByEsc=!0,this.isCloseByEscBinded||(BX.bind(document,"keyup",BX.proxy(this._onKeyUp,this)),this.isCloseByEscBinded=!0)):(this.closeByEsc=!1,this.isCloseByEscBinded&&(BX.unbind(document,"keyup",BX.proxy(this._onKeyUp,this)),this.isCloseByEscBinded=!1))},BX.PopupWindow.prototype.setOverlay=function(t){null==this.overlay&&(this.overlay={element:BX.create("div",{props:{className:"popup-window-overlay",id:"popup-window-overlay-"+this.uniquePopupId}})},this.adjustOverlayZindex(),this.resizeOverlay(),this.appendContainer.appendChild(this.overlay.element)),t&&t.opacity&&BX.type.isNumber(t.opacity)&&0<=t.opacity&&t.opacity<=100&&(BX.browser.IsIE()&&!BX.browser.IsIE9()?this.overlay.element.style.filter="alpha(opacity="+t.opacity+")":(this.overlay.element.style.filter="none",this.overlay.element.style.opacity=parseFloat(t.opacity/100).toPrecision(3))),t&&t.backgroundColor&&(this.overlay.element.style.backgroundColor=t.backgroundColor)},BX.PopupWindow.prototype.removeOverlay=function(){null!=this.overlay&&null!=this.overlay.element&&BX.remove(this.overlay.element),this.overlay=null},BX.PopupWindow.prototype.hideOverlay=function(){null!=this.overlay&&null!=this.overlay.element&&(this.overlay.element.style.display="none")},BX.PopupWindow.prototype.showOverlay=function(){null!=this.overlay&&null!=this.overlay.element&&(this.overlay.element.style.display="block")},BX.PopupWindow.prototype.resizeOverlay=function(){if(null!=this.overlay&&null!=this.overlay.element)if(this.parentPopup)this.overlay.element.style.width=this.parentPopup.popupContainer.offsetWidth+"px",this.overlay.element.style.height=this.parentPopup.popupContainer.offsetHeight+"px";else{var t=BX.GetWindowScrollSize(),e=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);this.overlay.element.style.width=t.scrollWidth+"px",this.overlay.element.style.height=e+"px"}},BX.PopupWindow.prototype.getZindex=function(){return null!=this.overlay?BX.PopupWindow.getOption("popupOverlayZindex")+this.params.zIndex:BX.PopupWindow.getOption("popupZindex")+this.params.zIndex},BX.PopupWindow.prototype.adjustOverlayZindex=function(){null!=this.overlay&&null!=this.overlay.element&&(this.overlay.element.style.zIndex=parseInt(this.popupContainer.style.zIndex)-1)},BX.PopupWindow.prototype.show=function(){this.firstShow||(BX.onCustomEvent(this,"onPopupFirstShow",[this]),this.firstShow=!0),BX.onCustomEvent(this,"onPopupShow",[this]),this.showOverlay(),this.popupContainer.style.display="block",this.adjustPosition(),BX.onCustomEvent(this,"onAfterPopupShow",[this]),this.closeByEsc&&!this.isCloseByEscBinded&&(BX.bind(document,"keyup",BX.proxy(this._onKeyUp,this)),this.isCloseByEscBinded=!0),this.params.autoHide&&!this.isAutoHideBinded&&setTimeout(BX.proxy(function(){this.isShown()&&(this.isAutoHideBinded=!0,BX.bind(this.popupContainer,"click",this.cancelBubble),BX.bind(document,"click",BX.proxy(this.close,this)))},this),100)},BX.PopupWindow.prototype.isShown=function(){return"block"==this.popupContainer.style.display},BX.PopupWindow.prototype.cancelBubble=function(t){t||(t=r.event),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},BX.PopupWindow.prototype.close=function(t){if(this.isShown()){if(t&&!(BX.getEventButton(t)&BX.MSLEFT))return!0;BX.onCustomEvent(this,"onPopupClose",[this,t]),this.hideOverlay(),this.popupContainer.style.display="none",this.isCloseByEscBinded&&(BX.unbind(document,"keyup",BX.proxy(this._onKeyUp,this)),this.isCloseByEscBinded=!1),setTimeout(BX.proxy(this._close,this),0)}},BX.PopupWindow.prototype._close=function(){this.params.autoHide&&this.isAutoHideBinded&&(this.isAutoHideBinded=!1,BX.unbind(this.popupContainer,"click",this.cancelBubble),BX.unbind(document,"click",BX.proxy(this.close,this)))},BX.PopupWindow.prototype._onCloseIconClick=function(t){t=t||r.event,this.close(t),BX.PreventDefault(t)},BX.PopupWindow.prototype._onKeyUp=function(t){27==(t=t||r.event).keyCode&&s(this.getZindex(),BX.proxy(this.close,this))},BX.PopupWindow.prototype.destroy=function(){BX.onCustomEvent(this,"onPopupDestroy",[this]),BX.unbindAll(this),BX.unbind(document,"keyup",BX.proxy(this._onKeyUp,this)),BX.unbind(document,"click",BX.proxy(this.close,this)),BX.unbind(document,"mousemove",BX.proxy(this._moveDrag,this)),BX.unbind(document,"mouseup",BX.proxy(this._stopDrag,this)),BX.unbind(r,"resize",BX.proxy(this._onResizeWindow,this)),BX.remove(this.popupContainer),this.removeOverlay()},BX.PopupWindow.prototype.enterFullScreen=function(){BX.PopupWindow.fullscreenStatus?document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():BX.browser.IsChrome()||BX.browser.IsSafari()?(this.contentContainer.webkitRequestFullScreen(this.contentContainer.ALLOW_KEYBOARD_INPUT),BX.bind(r,"webkitfullscreenchange",this.fullscreenBind=BX.proxy(this.eventFullScreen,this))):BX.browser.IsFirefox()&&(this.contentContainer.mozRequestFullScreen(this.contentContainer.ALLOW_KEYBOARD_INPUT),BX.bind(r,"mozfullscreenchange",this.fullscreenBind=BX.proxy(this.eventFullScreen,this)))},BX.PopupWindow.prototype.eventFullScreen=function(t){BX.PopupWindow.fullscreenStatus?(BX.browser.IsChrome()||BX.browser.IsSafari()?BX.unbind(r,"webkitfullscreenchange",this.fullscreenBind):BX.browser.IsFirefox()&&BX.unbind(r,"mozfullscreenchange",this.fullscreenBind),BX.removeClass(this.contentContainer,"popup-window-fullscreen",[this.contentContainer]),BX.PopupWindow.fullscreenStatus=!1,BX.onCustomEvent(this,"onPopupFullscreenLeave")):(BX.addClass(this.contentContainer,"popup-window-fullscreen"),BX.PopupWindow.fullscreenStatus=!0,BX.onCustomEvent(this,"onPopupFullscreenEnter",[this.contentContainer])),this.adjustPosition()},BX.PopupWindow.prototype.adjustPosition=function(t){t&&"object"==typeof t&&(this.bindOptions=t);var e=this.getBindElementPos(this.bindElement);if(this.bindOptions.forceBindPosition||null==this.bindElementPos||e.top!=this.bindElementPos.top||e.left!=this.bindElementPos.left){var i=(this.bindElementPos=e).windowSize?e.windowSize:BX.GetWindowInnerSize(),n=e.windowScroll?e.windowScroll:BX.GetWindowScrollPos(),o=e.popupWidth?e.popupWidth:this.popupContainer.offsetWidth,s=e.popupHeight?e.popupHeight:this.popupContainer.offsetHeight,r=BX.PopupWindow.getOption("angleTopOffset"),a=this.bindElementPos.left+this.offsetLeft-(this.isTopOrBottomAngle()?BX.PopupWindow.getOption("angleLeftOffset"):0);if(!this.bindOptions.forceLeft&&a+o+this.bordersWidth>=i.innerWidth+n.scrollLeft&&0<i.innerWidth+n.scrollLeft-o-this.bordersWidth){var l=a;a=i.innerWidth+n.scrollLeft-o-this.bordersWidth,this.isTopOrBottomAngle()&&this.setAngle({offset:l-a+this.angle.defaultOffset})}else this.isTopOrBottomAngle()&&this.setAngle({offset:this.angle.defaultOffset+(a<0?a:0)});a<0&&(a=0);var h=0;this.bindOptions.position&&"top"==this.bindOptions.position?(h=this.bindElementPos.top-s-this.offsetTop-(this.isBottomAngle()?r:0))<0||!this.bindOptions.forceTop&&h<n.scrollTop?(h=this.bindElementPos.bottom+this.offsetTop,null!=this.angle&&(h+=r,this.setAngle({position:"top"}))):this.isTopAngle()?(h=h-r+BX.PopupWindow.getOption("positionTopXOffset"),this.setAngle({position:"bottom"})):h+=BX.PopupWindow.getOption("positionTopXOffset"):(h=this.bindElementPos.bottom+this.offsetTop+this.getAngleHeight(),!this.bindOptions.forceTop&&h+s>i.innerHeight+n.scrollTop&&0<=this.bindElementPos.top-s-this.getAngleHeight()?(h=this.bindElementPos.top-s,this.isTopOrBottomAngle()&&(h-=r,this.setAngle({position:"bottom"})),h+=BX.PopupWindow.getOption("positionTopXOffset")):this.isBottomAngle()&&(h+=r,this.setAngle({position:"top"}))),!this.parentPopup&&h<0&&(h=0),BX.adjust(this.popupContainer,{style:{top:h+"px",left:a+"px",zIndex:this.getZindex()}}),this.adjustOverlayZindex()}},BX.PopupWindow.prototype._onResizeWindow=function(t){this.isShown()&&(this.adjustPosition(),null!=this.overlay&&this.resizeOverlay())},BX.PopupWindow.prototype.move=function(t,e){var i=parseInt(this.popupContainer.style.left)+t,n=parseInt(this.popupContainer.style.top)+e;if("object"==typeof this.params.draggable&&this.params.draggable.restrict){!this.parentPopup&&i<0&&(i=0);var o=BX.GetWindowScrollSize(),s=this.popupContainer.offsetWidth,r=this.popupContainer.offsetHeight;i>o.scrollWidth-s&&(i=o.scrollWidth-s),n>o.scrollHeight-r&&(n=o.scrollHeight-r),!this.parentPopup&&n<0&&(n=0)}this.popupContainer.style.left=i+"px",this.popupContainer.style.top=n+"px"},BX.PopupWindow.prototype._startDrag=function(t){return t=t||r.event,BX.fixEventPageXY(t),this.dragPageX=t.pageX,this.dragPageY=t.pageY,this.dragged=!1,BX.bind(document,"mousemove",BX.proxy(this._moveDrag,this)),BX.bind(document,"mouseup",BX.proxy(this._stopDrag,this)),document.body.setCapture&&document.body.setCapture(),document.body.ondrag=BX.False,document.body.onselectstart=BX.False,document.body.style.cursor="move",document.body.style.MozUserSelect="none",this.popupContainer.style.MozUserSelect="none",BX.PreventDefault(t)},BX.PopupWindow.prototype._moveDrag=function(t){t=t||r.event,BX.fixEventPageXY(t),this.dragPageX==t.pageX&&this.dragPageY==t.pageY||(this.move(t.pageX-this.dragPageX,t.pageY-this.dragPageY),this.dragPageX=t.pageX,this.dragPageY=t.pageY,this.dragged||(BX.onCustomEvent(this,"onPopupDragStart"),this.dragged=!0),BX.onCustomEvent(this,"onPopupDrag"))},BX.PopupWindow.prototype._stopDrag=function(t){return document.body.releaseCapture&&document.body.releaseCapture(),BX.unbind(document,"mousemove",BX.proxy(this._moveDrag,this)),BX.unbind(document,"mouseup",BX.proxy(this._stopDrag,this)),document.body.ondrag=null,document.body.onselectstart=null,document.body.style.cursor="",document.body.style.MozUserSelect="",this.popupContainer.style.MozUserSelect="",BX.onCustomEvent(this,"onPopupDragEnd"),this.dragged=!1,BX.PreventDefault(t)},BX.PopupWindow.options={},BX.PopupWindow.defaultOptions={angleLeftOffset:40,positionTopXOffset:-11,angleTopOffset:10,popupZindex:1e3,popupOverlayZindex:1100,angleMinLeft:10,angleMaxLeft:10,angleMinRight:10,angleMaxRight:10,angleMinBottom:23,angleMaxBottom:25,angleMinTop:23,angleMaxTop:25,offsetLeft:0,offsetTop:0},BX.PopupWindow.setOptions=function(t){if(t&&"object"==typeof t)for(var e in t)BX.PopupWindow.options[e]=t[e]},BX.PopupWindow.getOption=function(t,e){return void 0!==BX.PopupWindow.options[t]?BX.PopupWindow.options[t]:void 0!==e?e:BX.PopupWindow.defaultOptions[t]},BX.PopupWindowButton=function(t){for(var e in this.popupWindow=null,this.params=t||{},this.text=this.params.text||"",this.id=this.params.id||"",this.className=this.params.className||"",this.events=this.params.events||{},this.contextEvents={},this.events)this.contextEvents[e]=BX.proxy(this.events[e],this);this.buttonNode=BX.create("span",{props:{className:"popup-window-button"+(0<this.className.length?" "+this.className:""),id:this.id},events:this.contextEvents,text:this.text})},BX.PopupWindowButton.prototype.render=function(){return this.buttonNode},BX.PopupWindowButton.prototype.setName=function(t){this.text=t||"",this.buttonNode&&(BX.cleanNode(this.buttonNode),BX.adjust(this.buttonNode,{text:this.text}))},BX.PopupWindowButton.prototype.setClassName=function(t){this.buttonNode&&(BX.type.isString(this.className)&&""!=this.className&&BX.removeClass(this.buttonNode,this.className),BX.addClass(this.buttonNode,t)),this.className=t},BX.PopupWindowButtonLink=function(t){BX.PopupWindowButtonLink.superclass.constructor.apply(this,arguments),this.buttonNode=BX.create("span",{props:{className:"popup-window-button popup-window-button-link"+(0<this.className.length?" "+this.className:""),id:this.id},text:this.text,events:this.contextEvents})},BX.extend(BX.PopupWindowButtonLink,BX.PopupWindowButton),BX.PopupMenu={Data:{},currentItem:null,show:function(t,e,i,n){null!==this.currentItem&&this.currentItem.popupWindow.close(),this.currentItem=this.create(t,e,i,n),this.currentItem.popupWindow.show()},create:function(t,e,i,n){return this.Data[t]||(this.Data[t]=new BX.PopupMenuWindow(t,e,i,n)),this.Data[t]},getCurrentMenu:function(){return this.currentItem},getMenuById:function(t){return this.Data[t]?this.Data[t]:null},destroy:function(t){var e=this.getMenuById(t);e&&(this.currentItem==e&&(this.currentItem=null),e.popupWindow.destroy(),delete this.Data[t])}},BX.PopupMenuWindow=function(t,e,i,n){if(this.id=t,this.bindElement=e,this.menuItems=[],this.itemsContainer=null,i&&BX.type.isArray(i))for(var o=0;o<i.length;o++)this.__addMenuItem(i[o],null);this.params=n&&"object"==typeof n?n:{},this.popupWindow=this.__createPopup()},BX.PopupMenuWindow.prototype.__createItem=function(t){return t.delimiter?t.layout.item=BX.create("span",{props:{className:"popup-window-delimiter"}}):(t.layout.item=BX.create(t.href?"a":"span",{props:{className:"menu-popup-item"+(BX.type.isNotEmptyString(t.className)?" "+t.className:" menu-popup-no-icon")},attrs:{title:t.title?t.title:"",onclick:t.onclick&&BX.type.isString(t.onclick)?t.onclick:"",target:t.target?t.target:""},events:t.onclick&&BX.type.isFunction(t.onclick)?{click:BX.proxy(this.onItemClick,{obj:this,item:t})}:null,children:[BX.create("span",{props:{className:"menu-popup-item-icon"}}),t.layout.text=BX.create("span",{props:{className:"menu-popup-item-text"},html:t.text})]}),t.href&&(t.layout.item.href=t.href)),t},BX.PopupMenuWindow.prototype.__createPopup=function(){for(var t=[],e=0;e<this.menuItems.length;e++)this.__createItem(this.menuItems[e]),null!=this.menuItems[e].layout.hr&&t.push(this.menuItems[e].layout.hr),t.push(this.menuItems[e].layout.item);var i=new BX.PopupWindow("menu-popup-"+this.id,this.bindElement,{closeByEsc:void 0!==this.params.closeByEsc&&this.params.closeByEsc,bindOptions:"object"==typeof this.params.bindOptions?this.params.bindOptions:{},angle:void 0!==this.params.angle&&this.params.angle,zIndex:this.params.zIndex?this.params.zIndex:0,overlay:"object"==typeof this.params.overlay?this.params.overlay:null,autoHide:void 0===this.params.autoHide||this.params.autoHide,offsetTop:this.params.offsetTop?this.params.offsetTop:1,offsetLeft:this.params.offsetLeft?this.params.offsetLeft:0,noAllPaddings:!0,content:BX.create("div",{props:{className:"menu-popup"},children:[this.itemsContainer=BX.create("div",{props:{className:"menu-popup-items"},children:t})]})});if(this.params&&this.params.events)for(var n in this.params.events)this.params.events.hasOwnProperty(n)&&BX.addCustomEvent(i,n,this.params.events[n]);return i},BX.PopupMenuWindow.prototype.onItemClick=function(t){t=t||r.event,this.item.onclick.call(this.obj,t,this.item)},BX.PopupMenuWindow.prototype.addMenuItem=function(t,e){if(this.__addMenuItem(t,e)<0)return!1;this.__createItem(t);var i=this.getMenuItem(e);return null!=i?(null==i.layout.hr&&(i.layout.hr=BX.create("div",{props:{className:"popup-window-hr"},children:[BX.create("i",{})]}),this.itemsContainer.insertBefore(i.layout.hr,i.layout.item)),null!=t.layout.hr&&this.itemsContainer.insertBefore(t.layout.hr,i.layout.hr),this.itemsContainer.insertBefore(t.layout.item,i.layout.hr)):(null!=t.layout.hr&&this.itemsContainer.appendChild(t.layout.hr),this.itemsContainer.appendChild(t.layout.item)),!0},BX.PopupMenuWindow.prototype.__addMenuItem=function(t,e){if(!t||!t.delimiter&&!BX.type.isNotEmptyString(t.text)||t.id&&null!=this.getMenuItem(t.id))return-1;t.layout={item:null,text:null,hr:null};var i=this.getMenuItemPosition(e);return 0<=i?this.menuItems=BX.util.insertIntoArray(this.menuItems,i,t):(this.menuItems.push(t),i=this.menuItems.length-1),i},BX.PopupMenuWindow.prototype.removeMenuItem=function(t){var e=this.getMenuItem(t);if(e){for(var i=0;i<this.menuItems.length;i++)if(this.menuItems[i]==e){this.menuItems=BX.util.deleteFromArray(this.menuItems,i);break}0==i?this.menuItems[0]&&(this.menuItems[0].layout.hr.parentNode.removeChild(this.menuItems[0].layout.hr),this.menuItems[0].layout.hr=null):e.layout.hr.parentNode.removeChild(e.layout.hr),e.layout.item.parentNode.removeChild(e.layout.item),e.layout.item=null}},BX.PopupMenuWindow.prototype.getMenuItem=function(t){for(var e=0;e<this.menuItems.length;e++)if(this.menuItems[e].id&&this.menuItems[e].id==t)return this.menuItems[e];return null},BX.PopupMenuWindow.prototype.getMenuItemPosition=function(t){if(t)for(var e=0;e<this.menuItems.length;e++)if(this.menuItems[e].id&&this.menuItems[e].id==t)return e;return-1},r.BXInputPopup=function(t){this.id=t.id||"bx-inp-popup-"+Math.round(1e6*Math.random()),this.handler=t.handler||!1,this.values=t.values||!1,this.pInput=t.input,this.bValues=!!this.values,this.defaultValue=t.defaultValue||"",this.openTitle=t.openTitle||"",this.className=t.className||"",this.noMRclassName=t.noMRclassName||"ec-no-rm",this.emptyClassName=t.noMRclassName||"ec-label";var e=this;this.curInd=!1,this.bValues?(this.pInput.onfocus=this.pInput.onclick=function(t){return this.value==e.defaultValue&&(this.value="",this.className=e.className),e.ShowPopup(),BX.PreventDefault(t)},this.pInput.onblur=function(){e.bShowed&&setTimeout(function(){e.ClosePopup(!0)},200),e.OnChange()}):(this.pInput.className=this.noMRclassName,this.pInput.onblur=BX.proxy(this.OnChange,this))},BXInputPopup.prototype={ShowPopup:function(){if(!this.bShowed){var e=this;if(!this.oPopup){for(var t,i=BX.create("DIV",{props:{className:"bxecpl-loc-popup "+this.className}}),n=0,o=this.values.length;n<o;n++)t=i.appendChild(BX.create("DIV",{props:{id:"bxecmr_"+n},text:this.values[n].NAME,events:{mouseover:function(){BX.addClass(this,"bxecplloc-over")},mouseout:function(){BX.removeClass(this,"bxecplloc-over")},click:function(){var t=this.id.substr("bxecmr_".length);e.pInput.value=e.values[t].NAME,e.curInd=t,e.OnChange(),e.ClosePopup(!0)}}})),this.values[n].DESCRIPTION&&(t.title=this.values[n].DESCRIPTION),this.values[n].CLASS_NAME&&BX.addClass(t,this.values[n].CLASS_NAME),this.values[n].URL&&t.appendChild(BX.create("A",{props:{href:this.values[n].URL,className:"bxecplloc-view",target:"_blank",title:this.openTitle}}));this.oPopup=new BX.PopupWindow(this.id,this.pInput,{autoHide:!0,offsetTop:1,offsetLeft:0,lightShadow:!0,closeByEsc:!0,content:i}),BX.addCustomEvent(this.oPopup,"onPopupClose",BX.proxy(this.ClosePopup,this))}this.oPopup.show(),this.pInput.select(),this.bShowed=!0,BX.onCustomEvent(this,"onInputPopupShow",[this])}},ClosePopup:function(t){this.bShowed=!1,""==this.pInput.value&&this.OnChange(),BX.onCustomEvent(this,"onInputPopupClose",[this]),!0===t&&this.oPopup.close()},OnChange:function(){var t=this.pInput.value;this.bValues&&(""==this.pInput.value||this.pInput.value==this.defaultValue?(this.pInput.value=this.defaultValue,this.pInput.className=this.emptyClassName,t=""):this.pInput.className=""),isNaN(parseInt(this.curInd))||!1!==this.curInd&&t!=this.values[this.curInd].NAME?this.curInd=!1:this.curInd=parseInt(this.curInd),BX.onCustomEvent(this,"onInputPopupChanged",[this,this.curInd,t]),this.handler&&"function"==typeof this.handler&&this.handler({ind:this.curInd,value:t})},Set:function(t,e,i){this.curInd=t,!1!==this.curInd?this.pInput.value=this.values[this.curInd].NAME:this.pInput.value=e,!1!==i&&this.OnChange()},Get:function(t){var e=!1;return void 0===t&&(t=this.curInd),!1!==t&&this.values[t]&&(e=this.values[t].ID),e},GetIndex:function(t){for(var e=0,i=this.values.length;e<i;e++)if(this.values[e].ID==t)return e;return!1},Deactivate:function(t){""!=this.pInput.value&&this.pInput.value!=this.defaultValue||(t?(this.pInput.value="",this.pInput.className=this.noMRclassName):this.oEC.bUseMR&&(this.pInput.value=this.defaultValue,this.pInput.className=this.emptyClassName)),this.pInput.disabled=t}};var n=-1,o=null}function s(t,e){if(!1===t){if(o&&0<o.length){for(var i=0;i<o.length;i++)o[i]();o=null,n=-1}}else null===o&&(o=[],n=-1,BX.defer(s)(!1)),n<t?(n=t,o=[e]):t==n&&o.push(e)}}(window);var bxSession=new CBXSession,phpVars;!function(window){BX.WindowManager||(BX.WindowManager={_stack:[],_runtime_resize:{},_delta:2,_delta_start:1e3,currently_loaded:null,settings_category:"BX.WindowManager.9.5",register:function(t){this.currently_loaded=null,t.Get().style.zIndex=t.zIndex=this.GetZIndex(),t.WM_REG_INDEX=this._stack.length,this._stack.push(t),this._stack.length<2&&BX.bind(document,"keyup",BX.proxy(this.__checkKeyPress,this))},unregister:function(t){if(null==t.WM_REG_INDEX)return null;var e;if(0<this._stack.length){for(;(e=this.__pop_stack())!=t;)if(!e){e=null;break}return this._stack.length<=0&&this.enableKeyCheck(),e}return null},__pop_stack:function(t){if(0<this._stack.length){var e=this._stack.pop();return e.WM_REG_INDEX=null,BX.onCustomEvent(e,"onWindowUnRegister",[!0===t]),e}return null},clean:function(){for(;this.__pop_stack(!0););this._stack=null,this.disableKeyCheck()},Get:function(){return this.currently_loaded?this.currently_loaded:0<this._stack.length?this._stack[this._stack.length-1]:null},setStartZIndex:function(t){this._delta_start=t},restoreStartZIndex:function(){this._delta_start=1e3},GetZIndex:function(){var t;return null!=(t=this._stack[this._stack.length-1])?parseInt(t.Get().style.zIndex)+this._delta:this._delta_start},__get_check_url:function(t){var e=t.indexOf("?");return-1==e?t:t.substring(0,e)},saveWindowSize:function(t,e){var i=this.__get_check_url(t);BX.userOptions&&(BX.userOptions.save(this.settings_category,"size_"+i,"width",e.width),BX.userOptions.save(this.settings_category,"size_"+i,"height",e.height)),this._runtime_resize[i]=e},saveWindowOptions:function(t,e){if(BX.userOptions)for(var i in e)e.hasOwnProperty(i)&&BX.userOptions.save(this.settings_category,"options_"+t,i,e[i])},getRuntimeWindowSize:function(t){return this._runtime_resize[this.__get_check_url(t)]},disableKeyCheck:function(){BX.unbind(document,"keyup",BX.proxy(this.__checkKeyPress,this))},enableKeyCheck:function(){BX.bind(document,"keyup",BX.proxy(this.__checkKeyPress,this))},__checkKeyPress:function(t){if(null==t&&(t=window.event),27==t.keyCode){var e=BX.WindowManager.Get();e&&!e.unclosable&&e.Close()}}},BX.garbage(BX.WindowManager.clean,BX.WindowManager),BX.CWindowButton=function(t){t.btn?(this.btn=t.btn,this.parentWindow=t.parentWindow,/save|apply/i.test(this.btn.name)&&BX.bind(this.btn,"click",BX.delegate(this.disableUntilError,this))):(this.title=t.title,this.hint=t.hint,this.id=t.id,this.name=t.name,this.className=t.className,this.action=t.action,this.onclick=t.onclick,t.Button&&BX.type.isFunction(t.Button)&&(this.Button=t.Button),this.btn=null)},BX.CWindowButton.prototype.disable=function(){this.btn&&this.parentWindow.showWait(this.btn)},BX.CWindowButton.prototype.enable=function(){this.btn&&this.parentWindow.closeWait(this.btn)},BX.CWindowButton.prototype.emulate=function(){if(!this.btn||!this.btn.disabled){var t=this.action?BX.delegate(this.action,this):this.onclick?this.onclick:this.btn?this.btn.getAttribute("onclick"):"";t&&(setTimeout(t,50),this.btn&&/save|apply/i.test(this.btn.name)&&!this.action&&this.disableUntilError())}},BX.CWindowButton.prototype.Button=function(parentWindow){this.parentWindow=parentWindow;var btn={props:{type:"button",name:this.id?this.id:this.name,value:this.title?this.title:this.name,id:this.id}};return this.hint&&(btn.props.title=this.hint),this.className&&(btn.props.className=this.className),this.action?btn.events={click:BX.delegate(this.action,this)}:this.onclick&&(BX.browser.IsIE()?btn.events={click:BX.delegate(function(){eval(this.onclick)},this)}:btn.attrs={onclick:this.onclick}),this.btn=BX.create("INPUT",btn),this.btn},BX.CWindowButton.prototype.disableUntilError=function(){this.disable(),this.__window_error_handler_set||(BX.addCustomEvent(this.parentWindow,"onWindowError",BX.delegate(this.enable,this)),this.__window_error_handler_set=!0)},BX.CWindow=function(t,e){this.DIV=t||document.createElement("DIV"),this.SETTINGS={resizable:!1,min_height:0,min_width:0,top:0,left:0,draggable:!1,drag_restrict:!0,resize_restrict:!0},this.ELEMENTS={draggable:[],resizer:[],close:[]},this.type="float"==e?"float":"dialog",BX.adjust(this.DIV,{props:{className:"bx-core-window"},style:{zIndex:0,position:"absolute",display:"none",top:this.SETTINGS.top+"px",left:this.SETTINGS.left+"px",height:"100px",width:"100px"}}),this.isOpen=!1,BX.addCustomEvent(this,"onWindowRegister",BX.delegate(this.onRegister,this)),BX.addCustomEvent(this,"onWindowUnRegister",BX.delegate(this.onUnRegister,this)),this.MOUSEOVER=null,BX.bind(this.DIV,"mouseover",BX.delegate(this.__set_msover,this)),BX.bind(this.DIV,"mouseout",BX.delegate(this.__unset_msover,this)),BX.ready(BX.delegate(function(){document.body.appendChild(this.DIV)},this))},BX.CWindow.prototype.Get=function(){return this.DIV},BX.CWindow.prototype.visible=function(){return this.isOpen},BX.CWindow.prototype.Show=function(t){this.DIV.style.display="block",t||(BX.WindowManager.register(this),BX.onCustomEvent(this,"onWindowRegister"))},BX.CWindow.prototype.Hide=function(){BX.WindowManager.unregister(this),this.DIV.style.display="none"},BX.CWindow.prototype.onRegister=function(){this.isOpen=!0},BX.CWindow.prototype.onUnRegister=function(t){this.isOpen=!1,t||this.PARAMS&&this.PARAMS.content_url?(t&&BX.onCustomEvent(this,"onWindowClose",[this,!0]),this.DIV.parentNode&&this.DIV.parentNode.removeChild(this.DIV)):this.DIV.style.display="none"},BX.CWindow.prototype.CloseDialog=BX.CWindow.prototype.Close=function(t){if(BX.onCustomEvent(this,"onBeforeWindowClose",[this]),!0!==t&&this.denyClose)return!1;if(BX.onCustomEvent(this,"onWindowClose",[this]),this.bExpanded){var e=BX.GetDocElement();BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this)),e.style.overflow=this.__expand_settings.overflow}return BX.WindowManager.unregister(this),!0},BX.CWindow.prototype.SetResize=function(t){t.style.cursor="se-resize",BX.bind(t,"mousedown",BX.proxy(this.__startResize,this)),this.ELEMENTS.resizer.push(t),this.SETTINGS.resizable=!0},BX.CWindow.prototype.SetExpand=function(t,e){e=e||"click",BX.bind(t,e,BX.proxy(this.__expand,this))},BX.CWindow.prototype.__expand_onresize=function(){var t=BX.GetWindowInnerSize();this.DIV.style.width=t.innerWidth+"px",this.DIV.style.height=t.innerHeight+"px",BX.onCustomEvent(this,"onWindowResize")},BX.CWindow.prototype.__expand=function(){var t=BX.GetDocElement();if(this.bExpanded)BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this)),this.SETTINGS.resizable=this.__expand_settings.resizable,this.SETTINGS.draggable=this.__expand_settings.draggable,t.style.overflow=this.__expand_settings.overflow,this.DIV.style.top=this.__expand_settings.top,this.DIV.style.left=this.__expand_settings.left,this.DIV.style.width=this.__expand_settings.width,this.DIV.style.height=this.__expand_settings.height,window.scrollTo(this.__expand_settings.scrollLeft,this.__expand_settings.scrollTop),this.bExpanded=!1,BX.onCustomEvent(this,"onWindowNarrow"),BX.onCustomEvent(this,"onWindowResize");else{var e=BX.GetWindowScrollPos(),i=BX.GetWindowInnerSize();this.__expand_settings={resizable:this.SETTINGS.resizable,draggable:this.SETTINGS.draggable,width:this.DIV.style.width,height:this.DIV.style.height,left:this.DIV.style.left,top:this.DIV.style.top,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,overflow:BX.style(t,"overflow")},this.SETTINGS.resizable=!1,this.SETTINGS.draggable=!1,window.scrollTo(0,0),t.style.overflow="hidden",this.DIV.style.top="0px",this.DIV.style.left="0px",this.DIV.style.width=i.innerWidth+"px",this.DIV.style.height=i.innerHeight+"px",this.bExpanded=!0,BX.onCustomEvent(this,"onWindowExpand"),BX.onCustomEvent(this,"onWindowResize"),BX.bind(window,"resize",BX.proxy(this.__expand_onresize,this))}},BX.CWindow.prototype.Resize=function(t,e){var i=Math.max(t-this.pos.left+this.dx,this.SETTINGS.min_width),n=Math.max(e-this.pos.top+this.dy,this.SETTINGS.min_height);if(this.SETTINGS.resize_restrict){var o=BX.GetWindowScrollSize();this.pos.left+i>o.scrollWidth-this.dw&&(i=o.scrollWidth-this.pos.left-this.dw)}this.DIV.style.width=i+"px",this.DIV.style.height=n+"px",BX.onCustomEvent(this,"onWindowResize")},BX.CWindow.prototype.__startResize=function(t){if(!this.SETTINGS.resizable)return!1;t||(t=window.event),this.wndSize=BX.GetWindowScrollPos(),this.wndSize.innerWidth=BX.GetWindowInnerSize().innerWidth,this.pos=BX.pos(this.DIV),this.x=t.clientX+this.wndSize.scrollLeft,this.y=t.clientY+this.wndSize.scrollTop,this.dx=this.pos.left+this.pos.width-this.x,this.dy=this.pos.top+this.pos.height-this.y,this.dw=this.pos.width-parseInt(this.DIV.style.width),BX.bind(document,"mousemove",BX.proxy(this.__moveResize,this)),BX.bind(document,"mouseup",BX.proxy(this.__stopResize,this)),document.body.setCapture&&document.body.setCapture(),document.onmousedown=BX.False;var e=document.body;return e.ondrag=e.onselectstart=BX.False,e.style.MozUserSelect=this.DIV.style.MozUserSelect="none",e.style.cursor="se-resize",BX.onCustomEvent(this,"onWindowResizeStart"),!0},BX.CWindow.prototype.__moveResize=function(t){t||(t=window.event);var e=BX.GetWindowScrollPos(),i=t.clientX+e.scrollLeft,n=t.clientY+e.scrollTop;this.x==i&&this.y==n||(this.Resize(i,n),this.x=i,this.y=n)},BX.CWindow.prototype.__stopResize=function(){document.body.releaseCapture&&document.body.releaseCapture(),BX.unbind(document,"mousemove",BX.proxy(this.__moveResize,this)),BX.unbind(document,"mouseup",BX.proxy(this.__stopResize,this)),document.onmousedown=null;var t=document.body;t.ondrag=t.onselectstart=null,t.style.MozUserSelect=this.DIV.style.MozUserSelect="",t.style.cursor="",BX.onCustomEvent(this,"onWindowResizeFinished")},BX.CWindow.prototype.SetClose=function(t){BX.bind(t,"click",BX.proxy(this.Close,this)),this.ELEMENTS.close.push(t)},BX.CWindow.prototype.SetDraggable=function(t){BX.bind(t,"mousedown",BX.proxy(this.__startDrag,this)),t.style.cursor="move",this.ELEMENTS.draggable.push(t),this.SETTINGS.draggable=!0},BX.CWindow.prototype.Move=function(t,e){var i=parseInt(this.DIV.style.left)+t,n=parseInt(this.DIV.style.top)+e;if(this.SETTINGS.drag_restrict){i<0&&(i=0);var o=BX.GetWindowScrollSize(),s=this.DIV.offsetWidth,r=this.DIV.offsetHeight;i>o.scrollWidth-s-1&&(i=o.scrollWidth-s-1),n>o.scrollHeight-r-1&&(n=o.scrollHeight-r-1),n<0&&(n=0)}this.DIV.style.left=i+"px",this.DIV.style.top=n+"px"},BX.CWindow.prototype.__startDrag=function(t){if(!this.SETTINGS.draggable)return!1;t||(t=window.event),this.x=t.clientX+document.body.scrollLeft,this.y=t.clientY+document.body.scrollTop,this.__bWasDragged=!1,BX.bind(document,"mousemove",BX.proxy(this.__moveDrag,this)),BX.bind(document,"mouseup",BX.proxy(this.__stopDrag,this)),document.body.setCapture&&document.body.setCapture(),document.onmousedown=BX.False;var e=document.body;return e.ondrag=e.onselectstart=BX.False,e.style.MozUserSelect=this.DIV.style.MozUserSelect="none",e.style.cursor="move",BX.PreventDefault(t)},BX.CWindow.prototype.__moveDrag=function(t){t||(t=window.event);var e=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop;this.x==e&&this.y==i||(this.Move(e-this.x,i-this.y),this.x=e,this.y=i,this.__bWasDragged||(BX.onCustomEvent(this,"onWindowDragStart"),this.__bWasDragged=!0,BX.bind(BX.proxy_context,"click",BX.PreventDefault)),BX.onCustomEvent(this,"onWindowDrag"))},BX.CWindow.prototype.__stopDrag=function(t){document.body.releaseCapture&&document.body.releaseCapture(),BX.unbind(document,"mousemove",BX.proxy(this.__moveDrag,this)),BX.unbind(document,"mouseup",BX.proxy(this.__stopDrag,this)),document.onmousedown=null;var e=document.body;if(e.ondrag=e.onselectstart=null,e.style.MozUserSelect=this.DIV.style.MozUserSelect="",e.style.cursor="",this.__bWasDragged){BX.onCustomEvent(this,"onWindowDragFinished");var i=BX.proxy_context;setTimeout(function(){BX.unbind(i,"click",BX.PreventDefault)},100),this.__bWasDragged=!1}return BX.PreventDefault(t)},BX.CWindow.prototype.DenyClose=function(){this.denyClose=!0},BX.CWindow.prototype.AllowClose=function(){this.denyClose=!1},BX.CWindow.prototype.ShowError=function(t){BX.onCustomEvent(this,"onWindowError",[t]),this._wait&&BX.closeWait(this._wait),window.alert(t)},BX.CWindow.prototype.__set_msover=function(){this.MOUSEOVER=!0},BX.CWindow.prototype.__unset_msover=function(){this.MOUSEOVER=!1},BX.CWindowDialog=function(){var t=arguments;t[1]="dialog",BX.CWindowDialog.superclass.constructor.apply(this,t),this.DIV.style.top="10px",this.OVERLAY=null},BX.extend(BX.CWindowDialog,BX.CWindow),BX.CWindowDialog.prototype.__resizeOverlay=function(){var t=BX.GetWindowScrollSize();this.OVERLAY.style.width=t.scrollWidth+"px"},BX.CWindowDialog.prototype.CreateOverlay=function(t){if(null==this.OVERLAY){var e=BX.GetWindowScrollSize();this.OVERLAY=document.body.appendChild(BX.create("DIV",{style:{position:"absolute",top:"0px",left:"0px",zIndex:t||parseInt(this.DIV.style.zIndex)-2,width:e.scrollWidth+"px",height:e.scrollHeight+"px"}}))}return this.OVERLAY},BX.CWindowDialog.prototype.Show=function(){BX.CWindowDialog.superclass.Show.apply(this,arguments),this.CreateOverlay(),this.OVERLAY.style.display="block",this.OVERLAY.style.zIndex=parseInt(this.DIV.style.zIndex)-2,BX.unbind(window,"resize",BX.proxy(this.__resizeOverlay,this)),BX.bind(window,"resize",BX.proxy(this.__resizeOverlay,this))},BX.CWindowDialog.prototype.onUnRegister=function(t){BX.CWindowDialog.superclass.onUnRegister.apply(this,arguments),this.clean?this.OVERLAY.parentNode&&this.OVERLAY.parentNode.removeChild(this.OVERLAY):this.OVERLAY.style.display="none",BX.unbind(window,"resize",BX.proxy(this.__resizeOverlay,this))},BX.CDialog=function(t){for(var e in BX.CDialog.superclass.constructor.apply(this),this._sender="core_window_cdialog",this.PARAMS=t||{},this.defaultParams)void 0===this.PARAMS[e]&&(this.PARAMS[e]=this.defaultParams[e]);if(this.PARAMS.width=isNaN(parseInt(this.PARAMS.width))?this.defaultParams.width:this.PARAMS.width,this.PARAMS.height=isNaN(parseInt(this.PARAMS.height))?this.defaultParams.height:this.PARAMS.height,this.PARAMS.resize_id||this.PARAMS.content_url){var i=BX.WindowManager.getRuntimeWindowSize(this.PARAMS.resize_id||this.PARAMS.content_url);i&&(this.PARAMS.width=i.width,this.PARAMS.height=i.height)}BX.addClass(this.DIV,"bx-core-adm-dialog"),this.DIV.id="bx-admin-prefix",this.PARTS={},this.DIV.style.height=null,this.DIV.style.width=null,this.PARTS.TITLEBAR=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head"}})),this.PARTS.TITLE_CONTAINER=this.PARTS.TITLEBAR.appendChild(BX.create("SPAN",{props:{className:"bx-core-adm-dialog-head-inner"},text:this.PARAMS.title})),this.PARTS.TITLEBAR_ICONS=this.PARTS.TITLEBAR.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head-icons"},children:this.PARAMS.resizable?[BX.create("SPAN",{props:{className:"bx-core-adm-icon-expand",title:BX.message("JS_CORE_WINDOW_EXPAND")}}),BX.create("SPAN",{props:{className:"bx-core-adm-icon-close",title:BX.message("JS_CORE_WINDOW_CLOSE")}})]:[BX.create("SPAN",{props:{className:"bx-core-adm-icon-close",title:BX.message("JS_CORE_WINDOW_CLOSE")}})]})),this.PARTS.CONTENT=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-content-wrap adm-workarea"}})),this.PARTS.CONTENT_DATA=this.PARTS.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-content"},style:{height:this.PARAMS.height+"px",width:this.PARAMS.width+"px"}})),this.PARTS.HEAD=this.PARTS.CONTENT_DATA.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-head-block"+(this.PARAMS.icon?" "+this.PARAMS.icon:"")}})),this.SetHead(this.PARAMS.head),this.SetContent(this.PARAMS.content),this.SetTitle(this.PARAMS.title),this.SetClose(this.PARTS.TITLEBAR_ICONS.lastChild),this.PARAMS.resizable&&(this.SetExpand(this.PARTS.TITLEBAR_ICONS.firstChild),this.SetExpand(this.PARTS.TITLEBAR,"dblclick"),BX.addCustomEvent(this,"onWindowExpand",BX.proxy(this.__onexpand,this)),BX.addCustomEvent(this,"onWindowNarrow",BX.proxy(this.__onexpand,this))),this.PARTS.FOOT=this.PARTS.BUTTONS_CONTAINER=this.PARTS.CONTENT.appendChild(BX.create("DIV",{props:{className:"bx-core-adm-dialog-buttons"},children:this.ShowButtons()})),this.PARAMS.draggable&&this.SetDraggable(this.PARTS.TITLEBAR),this.PARAMS.resizable&&(this.PARTS.RESIZER=this.DIV.appendChild(BX.create("DIV",{props:{className:"bx-core-resizer"}})),this.SetResize(this.PARTS.RESIZER),this.SETTINGS.min_width=this.PARAMS.min_width,this.SETTINGS.min_height=this.PARAMS.min_height),this.auth_callback=BX.delegate(function(){this.PARAMS.content="",this.hideNotify(),this.Show()},this)},BX.extend(BX.CDialog,BX.CWindowDialog),BX.CDialog.prototype.defaultParams={width:700,height:400,min_width:500,min_height:300,resizable:!0,draggable:!0,title:"",icon:""},BX.CDialog.prototype.showWait=function(t){if(!BX.type.isElementNode(t)||"button"!=t.type&&"submit"!=t.type)return null;BX.defer(function(){t.disabled=!0})();var e=BX.hasClass(t,"adm-btn-save")||BX.hasClass(t,"adm-btn-save"),i=BX.pos(t,!0);return t.bxwaiter=this.PARTS.FOOT.appendChild(BX.create("DIV",{props:{className:"adm-btn-load-img"+(e?"-green":"")},style:{top:parseInt((i.bottom+i.top)/2-10)+"px",left:parseInt((i.right+i.left)/2-10)+"px"}})),BX.addClass(t,"adm-btn-load"),(this.lastWaitElement=t).bxwaiter},BX.CDialog.prototype.closeWait=function(t){t=t||this.lastWaitElement,BX.type.isElementNode(t)&&(t.bxwaiter&&(t.bxwaiter.parentNode&&t.bxwaiter.parentNode.removeChild(t.bxwaiter),t.bxwaiter=null),t.disabled=!1,BX.removeClass(t,"adm-btn-load"),this.lastWaitElement==t&&(this.lastWaitElement=null))},BX.CDialog.prototype.Authorize=function(t){this.bSkipReplaceContent=!0,this.ShowError(BX.message("JSADM_AUTH_REQ")),BX.onCustomEvent(this,"onWindowError",[]),BX.closeWait(),new BX.CAuthDialog({content_url:this.PARAMS.content_url,auth_result:t,callback:BX.delegate(function(){this.auth_callback&&this.auth_callback()},this)}).Show()},BX.CDialog.prototype.ShowError=function(t){BX.onCustomEvent(this,"onWindowError",[t]),this.closeWait(),this._wait&&BX.closeWait(this._wait),this.Notify(t,!0)},BX.CDialog.prototype.__expandGetSize=function(){var t=BX.GetDocElement();t.style.overflow="hidden";var e=BX.GetWindowInnerSize();return t.scrollTop=0,this.DIV.style.top="-"+this.dxShadow+"px",this.DIV.style.left="-"+this.dxShadow+"px",{width:e.innerWidth-parseInt(BX.style(this.PARTS.CONTENT,"padding-right"))-parseInt(BX.style(this.PARTS.CONTENT,"padding-left"))+this.dxShadow,height:e.innerHeight-this.PARTS.TITLEBAR.offsetHeight-this.PARTS.FOOT.offsetHeight-parseInt(BX.style(this.PARTS.CONTENT,"padding-top"))-parseInt(BX.style(this.PARTS.CONTENT,"padding-bottom"))+this.dxShadow}},BX.CDialog.prototype.__expand=function(){var t=BX.GetDocElement();if(this.dxShadow=2,this.bExpanded)BX.unbind(window,"resize",BX.proxy(this.__expand_onresize,this)),this.SETTINGS.resizable=this.__expand_settings.resizable,this.SETTINGS.draggable=this.__expand_settings.draggable,t.style.overflow=this.__expand_settings.overflow,this.DIV.style.top=this.__expand_settings.top,this.DIV.style.left=this.__expand_settings.left,this.PARTS.CONTENT_DATA.style.width=this.__expand_settings.width,this.PARTS.CONTENT_DATA.style.height=this.__expand_settings.height,window.scrollTo(this.__expand_settings.scrollLeft,this.__expand_settings.scrollTop),this.bExpanded=!1,BX.onCustomEvent(this,"onWindowNarrow"),BX.onCustomEvent(this,"onWindowResize"),BX.onCustomEvent(this,"onWindowResizeExt",[{width:parseInt(this.__expand_settings.width),height:parseInt(this.__expand_settings.height)}]);else{var e=BX.GetWindowScrollPos();this.__expand_settings={resizable:this.SETTINGS.resizable,draggable:this.SETTINGS.draggable,width:this.PARTS.CONTENT_DATA.style.width,height:this.PARTS.CONTENT_DATA.style.height,left:this.DIV.style.left,top:this.DIV.style.top,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,overflow:BX.style(t,"overflow")},this.SETTINGS.resizable=!1,this.SETTINGS.draggable=!1;var i=this.__expandGetSize();this.PARTS.CONTENT_DATA.style.width=i.width+"px",this.PARTS.CONTENT_DATA.style.height=i.height+"px",window.scrollTo(0,0),t.style.overflow="hidden",this.bExpanded=!0,BX.onCustomEvent(this,"onWindowExpand"),BX.onCustomEvent(this,"onWindowResize"),BX.onCustomEvent(this,"onWindowResizeExt",[{width:i.width,height:i.height}]),BX.bind(window,"resize",BX.proxy(this.__expand_onresize,this))}},BX.CDialog.prototype.__expand_onresize=function(){var t=this.__expandGetSize();this.PARTS.CONTENT_DATA.style.width=t.width+"px",this.PARTS.CONTENT_DATA.style.height=t.height+"px",BX.onCustomEvent(this,"onWindowResize"),BX.onCustomEvent(this,"onWindowResizeExt",[t])},BX.CDialog.prototype.__onexpand=function(){var t=this.PARTS.TITLEBAR_ICONS.firstChild;t.className=BX.toggle(t.className,["bx-core-adm-icon-expand","bx-core-adm-icon-narrow"]),t.title=BX.toggle(t.title,[BX.message("JS_CORE_WINDOW_EXPAND"),BX.message("JS_CORE_WINDOW_NARROW")]),this.PARTS.RESIZER&&(this.PARTS.RESIZER.style.display=this.bExpanded?"none":"block")},BX.CDialog.prototype.__startResize=function(t){if(!this.SETTINGS.resizable)return!1;t||(t=window.event),this.wndSize=BX.GetWindowScrollPos(),this.wndSize.innerWidth=BX.GetWindowInnerSize().innerWidth,this.pos=BX.pos(this.PARTS.CONTENT_DATA),this.x=t.clientX+this.wndSize.scrollLeft,this.y=t.clientY+this.wndSize.scrollTop,this.dx=this.pos.left+this.pos.width-this.x,this.dy=this.pos.top+this.pos.height-this.y,this.dw=this.pos.width-parseInt(this.PARTS.CONTENT_DATA.style.width)+parseInt(BX.style(this.PARTS.CONTENT,"padding-right")),BX.bind(document,"mousemove",BX.proxy(this.__moveResize,this)),BX.bind(document,"mouseup",BX.proxy(this.__stopResize,this)),document.body.setCapture&&document.body.setCapture(),document.onmousedown=BX.False;var e=document.body;return e.ondrag=e.onselectstart=BX.False,e.style.MozUserSelect=this.DIV.style.MozUserSelect="none",e.style.cursor="se-resize",BX.onCustomEvent(this,"onWindowResizeStart"),!0},BX.CDialog.prototype.Resize=function(t,e){var i=Math.max(t-this.pos.left+this.dx,this.SETTINGS.min_width),n=Math.max(e-this.pos.top+this.dy,this.SETTINGS.min_height);if(this.SETTINGS.resize_restrict){var o=BX.GetWindowScrollSize();this.pos.left+i>o.scrollWidth-this.dw&&(i=o.scrollWidth-this.pos.left-this.dw)}this.PARTS.CONTENT_DATA.style.width=i+"px",this.PARTS.CONTENT_DATA.style.height=n+"px",BX.onCustomEvent(this,"onWindowResize"),BX.onCustomEvent(this,"onWindowResizeExt",[{height:n,width:i}])},BX.CDialog.prototype.SetSize=function(t){this.PARTS.CONTENT_DATA.style.width=t.width+"px",this.PARTS.CONTENT_DATA.style.height=t.height+"px",BX.onCustomEvent(this,"onWindowResize"),BX.onCustomEvent(this,"onWindowResizeExt",[t])},BX.CDialog.prototype.GetParameters=function(t){var e=this.GetForm();if(!e)return"";var i,n="",o=e.elements.length,s="";for(i=0;i<o;i++){""!=n&&(s="&");var r=e.elements[i];if(!r.disabled)switch(r.type.toLowerCase()){case"text":case"textarea":case"password":case"hidden":if(null==t&&"_alt"==r.name.substr(r.name.length-4)&&e.elements[r.name.substr(0,r.name.length-4)])break;n+=s+r.name+"="+BX.util.urlencode(r.value);break;case"radio":r.checked&&(n+=s+r.name+"="+BX.util.urlencode(r.value));break;case"checkbox":n+=s+r.name+"="+BX.util.urlencode(r.checked?"Y":"N");break;case"select-one":var a="";a=null==t&&e.elements[r.name+"_alt"]&&0==r.selectedIndex?e.elements[r.name+"_alt"].value:r.value,n+=s+r.name+"="+BX.util.urlencode(a);break;case"select-multiple":var l,h=!1,p=r.options.length;for(l=0;l<p;l++)r.options[l].selected&&(n+=s+r.name+"="+BX.util.urlencode(r.options[l].value),h=!0);h||(n+=s+r.name+"=")}}return n},BX.CDialog.prototype.PostParameters=function(t){var e=this.PARAMS.content_url;null==t&&(t=""),t+=(""==t?"":"&")+"bxsender="+this._sender;var i=e.indexOf("?");-1==i?e+="?"+t:e=e.substring(0,i)+"?"+t+"&"+e.substring(i+1),BX.showWait(),this.auth_callback=BX.delegate(function(){this.hideNotify(),this.PostParameters(t)},this),BX.ajax.Setup({skipAuthCheck:!0},!0),BX.ajax.post(e,this.GetParameters(),BX.delegate(function(t){BX.closeWait(),this.bSkipReplaceContent||(this.ClearButtons(),this.SetContent(t),this.Show(!0)),this.bSkipReplaceContent=!1},this))},BX.CDialog.prototype.Submit=function(t,e){var i=this.GetForm();if(i){if(i.onsubmit=null,i.method="POST",!i.action||e){if(e=e||this.PARAMS.content_url,null!=t){var n=e.indexOf("?");-1==n?e+="?"+t:e=e.substring(0,n)+"?"+t+"&"+e.substring(n+1)}i.action=e}i._bxsender||(i._bxsender=i.appendChild(BX.create("INPUT",{attrs:{type:"hidden",name:"bxsender",value:this._sender}}))),this._wait=BX.showWait(),this.auth_callback=BX.delegate(function(){this.hideNotify(),this.Submit(t)},this),BX.ajax.submit(i,BX.delegate(function(){this.closeWait()},this))}else window.alert("no form registered!")},BX.CDialog.prototype.GetForm=function(){if(null==this.__form){var t=this.PARTS.CONTENT_DATA.getElementsByTagName("FORM");this.__form=t[0]?t[0]:null}return this.__form},BX.CDialog.prototype.GetRealForm=function(){if(null==this.__rform){var t=this.PARTS.CONTENT_DATA.getElementsByTagName("FORM");this.__rform=t[1]?t[1]:t[0]?t[0]:null}return this.__rform},BX.CDialog.prototype._checkButton=function(t){for(var e=["btnSave","btnCancel","btnClose"],i=0;i<e.length;i++)if(this[e[i]]&&t==this[e[i]])return e[i];return!1},BX.CDialog.prototype.ShowButtons=function(){var t=[];if(this.PARAMS.buttons){this.PARAMS.buttons.title&&(this.PARAMS.buttons=[this.PARAMS.buttons]);for(var e=0,i=this.PARAMS.buttons.length;e<i;e++)if(BX.type.isNotEmptyString(this.PARAMS.buttons[e]))t.push(this.PARAMS.buttons[e]);else if(BX.type.isElementNode(this.PARAMS.buttons[e]))t.push(this.PARAMS.buttons[e]);else if(this.PARAMS.buttons[e]){if(!BX.is_subclass_of(this.PARAMS.buttons[e],BX.CWindowButton)){var n=this._checkButton(this.PARAMS.buttons[e]);this.PARAMS.buttons[e]=new BX.CWindowButton(this.PARAMS.buttons[e]),n&&(this[n]=this.PARAMS.buttons[e])}t.push(this.PARAMS.buttons[e].Button(this))}}return t},BX.CDialog.prototype.setAutosave=function(){this.bSetAutosaveDelay||(this.bSetAutosaveDelay=!0,setTimeout(BX.proxy(this.setAutosave,this),10))},BX.CDialog.prototype.SetTitle=function(t){this.PARAMS.title=t,BX.cleanNode(this.PARTS.TITLE_CONTAINER).appendChild(document.createTextNode(this.PARAMS.title))},BX.CDialog.prototype.SetHead=function(t){this.PARAMS.head=BX.util.trim(t),this.PARTS.HEAD.innerHTML=this.PARAMS.head||"&nbsp;",this.PARTS.HEAD.style.display=this.PARAMS.head?"block":"none",this.adjustSize()},BX.CDialog.prototype.Notify=function(t,e){this.PARTS.NOTIFY||(this.PARTS.NOTIFY=this.DIV.insertBefore(BX.create("DIV",{props:{className:"adm-warning-block"},children:[BX.create("SPAN",{props:{className:"adm-warning-text"}}),BX.create("SPAN",{props:{className:"adm-warning-icon"}}),BX.create("SPAN",{props:{className:"adm-warning-close"},events:{click:BX.proxy(this.hideNotify,this)}})]}),this.DIV.firstChild)),e?BX.addClass(this.PARTS.NOTIFY,"adm-warning-block-red"):BX.removeClass(this.PARTS.NOTIFY,"adm-warning-block-red"),this.PARTS.NOTIFY.firstChild.innerHTML=t||"&nbsp;",this.PARTS.NOTIFY.firstChild.style.width=this.PARAMS.width-50+"px",BX.removeClass(this.PARTS.NOTIFY,"adm-warning-animate")},BX.CDialog.prototype.hideNotify=function(){BX.addClass(this.PARTS.NOTIFY,"adm-warning-animate")},BX.CDialog.prototype.__adjustHeadToIcon=function(){this.PARTS.HEAD.offsetHeight?(this.icon_image&&this.icon_image.height&&this.icon_image.height>this.PARTS.HEAD.offsetHeight-5&&(this.PARTS.HEAD.style.height=this.icon_image.height+5+"px",this.adjustSize()),this.icon_image.onload=null,this.icon_image=null):setTimeout(BX.delegate(this.__adjustHeadToIcon,this),50)},BX.CDialog.prototype.SetIcon=function(t){if(this.PARAMS.icon!=t&&(this.PARAMS.icon&&BX.removeClass(this.PARTS.HEAD,this.PARAMS.icon),this.PARAMS.icon=t,this.PARAMS.icon)){BX.addClass(this.PARTS.HEAD,this.PARAMS.icon);var e=BX.style(this.PARTS.HEAD,"background-image")||BX.style(this.PARTS.HEAD,"backgroundImage");if(BX.type.isNotEmptyString(e)&&"none"!=e){var i=e.match(new RegExp("url\\s*\\(\\s*('|\"|)(.+?)(\\1)\\s*\\)"));i&&(e=i[2],BX.type.isNotEmptyString(e)&&(this.icon_image=new Image,this.icon_image.onload=BX.delegate(this.__adjustHeadToIcon,this),this.icon_image.src=e))}}this.adjustSize()},BX.CDialog.prototype.SetIconFile=function(t){this.icon_image=new Image,this.icon_image.onload=BX.delegate(this.__adjustHeadToIcon,this),this.icon_image.src=t,BX.adjust(this.PARTS.HEAD,{style:{backgroundImage:"url("+t+")",backgroundPosition:"right 9px"}}),this.adjustSize()},BX.CDialog.prototype.SetButtons=function(t){if(BX.type.isString(t)){if(0<t.length){this.PARTS.BUTTONS_CONTAINER.innerHTML+=t;var e=this.PARTS.BUTTONS_CONTAINER.getElementsByTagName("INPUT");if(0<e.length){this.PARAMS.buttons=[];for(var i=0;i<e.length;i++)this.PARAMS.buttons.push(new BX.CWindowButton({btn:e[i],parentWindow:this}))}}}else this.PARAMS.buttons=t,BX.adjust(this.PARTS.BUTTONS_CONTAINER,{children:this.ShowButtons()});this.adjustSize()},BX.CDialog.prototype.ClearButtons=function(){BX.cleanNode(this.PARTS.BUTTONS_CONTAINER),this.adjustSize()},BX.CDialog.prototype.SetContent=function(t){this.__form=null,BX.type.isElementNode(t)?t.parentNode&&t.parentNode.removeChild(t):BX.type.isString(t)&&(t=BX.create("DIV",{html:t})),this.PARAMS.content=t,BX.cleanNode(this.PARTS.CONTENT_DATA),BX.adjust(this.PARTS.CONTENT_DATA,{children:[this.PARTS.HEAD,BX.create("DIV",{props:{className:"bx-core-adm-dialog-content-wrap-inner"},children:[this.PARAMS.content]})]}),this.PARAMS.content_url&&this.GetForm()&&(this.__form.submitbtn=this.__form.appendChild(BX.create("INPUT",{props:{type:"submit"},style:{display:"none"}})),this.__form.onsubmit=BX.delegate(this.__submit,this))},BX.CDialog.prototype.__submit=function(t){for(var e=0,i=this.PARAMS.buttons.length;e<i;e++)if(this.PARAMS.buttons[e]&&(this.PARAMS.buttons[e].name&&/save|apply/i.test(this.PARAMS.buttons[e].name)||this.PARAMS.buttons[e].btn&&this.PARAMS.buttons[e].btn.name&&/save|apply/i.test(this.PARAMS.buttons[e].btn.name))){this.PARAMS.buttons[e].emulate();break}return BX.PreventDefault(t)},BX.CDialog.prototype.SwapContent=function(t){t=BX(t),BX.cleanNode(this.PARTS.CONTENT_DATA),t.parentNode.removeChild(t),this.PARTS.CONTENT_DATA.appendChild(t),t.style.display="block",this.SetContent(t.innerHTML)},BX.CDialog.prototype.adjustSize=function(){},BX.CDialog.prototype.__adjustSize=function(){},BX.CDialog.prototype.adjustSizeEx=function(){BX.defer(this.__adjustSizeEx,this)()},BX.CDialog.prototype.__adjustSizeEx=function(){for(var t,e,i=this.PARTS.CONTENT_DATA.firstChild,n=0;i;)BX.type.isElementNode(i)&&(t=parseInt(BX.style(i,"margin-top"),10),isNaN(t)&&(t=0),e=parseInt(BX.style(i,"margin-bottom"),10),isNaN(e)&&(e=0),n+=i.offsetHeight+t+e),i=BX.nextSibling(i);n&&(this.PARTS.CONTENT_DATA.style.height=n+"px")},BX.CDialog.prototype.__onResizeFinished=function(){BX.WindowManager.saveWindowSize(this.PARAMS.resize_id||this.PARAMS.content_url,{height:parseInt(this.PARTS.CONTENT_DATA.style.height),width:parseInt(this.PARTS.CONTENT_DATA.style.width)})},BX.CDialog.prototype.Show=function(t){if(!this.PARAMS.content&&this.PARAMS.content_url&&BX.ajax&&!t){var e=BX.showWait();(BX.WindowManager.currently_loaded=this).CreateOverlay(parseInt(BX.style(e,"z-index"))-1),this.OVERLAY.style.display="block",this.OVERLAY.className="bx-core-dialog-overlay";var i="",n="GET";this.PARAMS.content_post&&(i=this.PARAMS.content_post,n="POST");var o=this.PARAMS.content_url+(this.PARAMS.content_url.indexOf("?")<0?"?":"&")+"bxsender="+this._sender;this.auth_callback=BX.delegate(function(){this.PARAMS.content="",this.hideNotify(),this.Show()},this),BX.ajax({method:n,dataType:"html",url:o,data:i,skipAuthCheck:!0,onsuccess:BX.delegate(function(t){BX.closeWait(null,e),this.SetContent(t||"&nbsp;"),this.Show()},this)})}else BX.WindowManager.currently_loaded=null,BX.CDialog.superclass.Show.apply(this,arguments),this.adjustPos(),this.OVERLAY.className="bx-core-dialog-overlay",this.__adjustSize(),BX.addCustomEvent(this,"onWindowResize",BX.proxy(this.__adjustSize,this)),this.PARAMS.resizable&&(this.PARAMS.content_url||this.PARAMS.resize_id)&&BX.addCustomEvent(this,"onWindowResizeFinished",BX.delegate(this.__onResizeFinished,this))},BX.CDialog.prototype.GetInnerPos=function(){return{width:parseInt(this.PARTS.CONTENT_DATA.style.width),height:parseInt(this.PARTS.CONTENT_DATA.style.height)}},BX.CDialog.prototype.adjustPos=function(){if(!this.bExpanded){var t=BX.GetWindowInnerSize(),e=BX.GetWindowScrollPos();BX.adjust(this.DIV,{style:{left:parseInt(e.scrollLeft+t.innerWidth/2-parseInt(this.DIV.offsetWidth)/2)+"px",top:Math.max(parseInt(e.scrollTop+t.innerHeight/2-parseInt(this.DIV.offsetHeight)/2),0)+"px"}})}},BX.CDialog.prototype.GetContent=function(){return this.PARTS.CONTENT_DATA},BX.CDialog.prototype.btnSave=BX.CDialog.btnSave={title:BX.message("JS_CORE_WINDOW_SAVE"),id:"savebtn",name:"savebtn",className:BX.browser.IsIE()&&BX.browser.IsDoctype()&&!BX.browser.IsIE10()?"":"adm-btn-save",action:function(){this.disableUntilError(),this.parentWindow.PostParameters()}},BX.CDialog.prototype.btnCancel=BX.CDialog.btnCancel={title:BX.message("JS_CORE_WINDOW_CANCEL"),id:"cancel",name:"cancel",action:function(){this.parentWindow.Close()}},BX.CDialog.prototype.btnClose=BX.CDialog.btnClose={title:BX.message("JS_CORE_WINDOW_CLOSE"),id:"close",name:"close",action:function(){this.parentWindow.Close()}},BX.CAdminDialog=function(t){BX.CAdminDialog.superclass.constructor.apply(this,arguments),this._sender="core_window_cadmindialog",BX.addClass(this.DIV,"bx-core-adm-admin-dialog"),this.PARTS.CONTENT.insertBefore(this.PARTS.HEAD,this.PARTS.CONTENT.firstChild),this.PARTS.HEAD.className="bx-core-adm-dialog-tabs"},BX.extend(BX.CAdminDialog,BX.CDialog),BX.CAdminDialog.prototype.SetHead=function(){if(BX.CAdminDialog.superclass.SetHead.apply(this,arguments),this.PARTS.HEAD.firstChild&&BX.type.isElementNode(this.PARTS.HEAD.firstChild)){for(var t=this.PARTS.HEAD.firstChild,e=0,i=0,n=0;t;)BX.type.isElementNode(t)&&(i=parseInt(BX.style(t,"margin-left"),10),isNaN(i)&&(i=0),n=parseInt(BX.style(t,"margin-right"),10),isNaN(n)&&(n=0),e+=t.offsetWidth+i+n),t=BX.nextSibling(t);this.SETTINGS.min_width=Math.max(e,this.SETTINGS.min_width)-2,this.PARAMS.width<this.SETTINGS.min_width&&BX.adjust(this.PARTS.CONTENT_DATA,{style:{width:this.SETTINGS.min_width+"px"}})}},BX.CAdminDialog.prototype.SetContent=function(t){this.__form=null,BX.type.isElementNode(t)&&t.parentNode&&t.parentNode.removeChild(t),this.PARAMS.content=t,BX.cleanNode(this.PARTS.CONTENT_DATA),BX.adjust(this.PARTS.CONTENT_DATA,{children:[this.PARAMS.content||"&nbsp;"]}),this.PARAMS.content_url&&this.GetForm()&&(this.__form.appendChild(BX.create("INPUT",{props:{type:"submit"},style:{display:"none"}})),this.__form.onsubmit=BX.delegate(this.__submit,this))},BX.CAdminDialog.prototype.__expandGetSize=function(){var t=BX.CAdminDialog.superclass.__expandGetSize.apply(this,arguments);return t.width-=parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-right"))+parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-left")),t.height-=parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-top"))+parseInt(BX.style(this.PARTS.CONTENT_DATA,"padding-bottom")),t.height-=this.PARTS.HEAD.offsetHeight,t},BX.CAdminDialog.prototype.Submit=function(){var t=this.GetForm();return!t||t.bxpublic||/bxpublic=/.test(t.action)||t.appendChild(BX.create("INPUT",{props:{type:"hidden",name:"bxpublic",value:"Y"}})),BX.CAdminDialog.superclass.Submit.apply(this,arguments)},BX.CAdminDialog.prototype.btnSave=BX.CAdminDialog.btnSave={title:BX.message("JS_CORE_WINDOW_SAVE"),id:"savebtn",name:"savebtn",className:"adm-btn-save",action:function(){this.disableUntilError(),this.parentWindow.Submit()}},BX.CAdminDialog.btnCancel=BX.CAdminDialog.superclass.btnCancel,BX.CAdminDialog.btnClose=BX.CAdminDialog.superclass.btnClose,BX.CDebugDialog=function(t){BX.CDebugDialog.superclass.constructor.apply(this,arguments)},BX.extend(BX.CDebugDialog,BX.CDialog),BX.CDebugDialog.prototype.ShowDetails=function(t){var e=BX(t);e&&(this.div_detail_current&&(this.div_detail_current.style.display="none"),e.style.display="block",this.div_detail_current=e)},BX.CDebugDialog.prototype.SetContent=function(t){if(t){var e=t.split("#DIVIDER#");1<e.length?(this.PARAMS.content=e[1],this.PARTS.CONTENT_DATA.style.overflow="hidden",BX.CDebugDialog.superclass.SetContent.apply(this,[e[1]]),this.PARTS.CONTENT_INNER=this.PARTS.CONTENT_DATA.firstChild.nextSibling,this.PARTS.CONTENT_TOP=this.PARTS.CONTENT_DATA.insertBefore(BX.create("DIV",{props:{className:"bx-debug-content-top"},html:e[0]}),this.PARTS.CONTENT_INNER),this.PARTS.CONTENT_INNER.style.overflow="auto"):BX.CDebugDialog.superclass.SetContent.apply(this,arguments)}},BX.CDebugDialog.prototype.__adjustSize=function(){if(BX.CDebugDialog.superclass.__adjustSize.apply(this,arguments),this.PARTS.CONTENT_TOP){var t=this.PARTS.CONTENT_DATA.offsetHeight-this.PARTS.HEAD.offsetHeight-this.PARTS.CONTENT_TOP.offsetHeight-38;0<t&&(this.PARTS.CONTENT_INNER.style.height=t+"px")}},BX.CEditorDialog=function(t){BX.CEditorDialog.superclass.constructor.apply(this,arguments),BX.removeClass(this.PARTS.CONTENT,"bx-core-adm-dialog-content-wrap"),BX.removeClass(this.PARTS.CONTENT_DATA,"bx-core-adm-dialog-content"),BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner"),BX.removeClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-adm-dialog-buttons"),BX.addClass(this.PARTS.CONTENT,"bx-core-editor-dialog-content-wrap"),BX.addClass(this.PARTS.CONTENT_DATA,"bx-core-editor-dialog-content"),BX.addClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-editor-dialog-buttons")},BX.extend(BX.CEditorDialog,BX.CDialog),BX.CEditorDialog.prototype.SetContent=function(){BX.CEditorDialog.superclass.SetContent.apply(this,arguments),BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner")},BX.CWizardDialog=function(t){BX.CWizardDialog.superclass.constructor.apply(this,arguments),BX.removeClass(this.PARTS.CONTENT,"bx-core-adm-dialog-content-wrap"),BX.removeClass(this.PARTS.CONTENT_DATA,"bx-core-adm-dialog-content"),BX.removeClass(this.PARTS.CONTENT_DATA.lastChild,"bx-core-adm-dialog-content-wrap-inner"),BX.removeClass(this.PARTS.BUTTONS_CONTAINER,"bx-core-adm-dialog-buttons"),BX.addClass(this.PARTS.CONTENT,"bx-core-wizard-dialog-content-wrap")},BX.extend(BX.CWizardDialog,BX.CDialog),BX.CAuthDialog=function(t){t.resizable=!1,t.width=350,t.height=200,t.buttons=[this.btnSave],BX.CAuthDialog.superclass.constructor.apply(this,arguments),this._sender="core_window_cauthdialog",BX.addClass(this.DIV,"bx-core-auth-dialog"),BX.AUTHAGENT=this},BX.extend(BX.CAuthDialog,BX.CDialog),BX.CAuthDialog.prototype.btnSave=BX.CAuthDialog.btnSave={title:BX.message("JS_CORE_WINDOW_AUTH"),id:"savebtn",name:"savebtn",className:"adm-btn-save",action:function(){this.disableUntilError(),this.parentWindow.Submit("",this.parentWindow.PARAMS.content_url)}},BX.CAuthDialog.prototype.SetError=function(t){BX.closeWait(),t&&this.ShowError(t.MESSAGE||t)},BX.CAuthDialog.prototype.setAuthResult=function(t){BX.closeWait(),!1===t?(this.Close(),this.PARAMS.callback&&this.PARAMS.callback()):this.SetError(t)},BX.CWindowFloat=function(t){BX.CWindowFloat.superclass.constructor.apply(this,[t,"float"]),this.SETTINGS.resizable=!1},BX.extend(BX.CWindowFloat,BX.CWindow),BX.CWindowFloat.prototype.adjustPos=function(){this.PARAMS.parent?this.adjustToNode():this.PARAMS.x&&this.PARAMS.y&&this.adjustToPos([this.PARAMS.x,this.PARAMS.y])},BX.CWindowFloat.prototype.adjustToPos=function(t){this.DIV.style.left=parseInt(t[0])+"px",this.DIV.style.top=parseInt(t[1])+"px"},BX.CWindowFloat.prototype.adjustToNodeGetPos=function(){return BX.pos(this.PARAMS.parent)},BX.CWindowFloat.prototype.adjustToNode=function(t){if(t=t||this.PARAMS.parent,this.PARAMS.parent=BX(t),this.PARAMS.parent){var e=this.adjustToNodeGetPos();this.DIV.style.top=e.top+"px",this.DIV.style.left=e.left+"px",this.PARAMS.parent.OPENER=this}},BX.CWindowFloat.prototype.Show=function(){this.adjustToPos([-1e3,-1e3]),BX.CWindowFloat.superclass.Show.apply(this,arguments),this.adjustPos()},BX.COpener=function(t){this.PARAMS=t||{},this.MENU=t.MENU||[],this.DIV=t.DIV,this.ATTACH=t.ATTACH||t.DIV,this.ATTACH_MODE=t.ATTACH_MODE||"bottom",this.ACTIVE_CLASS=t.ACTIVE_CLASS||"",this.LEVEL=t.LEVEL||0,this.CLOSE_ON_CLICK=void 0===t.CLOSE_ON_CLICK||!!t.CLOSE_ON_CLICK,this.ADJUST_ON_CLICK=void 0===t.ADJUST_ON_CLICK||!!t.ADJUST_ON_CLICK,this.TYPE="hover"==this.PARAMS.TYPE?"hover":"click",this._openTimeout=null,"hover"==this.PARAMS.TYPE&&0!==t.TIMEOUT?this.TIMEOUT=t.TIMEOUT||1e3:this.TIMEOUT=0,this.PARAMS.MENU_URL&&(this.bMenuLoaded=!1,this.bMenuLoading=!1,this.MENU=[{TEXT:BX.message("JS_CORE_LOADING"),CLOSE_ON_CLICK:!1}],this.PARAMS.MENU_PRELOAD&&BX.defer(this.Load,this)()),BX.ready(BX.defer(this.Init,this))},BX.COpener.prototype.Init=function(){switch(this.DIV=BX(this.DIV),this.TYPE){case"hover":BX.bind(this.DIV,"mouseover",BX.proxy(this.Open,this)),BX.bind(this.DIV,"click",BX.proxy(this.Toggle,this));break;case"click":BX.bind(this.DIV,"click",BX.proxy(this.Toggle,this))}this.bMenuInit=!1},BX.COpener.prototype.Load=function(){if(this.PARAMS.MENU_URL&&!this.bMenuLoaded&&!this.bMenuLoading){var t=this.PARAMS.MENU_URL;t.indexOf("sessid=")<=0&&(t+=(0<t.indexOf("?")?"&":"?")+"sessid="+BX.bitrix_sessid()),this.bMenuLoading=!0,BX.ajax.loadJSON(t,BX.proxy(this.SetMenu,this),BX.proxy(this.LoadFailed,this))}},BX.COpener.prototype.SetMenu=function(t){this.bMenuLoaded=!0,this.bMenuLoading=!1,this.bMenuInit?this.MENU.setItems(t):this.MENU=t},BX.COpener.prototype.LoadFailed=function(t,e){this.bMenuLoading=!1,this.SetMenu([{TEXT:BX.message("JS_CORE_NO_DATA"),CLOSE_ON_CLICK:!0}]),BX.debug(arguments)},BX.COpener.prototype.checkAdminMenu=function(){return"bx-admin-prefix"==document.documentElement.id||!!BX.findParent(this.DIV,{property:{id:"bx-admin-prefix"}})},BX.COpener.prototype.Toggle=function(t){if(this.__clear_timeout(),this.bMenuInit&&this.MENU.visible())this.MENU.Close();else{var e=this.TIMEOUT;this.TIMEOUT=0,this.Open(t),this.TIMEOUT=e}return!(!t&&!window.event)&&BX.PreventDefault(t)},BX.COpener.prototype.GetMenu=function(){return this.bMenuInit||(BX.type.isArray(this.MENU)&&(this.MENU=new BX.CMenu({ITEMS:this.MENU,ATTACH_MODE:this.ATTACH_MODE,SET_ID:this.checkAdminMenu()?"bx-admin-prefix":"",CLOSE_ON_CLICK:!!this.CLOSE_ON_CLICK,ADJUST_ON_CLICK:!!this.ADJUST_ON_CLICK,LEVEL:this.LEVEL,parent:BX(this.DIV),parent_attach:BX(this.ATTACH)}),0<this.LEVEL&&(BX.bind(this.MENU.DIV,"mouseover",BX.proxy(this._on_menu_hover,this)),BX.bind(this.MENU.DIV,"mouseout",BX.proxy(this._on_menu_hout,this)))),BX.addCustomEvent(this.MENU,"onMenuOpen",BX.proxy(this.handler_onopen,this)),BX.addCustomEvent(this.MENU,"onMenuClose",BX.proxy(this.handler_onclose,this)),BX.addCustomEvent("onMenuItemHover",BX.proxy(this.handler_onover,this)),this.bMenuInit=!0),this.MENU},BX.COpener.prototype.Open=function(){return this.GetMenu(),this.bOpen=!0,this.__clear_timeout(),0<this.TIMEOUT?(BX.bind(this.DIV,"mouseout",BX.proxy(this.__clear_timeout,this)),this._openTimeout=setTimeout(BX.proxy(this.__open,this),this.TIMEOUT)):this.__open(),this.PARAMS.MENU_URL&&!this.bMenuLoaded&&(this._loadTimeout=setTimeout(BX.proxy(this.Load,this),parseInt(this.TIMEOUT/2))),!0},BX.COpener.prototype.__clear_timeout=function(){this._openTimeout&&clearTimeout(this._openTimeout),this._loadTimeout&&clearTimeout(this._loadTimeout),BX.unbind(this.DIV,"mouseout",BX.proxy(this.__clear_timeout,this))},BX.COpener.prototype._on_menu_hover=function(){this.bMenuHover=!0,this.__clear_timeout(),this.ACTIVE_CLASS&&BX.addClass(this.DIV,this.ACTIVE_CLASS)},BX.COpener.prototype._on_menu_hout=function(){this.bMenuHover=!1},BX.COpener.prototype.handler_onover=function(t,e){this.bMenuHover||(e!=this&&t==this.LEVEL-1&&this.ACTIVE_CLASS&&BX.removeClass(this.DIV,this.ACTIVE_CLASS),this.bMenuInit&&t<=this.LEVEL-1&&this.MENU.visible()&&e!=this&&(this.__clear_timeout(),this._openTimeout=setTimeout(BX.proxy(this.Close,this),this.TIMEOUT)))},BX.COpener.prototype.handler_onopen=function(){this.bOpen=!0,this.ACTIVE_CLASS&&BX.addClass(this.DIV,this.ACTIVE_CLASS),BX.defer(function(){BX.onCustomEvent(this,"onOpenerMenuOpen")},this)()},BX.COpener.prototype.handler_onclose=function(){this.bOpen=!1,BX.onCustomEvent(this,"onOpenerMenuClose"),this.ACTIVE_CLASS&&BX.removeClass(this.DIV,this.ACTIVE_CLASS)},BX.COpener.prototype.Close=function(){this.bMenuInit&&(this._openTimeout&&clearTimeout(this._openTimeout),this.bOpen=!1,this.__close())},BX.COpener.prototype.__open=function(){this.__clear_timeout(),this.bMenuInit&&this.bOpen&&!this.MENU.visible()&&this.MENU.Show()},BX.COpener.prototype.__close=function(){this.bMenuInit&&!this.bOpen&&this.MENU.visible()&&this.MENU.Hide()},BX.COpener.prototype.__close_immediately=function(){this.bOpen=!1,this.__close()},BX.COpener.prototype.isMenuVisible=function(){return null!=this.MENU.visible&&this.MENU.visible()},BX.CMenu=function(t){BX.CMenu.superclass.constructor.apply(this),this.DIV.style.width="auto",this.DIV.style.height="auto",this.PARAMS=t||{},this.PARTS={},this.PARAMS.ATTACH_MODE=this.PARAMS.ATTACH_MODE||"bottom",this.PARAMS.CLOSE_ON_CLICK=void 0===this.PARAMS.CLOSE_ON_CLICK||this.PARAMS.CLOSE_ON_CLICK,this.PARAMS.ADJUST_ON_CLICK=void 0===this.PARAMS.ADJUST_ON_CLICK||this.PARAMS.ADJUST_ON_CLICK,this.PARAMS.LEVEL=this.PARAMS.LEVEL||0,this.DIV.className="bx-core-popup-menu bx-core-popup-menu-"+this.PARAMS.ATTACH_MODE+" bx-core-popup-menu-level"+this.PARAMS.LEVEL+(void 0!==this.PARAMS.ADDITIONAL_CLASS?" "+this.PARAMS.ADDITIONAL_CLASS:""),this.PARAMS.SET_ID&&(this.DIV.id=this.PARAMS.SET_ID),0==this.PARAMS.LEVEL&&(this.ARROW=this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-core-popup-menu-angle"},style:{left:"15px"}}))),this.PARAMS.CLASS_NAME&&(this.DIV.className+=" "+this.PARAMS.CLASS_NAME),BX.bind(this.DIV,"click",BX.eventCancelBubble),this.ITEMS=[],this.setItems(this.PARAMS.ITEMS),BX.addCustomEvent("onMenuOpen",BX.proxy(this._onMenuOpen,this)),BX.addCustomEvent("onMenuItemSelected",BX.proxy(this.Hide,this))},BX.extend(BX.CMenu,BX.CWindowFloat),BX.CMenu.broadcastCloseEvent=function(){BX.onCustomEvent("onMenuItemSelected")},BX.CMenu._toggleChecked=function(){BX.toggleClass(this,"bx-core-popup-menu-item-checked")},BX.CMenu._itemDblClick=function(){window.location.href=this.href},BX.CMenu.prototype.toggleArrow=function(t){this.ARROW&&(void 0===t&&(t="hidden"==this.ARROW.style.visibility),this.ARROW.style.visibility=t?"visible":"hidden")},BX.CMenu.prototype.visible=function(){return"none"!==this.DIV.style.display},BX.CMenu.prototype._onMenuOpen=function(t,e){this.visible()&&e==this.PARAMS.LEVEL&&t!=this&&this.Hide()},BX.CMenu.prototype.onUnRegister=function(){this.visible()&&this.Hide()},BX.CMenu.prototype.setItems=function(t){if(this.PARAMS.ITEMS=t,BX.cleanNode(this.DIV),this.ARROW&&this.DIV.appendChild(this.ARROW),this.PARAMS.ITEMS){this.PARAMS.ITEMS=BX.util.array_values(this.PARAMS.ITEMS);for(var e=!1,i=0,n=0,o=this.PARAMS.ITEMS.length;n<o;n++)(0!=n&&n!=o-1||!this.PARAMS.ITEMS[n].SEPARATOR)&&(i++,e||(e=!!this.PARAMS.ITEMS[n].GLOBAL_ICON),this.addItem(this.PARAMS.ITEMS[n],n));1===i?BX.addClass(this.DIV,"bx-core-popup-menu-single-item"):BX.removeClass(this.DIV,"bx-core-popup-menu-single-item"),e?BX.removeClass(this.DIV,"bx-core-popup-menu-no-icons"):BX.addClass(this.DIV,"bx-core-popup-menu-no-icons")}},BX.CMenu.prototype.addItem=function(t){if(this.ITEMS.push(t),t.SEPARATOR)t.NODE=BX.create("DIV",{props:{className:"bx-core-popup-menu-separator"}});else{var e=!!t.MENU&&(BX.type.isArray(t.MENU)&&0<t.MENU.length||t.MENU instanceof BX.CMenu)||!!t.MENU_URL;t.DISABLED&&(t.CLOSE_ON_CLICK=!1,t.LINK=null,t.ONCLICK=null,t.ACTION=null),t.NODE=BX.create(t.LINK||BX.browser.IsIE()&&!BX.browser.IsDoctype()?"A":"SPAN",{props:{className:"bx-core-popup-menu-item"+(e?" bx-core-popup-menu-item-opener":"")+(t.DEFAULT?" bx-core-popup-menu-item-default":"")+(t.DISABLED?" bx-core-popup-menu-item-disabled":"")+(t.CHECKED?" bx-core-popup-menu-item-checked":""),title:(BX.message.MENU_ENABLE_TOOLTIP||t.SHOW_TITLE)&&t.TITLE||"",BXMENULEVEL:this.PARAMS.LEVEL},attrs:t.LINK||BX.browser.IsIE()&&!BX.browser.IsDoctype()?{href:t.LINK||"javascript:void(0)"}:{},events:{mouseover:function(){BX.onCustomEvent("onMenuItemHover",[this.BXMENULEVEL,this.OPENER])}},html:'<span class="bx-core-popup-menu-item-icon'+(t.GLOBAL_ICON?" "+t.GLOBAL_ICON:"")+'"></span><span class="bx-core-popup-menu-item-text">'+t.TEXT+"</span>"}),e&&!t.DISABLED?t.NODE.OPENER=new BX.COpener({DIV:t.NODE,ACTIVE_CLASS:"bx-core-popup-menu-item-opened",TYPE:"hover",MENU:t.MENU,MENU_URL:t.MENU_URL,MENU_PRELOAD:!!t.MENU_PRELOAD,LEVEL:this.PARAMS.LEVEL+1,ATTACH_MODE:"right",TIMEOUT:500}):this.PARAMS.CLOSE_ON_CLICK&&(void 0===t.CLOSE_ON_CLICK||t.CLOSE_ON_CLICK)?BX.bind(t.NODE,"click",BX.CMenu.broadcastCloseEvent):this.PARAMS.ADJUST_ON_CLICK&&(void 0===t.ADJUST_ON_CLICK||t.ADJUST_ON_CLICK)&&BX.bind(t.NODE,"click",BX.defer(this.adjustPos,this)),e&&t.LINK&&BX.bind(t.NODE,"dblclick",BX.CMenu._itemDblClick),void 0!==t.CHECKED&&BX.bind(t.NODE,"click",BX.CMenu._toggleChecked),t.ONCLICK=t.ACTION||t.ONCLICK,t.ONCLICK&&(BX.type.isString(t.ONCLICK)&&(t.ONCLICK=new Function("event",t.ONCLICK)),BX.bind(t.NODE,"click",t.ONCLICK))}this.DIV.appendChild(t.NODE)},BX.CMenu.prototype._documentClickBind=function(){this._documentClickUnBind(),BX.bind(document,"click",BX.proxy(this._documentClick,this))},BX.CMenu.prototype._documentClickUnBind=function(){BX.unbind(document,"click",BX.proxy(this._documentClick,this))},BX.CMenu.prototype._documentClick=function(t){(!(t=t||window.event)||BX.getEventButton(t)&BX.MSLEFT)&&this.Close()},BX.CMenu.prototype.Show=function(){BX.onCustomEvent(this,"onMenuOpen",[this,this.PARAMS.LEVEL]),BX.CMenu.superclass.Show.apply(this,[]),this.bCloseEventFired=!1,BX.addCustomEvent(this.PARAMS.parent_attach,"onChangeNodePosition",BX.proxy(this.adjustToNode,this)),BX.defer(this._documentClickBind,this)()},BX.CMenu.prototype.Close=BX.CMenu.prototype.Hide=function(){this.visible()&&(BX.removeCustomEvent(this.PARAMS.parent_attach,"onChangeNodePosition",BX.proxy(this.adjustToNode,this)),this._documentClickUnBind(),this.bCloseEventFired||(BX.onCustomEvent(this,"onMenuClose",[this,this.PARAMS.LEVEL]),this.bCloseEventFired=!0),BX.CMenu.superclass.Hide.apply(this,arguments))},BX.CMenu.prototype.__adjustMenuToNode=function(){var t=BX.pos(this.PARAMS.parent_attach),e=!!BX.findParent(this.PARAMS.parent_attach,BX.is_fixed);if(this.DIV.style.position=e?"fixed":"absolute",t.top||(this.DIV.style.top="-1000px",this.DIV.style.left="-1000px"),!this.bTimeoutSet){var i=this.DIV.offsetWidth,n=this.DIV.offsetHeight;if(!i)return setTimeout(BX.delegate(function(){this.bTimeoutSet=!1,this.__adjustMenuToNode()},this),100),void(this.bTimeoutSet=!0);var o={},s=BX.GetWindowSize();switch(this.PARAMS.ATTACH_MODE){case"bottom":o.top=t.bottom+9,o.left=t.left;var r=0;if(this.ARROW&&(r=t.width>i?parseInt(i/2-7):parseInt(Math.min(i,t.width)/2-7))<7&&(o.left-=15,r+=15),o.left>s.scrollWidth-i-10){var a=o.left;o.left=s.scrollWidth-i-10,this.ARROW&&(r+=a-o.left)}e&&(o.left-=s.scrollLeft),this.ARROW&&(this.ARROW.style.left=r+"px");break;case"right":o.top=t.top-1,o.left=t.right,o.left>s.scrollWidth-i-10&&(o.left=t.left-i-1)}if(e&&(o.top-=s.scrollTop),this.ARROW&&(this.ARROW.className="bx-core-popup-menu-angle"),o.top+n>s.scrollTop+s.innerHeight||o.top+n>s.scrollHeight){var l="bottom"==this.PARAMS.ATTACH_MODE?t.top-n-9:t.bottom-n+1;(l>s.scrollTop||o.top+n>s.scrollHeight)&&(o.top+n>s.scrollHeight?(o.top=Math.max(0,s.scrollHeight-n),this.toggleArrow(!1)):(o.top=l,this.ARROW&&(this.ARROW.className="bx-core-popup-menu-angle-bottom")))}o.top+o.left==0?this.Hide():(this.DIV.style.top=o.top+"px",this.DIV.style.left=o.left+"px")}},BX.CMenu.prototype.adjustToNode=function(t){this.PARAMS.parent_attach=BX(t)||this.PARAMS.parent_attach||this.PARAMS.parent,this.__adjustMenuToNode()},BX.CMenuOpener=function(t){BX.CMenuOpener.superclass.constructor.apply(this),this.PARAMS=t||{},this.setParent(this.PARAMS.parent),this.PARTS={},this.SETTINGS.drag_restrict=!0,this.defaultAction=null,this.timeout=500,this.DIV.className="bx-component-opener",this.DIV.ondblclick=BX.PreventDefault,this.PARAMS.component_id&&(this.PARAMS.transform=!!this.PARAMS.transform),this.OPENERS=[],this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar"+(this.PARAMS.transform?" bx-context-toolbar-vertical-mode":"")}})),this.PARTS.INNER=this.DIV.firstChild.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-inner"},html:'<span class="bx-context-toolbar-drag-icon"></span><span class="bx-context-toolbar-vertical-line"></span><br>'})),this.EXTRA_BUTTONS={};for(var e=0,i=0,n=this.PARAMS.menu.length;i<n;i++){var o=this.addItem(this.PARAMS.menu[i]);null!=o&&(e++,this.PARTS.INNER.appendChild(o),this.PARTS.INNER.appendChild(BX.create("BR")))}var s=0<e;if(this.PARTS.ICONS=this.PARTS.INNER.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-icons"}})),this.PARAMS.component_id&&(this.PARAMS.pin=!!this.PARAMS.pin,s&&this.PARTS.ICONS.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-separator"}})),this.PARTS.ICON_PIN=this.PARTS.ICONS.appendChild(BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:this.PARAMS.pin?"bx-context-toolbar-pin-fixed":"bx-context-toolbar-pin"},events:{click:BX.delegate(this.__pin_btn_clicked,this)}}))),this.EXTRA_BUTTONS.components2_props){var r=this.EXTRA_BUTTONS.components2_props||{URL:"javascript:void(0)"};null==this.defaultAction&&(this.defaultAction=r.ONCLICK,this.defaultActionTitle=r.TITLE||r.TEXT),r.URL="javascript:"+BX.util.urlencode(r.ONCLICK),this.ATTACH=this.PARTS.ICONS.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button bx-context-toolbar-button-settings"},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-inner"},children:[BX.create("A",{attrs:{href:r.URL},events:{mouseover:BX.proxy(this.__msover_text,this),mouseout:BX.proxy(this.__msout_text,this),mousedown:BX.proxy(this.__msdown_text,this)},html:'<span class="bx-context-toolbar-button-icon bx-context-toolbar-settings-icon"></span>'}),BX.create("A",{attrs:{href:"javascript: void(0)"},props:{className:"bx-context-toolbar-button-arrow"},events:{mouseover:BX.proxy(this.__msover_arrow,this),mouseout:BX.proxy(this.__msout_arrow,this),mousedown:BX.proxy(this.__msdown_arrow,this)},html:'<span class="bx-context-toolbar-button-arrow"></span>'})]})]})),this.OPENER=this.ATTACH.firstChild.lastChild;var a=this.attachMenu(this.EXTRA_BUTTONS.components2_submenu.MENU);BX.addCustomEvent(a,"onOpenerMenuOpen",BX.proxy(this.__menu_open,this)),BX.addCustomEvent(a,"onOpenerMenuClose",BX.proxy(this.__menu_close,this))}if(1<e&&(this.PARTS.ICONS.appendChild(BX.create("span",{props:{className:"bx-context-toolbar-separator bx-context-toolbar-separator-switcher"}})),this.ICON_TRANSFORM=this.PARTS.ICONS.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},props:{className:"bx-context-toolbar-switcher"},events:{click:BX.delegate(this.__trf_btn_clicked,this)}}))),this.PARAMS.HINT&&(this.DIV.BXHINT=this.HINT=new BX.CHint({parent:this.DIV,hint:this.PARAMS.HINT.TEXT||"",title:this.PARAMS.HINT.TITLE||"",hide_timeout:this.timeout/2,preventHide:!1})),BX.addCustomEvent(this,"onWindowDragFinished",BX.delegate(this.__onMoveFinished,this)),BX.addCustomEvent("onDynamicModeChange",BX.delegate(this.__onDynamicModeChange,this)),BX.addCustomEvent("onTopPanelCollapse",BX.delegate(this.__onPanelCollapse,this)),BX.addCustomEvent("onMenuOpenerMoved",BX.delegate(this.checkPosition,this)),BX.addCustomEvent("onMenuOpenerUnhide",BX.delegate(this.checkPosition,this)),this.OPENERS)for(i=0,n=this.OPENERS.length;i<n;i++)BX.addCustomEvent(this.OPENERS[i],"onOpenerMenuOpen",BX.proxy(this.__hide_hint,this))},BX.extend(BX.CMenuOpener,BX.CWindowFloat),BX.CMenuOpener.prototype.setParent=function(t){(t=BX(t)).OPENER&&t.OPENER!=this&&(t.OPENER.Close(),t.OPENER.clearHoverHoutEvents()),this.PARAMS.parent&&this.PARAMS.parent!=t&&(this.clearHoverHoutEvents(),this.PARAMS.parent.OPENER=null),this.PARAMS.parent=t,this.PARAMS.parent.OPENER=this},BX.CMenuOpener.prototype.setHoverHoutEvents=function(t,e){this.__opener_events_set||(BX.bind(this.Get(),"mouseover",t),BX.bind(this.Get(),"mouseout",e),this.__opener_events_set=!0)},BX.CMenuOpener.prototype.clearHoverHoutEvents=function(){this.Get()&&(BX.unbindAll(this.Get()),this.__opener_events_set=!1)},BX.CMenuOpener.prototype.unclosable=!0,BX.CMenuOpener.prototype.__check_intersection=function(t,e){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)},BX.CMenuOpener.prototype.__msover_text=function(){this.bx_hover=!0,this._menu_open||BX.addClass(this.ATTACH,"bx-context-toolbar-button-text-hover")},BX.CMenuOpener.prototype.__msout_text=function(){this.bx_hover=!1,this._menu_open||BX.removeClass(this.ATTACH,"bx-context-toolbar-button-text-hover bx-context-toolbar-button-text-active")},BX.CMenuOpener.prototype.__msover_arrow=function(){this.bx_hover=!0,this._menu_open||BX.addClass(this.ATTACH,"bx-context-toolbar-button-arrow-hover")},BX.CMenuOpener.prototype.__msout_arrow=function(){this.bx_hover=!1,this._menu_open||BX.removeClass(this.ATTACH,"bx-context-toolbar-button-arrow-hover bx-context-toolbar-button-arrow-active")},BX.CMenuOpener.prototype.__msdown_text=function(){this.bx_active=!0,this._menu_open||BX.addClass(this.ATTACH,"bx-context-toolbar-button-text-active")},BX.CMenuOpener.prototype.__msdown_arrow=function(){this.bx_active=!0,this._menu_open||BX.addClass(this.ATTACH,"bx-context-toolbar-button-arrow-active")},BX.CMenuOpener.prototype.__menu_close=function(){this._menu_open=!1,this.bx_active=!1,BX.removeClass(this.ATTACH,"bx-context-toolbar-button-active bx-context-toolbar-button-text-active bx-context-toolbar-button-arrow-active"),this.bx_hover||(BX.removeClass(this.ATTACH,"bx-context-toolbar-button-hover bx-context-toolbar-button-text-hover bx-context-toolbar-button-arrow-hover"),this.bx_hover=!1)},BX.CMenuOpener.prototype.__menu_open=function(){this._menu_open=!0},BX.CMenuOpener.prototype.checkPosition=function(){this.isMenuVisible()||"none"==this.DIV.style.display||this==BX.proxy_context||BX.proxy_context.zIndex>this.zIndex||this.correctPosition(BX.proxy_context)},BX.CMenuOpener.prototype.correctPosition=function(t){var e=BX.pos(this.DIV),i=BX.pos(t.Get());if(this.__check_intersection(e,i)){var n=i.top-e.height;n<0&&(n=i.bottom),this.DIV.style.top=n+"px",BX.addCustomEvent(t,"onMenuOpenerHide",BX.proxy(this.restorePosition,this)),BX.onCustomEvent(this,"onMenuOpenerMoved")}},BX.CMenuOpener.prototype.restorePosition=function(){this.MOUSEOVER||this.isMenuVisible()?this.restore_pos_timeout=setTimeout(BX.proxy(this.restorePosition,this),this.timeout):(this.originalPos&&(this.DIV.style.top=this.originalPos.top+"px"),BX.removeCustomEvent(BX.proxy_context,"onMenuOpenerHide",BX.proxy(this.restorePosition,this)),this.restore_pos_timeout&&clearTimeout(this.restore_pos_timeout))},BX.CMenuOpener.prototype.Show=function(){BX.CMenuOpener.superclass.Show.apply(this,arguments),this.SetDraggable(this.PARTS.INNER.firstChild),this.DIV.style.width="auto",this.DIV.style.height="auto",this.PARAMS.pin?(this.bPosAdjusted=!0,this.bMoved=!0,this.PARAMS.top&&(this.DIV.style.top=this.PARAMS.top+"px"),this.PARAMS.left&&(this.DIV.style.left=this.PARAMS.left+"px"),this.DIV.style.display=!BX.admin.dynamic_mode||BX.admin.dynamic_mode_show_borders?"block":"none","block"==this.DIV.style.display&&setTimeout(BX.delegate(function(){BX.onCustomEvent(this,"onMenuOpenerUnhide")},this),50)):(this.DIV.style.left="-1000px",this.DIV.style.top="-1000px",this.Hide())},BX.CMenuOpener.prototype.executeDefaultAction=function(){this.defaultAction&&(BX.type.isFunction(this.defaultAction)?this.defaultAction():BX.type.isString(this.defaultAction)&&BX.evalGlobal(this.defaultAction))},BX.CMenuOpener.prototype.__onDynamicModeChange=function(t){this.DIV.style.display=t?"block":"none"},BX.CMenuOpener.prototype.__onPanelCollapse=function(t,e){this.DIV.style.top=parseInt(this.DIV.style.top)+e+"px",this.PARAMS.pin&&this.__savePosition()},BX.CMenuOpener.prototype.__onMoveFinished=function(){BX.onCustomEvent(this,"onMenuOpenerMoved"),this.bMoved=!0,this.PARAMS.pin&&this.__savePosition()},BX.CMenuOpener.prototype.__savePosition=function(){var t={};t.pin=this.PARAMS.pin,this.PARAMS.pin?(t.transform=this.PARAMS.transform,this.bMoved&&(t.left=parseInt(this.DIV.style.left),t.top=parseInt(this.DIV.style.top))):(t.top=!1,t.left=!1,t.transform=!1),BX.WindowManager.saveWindowOptions(this.PARAMS.component_id,t)},BX.CMenuOpener.prototype.__pin_btn_clicked=function(){this.Pin()},BX.CMenuOpener.prototype.Pin=function(t){this.PARAMS.pin=null==t?!this.PARAMS.pin:!!t,this.PARTS.ICON_PIN.className=this.PARAMS.pin?"bx-context-toolbar-pin-fixed":"bx-context-toolbar-pin",this.__savePosition()},BX.CMenuOpener.prototype.__trf_btn_clicked=function(){this.Transform()},BX.CMenuOpener.prototype.Transform=function(t){var e={};this.PARAMS.transform=null==t?!this.PARAMS.transform:!!t,this.bMoved&&(e=BX.pos(this.DIV)),this.PARAMS.transform?BX.addClass(this.DIV.firstChild,"bx-context-toolbar-vertical-mode"):BX.removeClass(this.DIV.firstChild,"bx-context-toolbar-vertical-mode"),this.bMoved?this.DIV.style.left=e.right-this.DIV.offsetWidth-(BX.browser.IsIE()&&!BX.browser.IsDoctype()?2:0)+"px":this.adjustPos(),this.__savePosition()},BX.CMenuOpener.prototype.adjustToNodeGetPos=function(){var t=BX.pos(this.PARAMS.parent),e=BX.GetWindowScrollSize(),i=this.DIV.offsetWidth;return t.left-=BX.admin.__border_dx,t.top-=BX.admin.__border_dx,t.top-=45,t.left>e.scrollWidth-i&&(t.left=e.scrollWidth-i),t},BX.CMenuOpener.prototype.addItem=function(t){if(t.TYPE)return this.EXTRA_BUTTONS[t.TYPE]=t,null;var e=new BX.CMenuOpenerItem(t);return null==this.defaultAction&&(e.item.ONCLICK?this.defaultAction=t.ONCLICK:e.item.MENU&&(this.defaultAction=BX.delegate(function(){this.Open()},e.item.OPENER)),this.defaultActionTitle=t.TITLE||t.TEXT,BX.addClass(e.Get(),"bx-content-toolbar-default")),e.item.OPENER&&(this.OPENERS[this.OPENERS.length]=e.item.OPENER),e.Get()},BX.CMenuOpener.prototype.attachMenu=function(t){var e=new BX.COpener({DIV:this.OPENER,ATTACH:this.ATTACH,MENU:t,TYPE:"click"});return this.OPENERS[this.OPENERS.length]=e},BX.CMenuOpener.prototype.__hide_hint=function(){this.HINT&&this.HINT.__hide_immediately()},BX.CMenuOpener.prototype.isMenuVisible=function(){for(var t=0,e=this.OPENERS.length;t<e;t++)if(this.OPENERS[t].isMenuVisible())return!0;return!1},BX.CMenuOpener.prototype.Hide=function(){this.PARAMS.pin||(this.DIV.style.display="none",BX.onCustomEvent(this,"onMenuOpenerHide"))},BX.CMenuOpener.prototype.UnHide=function(){this.DIV.style.display="block",this.bPosAdjusted||this.PARAMS.pin||(this.adjustPos(),this.bPosAdjusted=!0),null!=this.originalPos||this.bMoved||(this.originalPos=BX.pos(this.DIV)),BX.onCustomEvent(this,"onMenuOpenerUnhide")},BX.CMenuOpenerItem=function(t){this.item=t,this.item.ACTION&&!this.item.ONCLICK&&(this.item.ONCLICK=this.item.ACTION),this.DIV=BX.create("SPAN"),this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button-underlay"}})),this.WRAPPER=this.DIV.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-button-wrapper"},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button",title:t.TITLE},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-inner"}})]})]}));var e=BX.create("SPAN",{props:{className:"bx-context-toolbar-button-icon"+(this.item.ICON||this.item.ICONCLASS?" "+(this.item.ICON||this.item.ICONCLASS):"")},attrs:this.item.ICON||this.item.ICONCLASS||!this.item.SRC&&!this.item.IMAGE?{}:{style:"background: scroll transparent url("+(this.item.SRC||this.item.IMAGE)+") no-repeat center center !important;"}}),i=BX.create("SPAN",{props:{className:"bx-context-toolbar-button-text"},text:this.item.TEXT});this.item.ACTION&&!this.item.ONCLICK&&(this.item.ONCLICK=this.item.ACTION),this.bHasMenu=!!this.item.MENU,this.bHasAction=!!this.item.ONCLICK,this.bHasAction?(this.LINK=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},events:{mouseover:this.bHasMenu?BX.proxy(this.__msover_text,this):BX.proxy(this.__msover,this),mouseout:this.bHasMenu?BX.proxy(this.__msout_text,this):BX.proxy(this.__msout,this),mousedown:this.bHasMenu?BX.proxy(this.__msdown_text,this):BX.proxy(this.__msdown,this)},children:[e,i]})),this.bHasMenu&&(this.LINK_MENU=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{props:{className:"bx-context-toolbar-button-arrow"},attrs:{href:"javascript: void(0)"},events:{mouseover:BX.proxy(this.__msover_arrow,this),mouseout:BX.proxy(this.__msout_arrow,this),mousedown:BX.proxy(this.__msdown_arrow,this)},children:[BX.create("SPAN",{props:{className:"bx-context-toolbar-button-arrow"}})]})))):this.bHasMenu&&(this.item.ONCLICK=null,this.LINK=this.LINK_MENU=this.WRAPPER.firstChild.firstChild.appendChild(BX.create("A",{attrs:{href:"javascript: void(0)"},events:{mouseover:BX.proxy(this.__msover,this),mouseout:BX.proxy(this.__msout,this),mousedown:BX.proxy(this.__msdown,this)},children:[e,i]})),this.LINK.appendChild(BX.create("SPAN",{props:{className:"bx-context-toolbar-single-button-arrow"}}))),this.bHasMenu&&(this.item.SUBMENU=new BX.CMenu({ATTACH_MODE:"bottom",ITEMS:this.item.MENU,parent:this.LINK_MENU,parent_attach:this.WRAPPER.firstChild}),this.item.OPENER=new BX.COpener({DIV:this.LINK_MENU,TYPE:"click",MENU:this.item.SUBMENU}),BX.addCustomEvent(this.item.OPENER,"onOpenerMenuOpen",BX.proxy(this.__menu_open,this)),BX.addCustomEvent(this.item.OPENER,"onOpenerMenuClose",BX.proxy(this.__menu_close,this))),this.bHasAction&&BX.bind(this.LINK,"click",BX.delegate(this.__click,this))},BX.CMenuOpenerItem.prototype.Get=function(){return this.DIV},BX.CMenuOpenerItem.prototype.__msover=function(){this.bx_hover=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover")},BX.CMenuOpenerItem.prototype.__msout=function(){this.bx_hover=!1,this._menu_open||BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover bx-context-toolbar-button-active")},BX.CMenuOpenerItem.prototype.__msover_text=function(){this.bx_hover=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-hover")},BX.CMenuOpenerItem.prototype.__msout_text=function(){this.bx_hover=!1,this._menu_open||BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-hover bx-context-toolbar-button-text-active")},BX.CMenuOpenerItem.prototype.__msover_arrow=function(){this.bx_hover=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-hover")},BX.CMenuOpenerItem.prototype.__msout_arrow=function(){this.bx_hover=!1,this._menu_open||BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-hover bx-context-toolbar-button-arrow-active")},BX.CMenuOpenerItem.prototype.__msdown=function(){this.bx_active=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-active")},BX.CMenuOpenerItem.prototype.__msdown_text=function(){this.bx_active=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-text-active")},BX.CMenuOpenerItem.prototype.__msdown_arrow=function(){this.bx_active=!0,this._menu_open||BX.addClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-arrow-active")},BX.CMenuOpenerItem.prototype.__menu_close=function(){this._menu_open=!1,this.bx_active=!1,BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-active bx-context-toolbar-button-text-active bx-context-toolbar-button-arrow-active"),this.bx_hover||(BX.removeClass(this.LINK.parentNode.parentNode,"bx-context-toolbar-button-hover bx-context-toolbar-button-text-hover bx-context-toolbar-button-arrow-hover"),this.bx_hover=!1)},BX.CMenuOpenerItem.prototype.__menu_open=function(){this._menu_open=!0},BX.CMenuOpenerItem.prototype.__click=function(){BX.evalGlobal(this.item.ONCLICK)},BX.CPageOpener=function(t){BX.CPageOpener.superclass.constructor.apply(this,arguments),this.timeout=505,window.PAGE_EDIT_CONTROL=this},BX.extend(BX.CPageOpener,BX.CMenuOpener),BX.CPageOpener.prototype.checkPosition=function(){this!=BX.proxy_context&&this.correctPosition(BX.proxy_context)},BX.CPageOpener.prototype.correctPosition=function(t){if(!this.bPosCorrected){var e;"none"==this.DIV.style.display?((e=this.adjustToNodeGetPos()).bottom=e.top+30,e.right=e.left+300):e=BX.pos(this.DIV);var i=BX.pos(t.Get());this.__check_intersection(e,i)&&(this.DIV.style.display="none",BX.addCustomEvent(t,"onMenuOpenerHide",BX.proxy(this.restorePosition,this)),this.bPosCorrected=!0)}},BX.CPageOpener.prototype.restorePosition=function(){BX.proxy_context&&"none"==BX.proxy_context.Get().style.display&&(this.bPosCorrected=!1,(this.PARAMS.parent.bx_over||this.PARAMS.pin)&&this.UnHide(),BX.removeCustomEvent("onMenuOpenerHide",BX.proxy(this.restorePosition,this)))},BX.CPageOpener.prototype.UnHide=function(){this.bPosCorrected||BX.CPageOpener.superclass.UnHide.apply(this,arguments)},BX.CPageOpener.prototype.Remove=function(){BX.admin.removeComponentBorder(this.PARAMS.parent),BX.userOptions.save("global","settings","page_edit_control_enable","N"),this.DIV.style.display="none"},BX.CHintSimple=function(){BX.CHintSimple.superclass.constructor.apply(this,arguments)},BX.extend(BX.CHintSimple,BX.CHint),BX.CHintSimple.prototype.Init=function(){this.DIV=document.body.appendChild(BX.create("DIV",{props:{className:"bx-tooltip-simple"},style:{display:"none"},children:[this.CONTENT=BX.create("DIV")]})),this.HINT_TITLE&&this.CONTENT.appendChild(BX.create("B",{text:this.HINT_TITLE})),this.HINT&&(this.CONTENT_TEXT=this.CONTENT.appendChild(BX.create("DIV")).appendChild(BX.create("SPAN",{html:this.HINT}))),this.PARAMS.preventHide&&(BX.bind(this.DIV,"mouseout",BX.proxy(this.Hide,this)),BX.bind(this.DIV,"mouseover",BX.proxy(this.Show,this))),this.bInited=!0},BX.adminInformer={itemsShow:3,Init:function(t){t&&(BX.adminInformer.itemsShow=t);var e=BX("admin-informer");e&&document.body.appendChild(e),BX.addCustomEvent("onTopPanelCollapse",BX.proxy(BX.adminInformer.Close,BX.adminInformer))},Toggle:function(t){var e=BX("admin-informer");if(!e)return!1;var i=BX.pos(t);return e.style.top=parseInt(i.top)+parseInt(i.height)+7+"px",e.style.left=i.left+"px",BX.hasClass(e,"adm-informer-active")?BX.adminInformer.Hide(e):BX.adminInformer.Show(e),!1},Close:function(){BX.adminInformer.Hide(BX("admin-informer"))},OnInnerClick:function(t){var e=t.target||t.srcElement;return"a"==e.nodeName.toLowerCase()&&!BX.hasClass(e,"adm-informer-footer")||BX.PreventDefault(t)},ToggleExtra:function(){var t=BX("adm-informer-footer");return BX.hasClass(t,"adm-informer-footer-collapsed")?this.ShowAll():this.HideExtra(),!1},ShowAll:function(){for(var t=BX("admin-informer"),e=0;e<t.children.length;e++)BX.hasClass(t.children[e],"adm-informer-item")&&"none"==t.children[e].style.display&&(t.children[e].style.display="block");var i=BX("adm-informer-footer");return void 0!==i.textContent?i.textContent=BX.message("JSADM_AI_HIDE_EXTRA"):i.innerText=BX.message("JSADM_AI_HIDE_EXTRA"),BX.removeClass(i,"adm-informer-footer-collapsed"),!1},HideExtra:function(){for(var t=BX("admin-informer"),e=0,i=BX.adminInformer.itemsShow+1;i<t.children.length;i++)BX.hasClass(t.children[i],"adm-informer-item")&&"block"==t.children[i].style.display&&(t.children[i].style.display="none",e++);var n=BX("adm-informer-footer"),o=BX.message("JSADM_AI_ALL_NOTIF")+" ("+(BX.adminInformer.itemsShow+parseInt(e))+")";return void 0!==n.textContent?n.textContent=o:n.innerText=o,BX.addClass(n,"adm-informer-footer-collapsed"),!1},Show:function(t){var e=BX("adm-header-notif-block");e&&BX.addClass(e,"adm-header-notif-block-active"),BX.onCustomEvent(t,"onBeforeAdminInformerShow"),setTimeout(BX.proxy(function(){BX.bind(document,"click",BX.proxy(BX.adminInformer.Close,BX.adminInformer))},BX.adminInformer),0),BX.addClass(t,"adm-informer-active"),setTimeout(function(){BX.addClass(t,"adm-informer-animate")},0)},Hide:function(t){var e=BX("adm-header-notif-block");e&&BX.removeClass(e,"adm-header-notif-block-active"),BX.unbind(document,"click",BX.proxy(BX.adminInformer.Close,BX.adminInformer)),BX.removeClass(t,"adm-informer-animate"),this.IsAnimationSupported()?setTimeout(function(){BX.removeClass(t,"adm-informer-active")},300):BX.removeClass(t,"adm-informer-active"),BX.onCustomEvent(t,"onAdminInformerHide")},IsAnimationSupported:function(){var t=document.body||document.documentElement;return"string"==typeof t.style.transition||("string"==typeof t.style.MozTransition||("string"==typeof t.style.OTransition||("string"==typeof t.style.WebkitTransition||"string"==typeof t.style.msTransition)))},SetItemHtml:function(t,e){var i=BX("adm-informer-item-html-"+t);return!!i&&(i.innerHTML=e,!0)},SetItemFooter:function(t,e){var i=BX("adm-informer-item-footer-"+t);return!!i&&(i.innerHTML=e,i.style.display=e?"block":"none",!0)}})}(window),function(){if(!BX.date){BX.date={},BX.date.format=function(t,e,i,n){var o=BX.type.isDate(e)?new Date(e.getTime()):BX.type.isNumber(e)?new Date(1e3*e):new Date,s=BX.type.isDate(i)?new Date(i.getTime()):BX.type.isNumber(i)?new Date(1e3*i):new Date,r=!!n;if(BX.type.isArray(t))return function(t,e,i,n){for(var o=v((i-e)/1e3),s=0;s<t.length;s++){var r=t[s][0],a=t[s][1],l=null;if("s"==r){if(o<60)return BX.date.format(a,e,i,n)}else if(null!=(l=/^s(\d+)/.exec(r))){if(o<l[1])return BX.date.format(a,e,i,n)}else if("i"==r){if(o<3600)return BX.date.format(a,e,i,n)}else if(null!=(l=/^i(\d+)/.exec(r))){if(o<60*l[1])return BX.date.format(a,e,i,n)}else if("H"==r){if(o<86400)return BX.date.format(a,e,i,n)}else if(null!=(l=/^H(\d+)/.exec(r))){if(o<60*l[1]*60)return BX.date.format(a,e,i,n)}else if("d"==r){if(o<2678400)return BX.date.format(a,e,i,n)}else if(null!=(l=/^d(\d+)/.exec(r))){if(o<60*l[1]*60)return BX.date.format(a,e,i,n)}else if("m"==r){if(o<31536e3)return BX.date.format(a,e,i,n)}else if(null!=(l=/^m(\d+)/.exec(r))){if(o<31*l[1]*24*60*60)return BX.date.format(a,e,i,n)}else if("today"==r){var h=y(i),p=X(i),u=g(i),c=n?new Date(Date.UTC(h,p,u,0,0,0,0)):new Date(h,p,u,0,0,0,0),d=n?new Date(Date.UTC(h,p,u+1,0,0,0,0)):new Date(h,p,u+1,0,0,0,0);if(c<=e&&e<d)return BX.date.format(a,e,i,n)}else if("yesterday"==r){h=y(i),p=X(i),u=g(i);var f=n?new Date(Date.UTC(h,p,u-1,0,0,0,0)):new Date(h,p,u-1,0,0,0,0),m=n?new Date(Date.UTC(h,p,u,0,0,0,0)):new Date(h,p,u,0,0,0,0);if(f<=e&&e<m)return BX.date.format(a,e,i,n)}else if("tommorow"==r){h=y(i),p=X(i),u=g(i);var B=n?new Date(Date.UTC(h,p,u+1,0,0,0,0)):new Date(h,p,u+1,0,0,0,0),_=n?new Date(Date.UTC(h,p,u+2,0,0,0,0)):new Date(h,p,u+2,0,0,0,0);if(B<=e&&e<_)return BX.date.format(a,e,i,n)}else if("-"==r&&o<0)return BX.date.format(a,e,i,n)}return 0<t.length?BX.date.format(t.pop()[1],e,i,n):""}(t,o,s,r);if(!BX.type.isNotEmptyString(t))return"";var a=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|yesterday|today|tommorow|[a-z])/gi,l={d:function(){return BX.util.str_pad_left(g(o).toString(),2,"0")},D:function(){return BX.message("DOW_"+c(o))},j:function(){return g(o)},l:function(){return BX.message("DAY_OF_WEEK_"+c(o))},N:function(){return c(o)||7},S:function(){return g(o)%10==1&&11!=g(o)?"st":g(o)%10==2&&12!=g(o)?"nd":g(o)%10==3&&13!=g(o)?"rd":"th"},w:function(){return c(o)},z:function(){var t=new Date(y(o),0,1),e=new Date(y(o),X(o),g(o));return Math.ceil((e-t)/864e5)},W:function(){var t=new Date(o.getTime()),e=(c(o)+6)%7;d(t,g(t)-e+3);var i=t.getTime();f(t,0,1),4!=c(t)&&f(t,0,1+(4-c(t)+7)%7);var n=1+Math.ceil((i-t)/6048e5);return BX.util.str_pad_left(n.toString(),2,"0")},F:function(){return BX.message("MONTH_"+(X(o)+1)+"_S")},f:function(){return BX.message("MONTH_"+(X(o)+1))},m:function(){return BX.util.str_pad_left((X(o)+1).toString(),2,"0")},M:function(){return BX.message("MON_"+(X(o)+1))},n:function(){return X(o)+1},t:function(){return g(r?new Date(Date.UTC(y(o),X(o)+1,0)):new Date(y(o),X(o)+1,0))},L:function(){var t=y(o);return t%4==0&&t%100!=0||t%400==0?1:0},o:function(){var t=new Date(o.getTime());return d(t,g(t)-(c(o)+6)%7+3),y(t)},Y:function(){return y(o)},y:function(){return y(o).toString().slice(2)},a:function(){return 11<u(o)?"pm":"am"},A:function(){return 11<u(o)?"PM":"AM"},B:function(){var t=(o.getUTCHours()+1)%24+o.getUTCMinutes()/60+o.getUTCSeconds()/3600;return BX.util.str_pad_left(Math.floor(1e3*t/24).toString(),3,"0")},g:function(){return u(o)%12||12},G:function(){return u(o)},h:function(){return BX.util.str_pad_left((u(o)%12||12).toString(),2,"0")},H:function(){return BX.util.str_pad_left(u(o).toString(),2,"0")},i:function(){return BX.util.str_pad_left((t=o,r?t.getUTCMinutes():t.getMinutes()).toString(),2,"0");var t},s:function(){return BX.util.str_pad_left((t=o,r?t.getUTCSeconds():t.getSeconds()).toString(),2,"0");var t},u:function(){return BX.util.str_pad_left((1e3*(t=o,r?t.getUTCMilliseconds():t.getMilliseconds())).toString(),6,"0");var t},e:function(){return r?"UTC":""},I:function(){return r?0:0+(new Date(y(o),0,1)-Date.UTC(y(o),0,1)!=new Date(y(o),6,0)-Date.UTC(y(o),6,0))},O:function(){if(r)return"+0000";var t=o.getTimezoneOffset(),e=Math.abs(t);return(0<t?"-":"+")+BX.util.str_pad_left((100*Math.floor(e/60)+e%60).toString(),4,"0")},P:function(){if(r)return"+00:00";var t=this.O();return t.substr(0,3)+":"+t.substr(3)},Z:function(){return r?0:60*-o.getTimezoneOffset()},c:function(){return"Y-m-d\\TH:i:sP".replace(a,B)},r:function(){return"D, d M Y H:i:s O".replace(a,B)},U:function(){return Math.floor(o.getTime()/1e3)},sago:function(){return m(v((s-o)/1e3),{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"})},sdiff:function(){return m(v((s-o)/1e3),{0:"FD_SECOND_DIFF_0",1:"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"})},iago:function(){return m(v((s-o)/60/1e3),{0:"FD_MINUTE_AGO_0",1:"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"})},idiff:function(){return m(v((s-o)/60/1e3),{0:"FD_MINUTE_DIFF_0",1:"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"})},isago:function(){var t=v((s-o)/60/1e3),e=m(t,{0:"FD_MINUTE_0",1:"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});return e+=" ",e+=m(v((s-o)/1e3)-60*t,{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"})},Hago:function(){return m(v((s-o)/60/60/1e3),{0:"FD_HOUR_AGO_0",1:"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"})},Hdiff:function(){return m(v((s-o)/60/60/1e3),{0:"FD_HOUR_DIFF_0",1:"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"})},yesterday:function(){return BX.message("FD_YESTERDAY")},today:function(){return BX.message("FD_TODAY")},tommorow:function(){return BX.message("FD_TOMORROW")},dago:function(){return m(v((s-o)/60/60/24/1e3),{0:"FD_DAY_AGO_0",1:"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"})},ddiff:function(){return m(v((s-o)/60/60/24/1e3),{0:"FD_DAY_DIFF_0",1:"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"})},mago:function(){return m(v((s-o)/60/60/24/31/1e3),{0:"FD_MONTH_AGO_0",1:"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"})},mdiff:function(){return m(v((s-o)/60/60/24/31/1e3),{0:"FD_MONTH_DIFF_0",1:"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"})},Yago:function(){return m(v((s-o)/60/60/24/365/1e3),{0:"FD_YEARS_AGO_0",1:"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"})},Ydiff:function(){return m(v((s-o)/60/60/24/365/1e3),{0:"FD_YEARS_DIFF_0",1:"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"})},x:function(){return BX.date.format([["tommorow","tommorow, H:i"],["-",BX.date.convertBitrixFormat(BX.message("FORMAT_DATETIME")).replace(/:s$/g,"")],["s","sago"],["i","iago"],["today","today, H:i"],["yesterday","yesterday, H:i"],["",BX.date.convertBitrixFormat(BX.message("FORMAT_DATETIME")).replace(/:s$/g,"")]],o,s,r)},X:function(){var t=BX.date.format([["tommorow","tommorow"],["-",BX.date.convertBitrixFormat(BX.message("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",BX.date.convertBitrixFormat(BX.message("FORMAT_DATE"))]],o,s,r),e=BX.date.format([["tommorow","H:i"],["today","H:i"],["yesterday","H:i"],["",""]],o,s,r);return 0<e.length?BX.message("FD_DAY_AT_TIME").replace(/#DAY#/g,t).replace(/#TIME#/g,e):t},Q:function(){return 0==v((s-o)/60/60/24/1e3)?BX.message("FD_DAY_DIFF_1").replace(/#VALUE#/g,1):BX.date.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],o,s)}},h=!1;t[0]&&"^"==t[0]&&(h=!0,t=t.substr(1));var p=t.replace(a,B);return h&&(p=p.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")),p;function y(t){return r?t.getUTCFullYear():t.getFullYear()}function g(t){return r?t.getUTCDate():t.getDate()}function X(t){return r?t.getUTCMonth():t.getMonth()}function u(t){return r?t.getUTCHours():t.getHours()}function c(t){return r?t.getUTCDay():t.getDay()}function d(t,e){return r?t.setUTCDate(e):t.setDate(e)}function f(t,e,i){return r?t.setUTCMonth(e,i):t.setMonth(e,i)}function m(t,e){var i=t<100?Math.abs(t):Math.abs(t%100),n=i%10;return(0==i?BX.message(e[0]):1==i?BX.message(e[1]):10<=i&&i<=20?BX.message(e["10_20"]):1==n?BX.message(e.MOD_1):2<=n&&n<=4?BX.message(e.MOD_2_4):BX.message(e.MOD_OTHER)).replace(/#VALUE#/g,t)}function B(t,e){return l[t]?l[t]():e}function v(t){return 0<=t?Math.floor(t):Math.ceil(t)}},BX.date.convertBitrixFormat=function(t){return BX.type.isNotEmptyString(t)?t.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a"):""},BX.date.convertToUTC=function(t){return BX.type.isDate(t)?new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())):null},BX.date.getNewDate=function(t){return new Date(BX.date.getBrowserTimestamp(t))},BX.date.getBrowserTimestamp=function(t){t=parseInt(t,10);var e=60*new Date(1e3*t).getTimezoneOffset();return 1e3*(parseInt(t,10)+parseInt(BX.message("SERVER_TZ_OFFSET"))+e)},BX.date.getServerTimestamp=function(t){t=parseInt(t,10);var e=60*new Date(t).getTimezoneOffset();return Math.round(t/1e3-(parseInt(BX.message("SERVER_TZ_OFFSET"),10)+parseInt(e,10)))};var t=null;BX.calendar=function(t){return BX.calendar.get().Show(t)},BX.calendar.get=function(){return t||(t=new BX.JCCalendar),t},BX.calendar.InsertDaysBack=function(t,e){if(""!=e){var i=new Date;0<e&&i.setTime(i.valueOf()-864e5*e),t.value=BX.date.format(BX.date.convertBitrixFormat(BX.message("FORMAT_DATE")),i,null)}else t.value=""},BX.calendar.ValueToString=function(t,e,i){return BX.date.format(BX.date.convertBitrixFormat(BX.message(e?"FORMAT_DATETIME":"FORMAT_DATE")),t,null,!!i)},BX.CalendarPeriod={Init:function(t,e,i){""==t.value&&""==e.value||""!=i.value||(i.value="interval"),i.onchange()},ChangeDirectOpts:function(t,e){var i=BX.findChild(e,{className:"adm-select adm-calendar-direction"},!0);i.options[2].text="week"==t?(i.options[0].text=BX.message("JSADM_CALEND_PREV_WEEK"),i.options[1].text=BX.message("JSADM_CALEND_CURR_WEEK"),BX.message("JSADM_CALEND_NEXT_WEEK")):(i.options[0].text=BX.message("JSADM_CALEND_PREV"),i.options[1].text=BX.message("JSADM_CALEND_CURR"),BX.message("JSADM_CALEND_NEXT"))},SaveAndClearInput:function(t){window.SavedPeriodValues||(window.SavedPeriodValues={}),window.SavedPeriodValues[t.id]=t.value,t.value=""},RestoreInput:function(t){window.SavedPeriodValues&&window.SavedPeriodValues[t.id]&&(t.value=window.SavedPeriodValues[t.id],delete window.SavedPeriodValues[t.id])},OnChangeP:function(t){var e,i,n,o,s=t.parentNode.parentNode;e=i=n=o=!1;var r=BX.findChild(s,{className:"adm-input-wrap adm-calendar-inp adm-calendar-first"}),a=BX.findChild(s,{className:"adm-input-wrap adm-calendar-second"}),l=BX.findChild(s,{className:"adm-select-wrap adm-calendar-direction"}),h=BX.findChild(s,{className:"adm-calendar-separate"}),p=BX.findChild(s,{className:"adm-input adm-calendar-from"},!0),u=BX.findChild(s,{className:"adm-input adm-calendar-to"},!0);switch(t.value){case"day":case"week":case"month":case"quarter":case"year":n=!0,BX.CalendarPeriod.OnChangeD(l.children[0]);break;case"before":i=!0;break;case"after":case"exact":e=!0;break;case"interval":e=i=o=!0,BX.CalendarPeriod.RestoreInput(p),BX.CalendarPeriod.RestoreInput(u);break;case"":BX.CalendarPeriod.SaveAndClearInput(p),BX.CalendarPeriod.SaveAndClearInput(u)}BX.CalendarPeriod.ChangeDirectOpts(t.value,s),r.style.display=e?"inline-block":"none",a.style.display=i?"inline-block":"none",l.style.display=n?"inline-block":"none",h.style.display=o?"inline-block":"none"},OnChangeD:function(t){var e=t.parentNode.parentNode,i=BX.findChild(e,{className:"adm-input adm-calendar-from"},!0),n=BX.findChild(e,{className:"adm-input adm-calendar-to"},!0),o=BX.findChild(e,{className:"adm-select adm-calendar-period"},!0),s=0;switch(t.value){case"previous":s=-1;break;case"next":s=1}var r=!1,a=!1,l=new Date,h=l.getFullYear(),p=l.getMonth(),u=l.getDate(),c=l.getDay();switch(0==c&&(c=7),o.value){case"day":r=new Date(h,p,u+s,0,0,0),a=new Date(h,p,u+s,23,59,59);break;case"week":r=new Date(h,p,u-c+1+7*s,0,0,0),a=new Date(h,p,u+(7-c)+7*s,23,59,59);break;case"month":r=new Date(h,p+s,1,0,0,0),a=new Date(h,p+1+s,0,23,59,59);break;case"quarter":var d=Math.floor(p/3)+s;r=new Date(h,3*d,1,0,0,0),a=new Date(h,3*(d+1),0,23,59,59);break;case"year":r=new Date(h+s,0,1,0,0,0),a=new Date(h+1+s,0,0,23,59,59)}var f=window[i.name+"_bTime"]?BX.message("FORMAT_DATETIME"):BX.message("FORMAT_DATE");r&&(i.value=BX.formatDate(r,f),BX.addClass(i,"adm-calendar-inp-setted")),a&&(n.value=BX.formatDate(a,f),BX.addClass(n,"adm-calendar-inp-setted"))}},BX.JCCalendar=function(){this.params={},this.bAmPm=BX.isAmPmMode(),this.popup=null,this.popup_month=null,this.popup_year=null,this.value=null,this.control_id=Math.random(),this._layers={},this._current_layer=null,this.DIV=null,this.PARTS={},this.weekStart=0,this.numRows=6,this._create=function(t){this.popup=new BX.PopupWindow("calendar_popup_"+this.control_id,t.node,{closeByEsc:!0,autoHide:!1,content:this._get_content(),zIndex:3e3,bindOptions:{forceBindPosition:!0}}),BX.bind(this.popup.popupContainer,"click",this.popup.cancelBubble)},this._auto_hide_disable=function(){BX.unbind(document,"click",BX.proxy(this._auto_hide,this))},this._auto_hide_enable=function(){BX.bind(document,"click",BX.proxy(this._auto_hide,this))},this._auto_hide=function(t){this._auto_hide_disable(),this.popup.close()},this._get_content=function(){var t=BX.delegate(function(t){t=t||window.event,this.SetDate(new Date(parseInt(BX.proxy_context.getAttribute("data-date"))),"dblclick"==t.type)},this);this.DIV=BX.create("DIV",{props:{className:"bx-calendar"},children:[BX.create("DIV",{props:{className:"bx-calendar-header"},children:[BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-calendar-left-arrow"},events:{click:BX.proxy(this._prev,this)}}),BX.create("SPAN",{props:{className:"bx-calendar-header-content"},children:[this.PARTS.MONTH=BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-calendar-top-month"},events:{click:BX.proxy(this._menu_month,this)}}),this.PARTS.YEAR=BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-calendar-top-year"},events:{click:BX.proxy(this._menu_year,this)}})]}),BX.create("A",{attrs:{href:"javascript:void(0)"},props:{className:"bx-calendar-right-arrow"},events:{click:BX.proxy(this._next,this)}})]}),this.PARTS.WEEK=BX.create("DIV",{props:{className:"bx-calendar-name-day-wrap"}}),this.PARTS.LAYERS=BX.create("DIV",{props:{className:"bx-calendar-cell-block"},events:{click:BX.delegateEvent({className:"bx-calendar-cell"},t),dblclick:BX.delegateEvent({className:"bx-calendar-cell"},t)}}),this.PARTS.TIME=BX.create("DIV",{props:{className:"bx-calendar-set-time-wrap"},events:{click:BX.delegateEvent({attr:"data-action"},BX.delegate(this._time_actions,this))},html:'<a href="javascript:void(0)" data-action="time_show" class="bx-calendar-set-time"><i></i>'+BX.message("CAL_TIME_SET")+'</a><div class="bx-calendar-form-block"><span class="bx-calendar-form-text">'+BX.message("CAL_TIME")+'</span><span class="bx-calendar-form"><input type="text" class="bx-calendar-form-input" maxwidth="2" onkeyup="BX.calendar.get()._check_time()" /><span class="bx-calendar-form-separator"></span><input type="text" class="bx-calendar-form-input" maxwidth="2" onkeyup="BX.calendar.get()._check_time()" />'+(this.bAmPm?'<span class="bx-calendar-AM-PM-block"><span class="bx-calendar-AM-PM-text" data-action="time_ampm"></span><span class="bx-calendar-form-arrow-r"><a href="javascript:void(0)" class="bx-calendar-form-arrow-top" data-action="time_ampm_up"><i></i></a><a href="javascript:void(0)" class="bx-calendar-form-arrow-bottom" data-action="time_ampm_down"><i></i></a></span></span>':"")+'</span><a href="javascript:void(0)" data-action="time_hide" class="bx-calendar-form-close"><i></i></a></div>'}),BX.create("DIV",{props:{className:"bx-calendar-button-block"},events:{click:BX.delegateEvent({attr:"data-action"},BX.delegate(this._button_actions,this))},html:'<a href="javascript:void(0)" class="bx-calendar-button bx-calendar-button-select" data-action="submit"><span class="bx-calendar-button-left"></span><span class="bx-calendar-button-text">'+BX.message("CAL_BUTTON")+'</span><span class="bx-calendar-button-right"></span></a><a href="javascript:void(0)" class="bx-calendar-button bx-calendar-button-cancel" data-action="cancel"><span class="bx-calendar-button-left"></span><span class="bx-calendar-button-text">'+BX.message("JS_CORE_WINDOW_CLOSE")+'</span><span class="bx-calendar-button-right"></span></a>'})]}),this.PARTS.TIME_INPUT_H=BX.findChild(this.PARTS.TIME,{tag:"INPUT"},!0),this.PARTS.TIME_INPUT_M=this.PARTS.TIME_INPUT_H.nextSibling.nextSibling,this.bAmPm&&(this.PARTS.TIME_AMPM=this.PARTS.TIME_INPUT_M.nextSibling.firstChild);var e=new BX.JCSpinner({input:this.PARTS.TIME_INPUT_H,callback_change:BX.proxy(this._check_time,this),bSaveValue:!1}).Show();e.className="bx-calendar-form-arrow-l",this.PARTS.TIME_INPUT_H.parentNode.insertBefore(e,this.PARTS.TIME_INPUT_H),(e=new BX.JCSpinner({input:this.PARTS.TIME_INPUT_M,callback_change:BX.proxy(this._check_time,this),bSaveValue:!0}).Show()).className="bx-calendar-form-arrow-r",this.PARTS.TIME_INPUT_M.nextSibling?this.PARTS.TIME_INPUT_M.parentNode.insertBefore(e,this.PARTS.TIME_INPUT_M.nextSibling):this.PARTS.TIME_INPUT_M.parentNode.appendChild(e);for(var i=0;i<7;i++)this.PARTS.WEEK.appendChild(BX.create("SPAN",{props:{className:"bx-calendar-name-day"},text:BX.message("DOW_"+(i+this.weekStart)%7)}));return this.DIV},this._time_actions=function(){switch(BX.proxy_context.getAttribute("data-action")){case"time_show":BX.addClass(this.PARTS.TIME,"bx-calendar-set-time-opened"),this.popup.adjustPosition();break;case"time_hide":BX.removeClass(this.PARTS.TIME,"bx-calendar-set-time-opened"),this.popup.adjustPosition();break;case"time_ampm":this.PARTS.TIME_AMPM.innerHTML="AM"==this.PARTS.TIME_AMPM.innerHTML?"PM":"AM";break;case"time_ampm_up":return void this._check_time({bSaveValue:!1},null,12);case"time_ampm_down":return void this._check_time({bSaveValue:!1},null,-12)}this._check_time()},this._button_actions=function(){switch(BX.proxy_context.getAttribute("data-action")){case"submit":this.SaveValue();break;case"cancel":this.Close()}},this._check_time=function(t,e,i){var n=parseInt(this.PARTS.TIME_INPUT_H.value.substring(0,5),10)||0,o=parseInt(this.PARTS.TIME_INPUT_M.value.substring(0,5),10)||0,s=!1;t&&!t.bSaveValue?this.value.setUTCHours(this.value.getUTCHours()+i):isNaN(n)||(this.bAmPm&&12!=n&&"PM"==this.PARTS.TIME_AMPM.innerHTML&&(n+=12),s=!0,this.value.setUTCHours(n%24)),isNaN(o)||(s=!0,this.value.setUTCMinutes(o%60)),s&&this.SetValue(this.value)},this._set_layer=function(){var t=parseInt(this.value.getUTCFullYear()+""+BX.util.str_pad_left(this.value.getUTCMonth()+"",2,"0"));if(this._layers[t]||(this._layers[t]=this._create_layer(),this._layers[t].BXLAYERID=t),this._current_layer){var e=new Date(this.value.valueOf());e.setUTCHours(0),e.setUTCMinutes(0);var i=BX.findChild(this._layers[t],{tag:"A",className:"bx-calendar-active"},!0),n=BX.findChild(this._layers[t],{tag:"A",attr:{"data-date":e.valueOf()+""}},!0);i&&BX.removeClass(i,"bx-calendar-active"),n&&BX.addClass(n,"bx-calendar-active"),this._replace_layer(this._current_layer,this._layers[t])}else this.PARTS.LAYERS.appendChild(this._layers[t]);this._current_layer=this._layers[t]},this._replace_layer=function(t,e){if(t!=e)if(!BX.browser.IsIE()||BX.browser.IsDoctype()){var i=t.BXLAYERID>e.BXLAYERID?1:-1,n=0,o=-i*t.offsetHeight;t.style.position="relative",t.style.top="0px",t.style.zIndex=5,e.style.position="absolute",e.style.top=o+"px",e.style.zIndex=6,this.PARTS.LAYERS.appendChild(e);var s;(s=function(){n+=15*i,i*(o+=15*i)<0?(t.style.top=n+"px",e.style.top=o+"px",setTimeout(s,10)):(t.parentNode.removeChild(t),e.style.top="0px",e.style.position="static",e.style.zIndex=0)})()}else this.PARTS.LAYERS.replaceChild(e,t)},this._create_layer=function(){var t=BX.create("DIV",{props:{className:"bx-calendar-layer"}}),e=new Date(this.value);if(e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCDate(1),e.getUTCDay()!=this.weekStart){var i=e.getUTCDay()-this.weekStart;i+=i<0?7:0,e.setUTCDate(e.getUTCDate()-i)}for(var n=this.value.getUTCMonth(),o=this.value.getUTCDate(),s="",r=0;r<this.numRows;r++){s+='<div class="bx-calendar-range'+(r==this.numRows-1?" bx-calendar-range-noline":"")+'">';for(var a=0;a<7;a++){i=e.getUTCDate();var l=e.getUTCDay(),h="bx-calendar-cell";n!=e.getUTCMonth()?h+=" bx-calendar-date-hidden":o==i&&(h+=" bx-calendar-active"),0!=l&&6!=l||(h+=" bx-calendar-weekend"),s+='<a href="javascript:void(0)" class="'+h+'" data-date="'+e.valueOf()+'">'+i+"</a>",e.setUTCDate(e.getUTCDate()+1)}s+="</div>"}return t.innerHTML=s,t},this._prev=function(){this.SetMonth(this.value.getUTCMonth()-1)},this._next=function(){this.SetMonth(this.value.getUTCMonth()+1)},this._menu_month_content=function(){var t,e="",i=this.value.getMonth();for(t=0;t<12;t++)e+='<a href="javascript:void(0)" class="bx-calendar-month'+(t==i?" bx-calendar-month-active":"")+'" onclick="BX.calendar.get().SetMonth('+t+')">'+BX.message("MONTH_"+(t+1))+"</a>";return'<div class="bx-calendar-month-popup"><div class="bx-calendar-month-title" onclick="BX.calendar.get().popup_month.close();">'+BX.message("MONTH_"+(this.value.getUTCMonth()+1))+'</div><div class="bx-calendar-month-content">'+e+"</div></div>"},this._menu_month=function(){this.popup_month?this.popup_month.BXMONTH!=this.value.getUTCMonth()&&(this.popup_month.setContent(this._menu_month_content()),this.popup_month.BXMONTH=this.value.getUTCMonth()):(this.popup_month=new BX.PopupWindow("calendar_popup_month_"+this.control_id,this.PARTS.MONTH,{content:this._menu_month_content(),zIndex:3001,closeByEsc:!0,autoHide:!0,offsetTop:-29,offsetLeft:-1,events:{onPopupShow:BX.delegate(function(){this.popup_year&&this.popup_year.close()},this)}}),this.popup_month.BXMONTH=this.value.getUTCMonth()),this.popup_month.show()},this._menu_year_content=function(){for(var t='<div class="bx-calendar-year-popup"><div class="bx-calendar-year-title" onclick="BX.calendar.get().popup_year.close();">'+this.value.getUTCFullYear()+'</div><div class="bx-calendar-year-content" id="bx-calendar-year-content">',e=-3;e<=3;e++)t+='<a href="javascript:void(0)" class="bx-calendar-year-number'+(0==e?" bx-calendar-year-active":"")+'" onclick="BX.calendar.get().SetYear('+(this.value.getUTCFullYear()-e)+')">'+(this.value.getUTCFullYear()-e)+"</a>";return t+='</div><input type="text" class="bx-calendar-year-input" onkeyup="if(this.value>=1900&&this.value<=2100)BX.calendar.get().SetYear(this.value);" maxlength="4" /></div>'},this._menu_year=function(){this.popup_year?this.popup_year.BXYEAR!=this.value.getUTCFullYear()&&(this.popup_year.setContent(this._menu_year_content()),this.popup_year.BXYEAR=this.value.getUTCFullYear()):(this.popup_year=new BX.PopupWindow("calendar_popup_year_"+this.control_id,this.PARTS.YEAR,{content:this._menu_year_content(),zIndex:3001,closeByEsc:!0,autoHide:!0,offsetTop:-29,offsetLeft:-1,events:{onPopupShow:BX.delegate(function(){this.popup_month&&this.popup_month.close()},this)}}),this.popup_year.BXYEAR=this.value.getUTCFullYear()),this.popup_year.show()},this._check_date=function(t){var e=t;return BX.type.isString(t)&&(e=BX.parseDate(t,!0)),BX.type.isDate(e)&&!isNaN(e.valueOf())||(e=BX.date.convertToUTC(new Date),this.params.bHideTime&&(e.setUTCHours(0),e.setUTCMinutes(0))),e.setUTCMilliseconds(0),e.setUTCSeconds(0),e.BXCHECKED=!0,e}},BX.JCCalendar.prototype.Show=function(t){if(BX.isReady){if(t.node=t.node||document.body,BX.type.isNotEmptyString(t.node)){var e=BX(t.node);e||(e=document.getElementsByName(t.node))&&0<e.length&&(e=e[0]),t.node=e}if(t.node){t.field&&BX.type.isString(t.field)&&((e=BX(t.field))?t.field=e:(t.form&&BX.type.isString(t.form)&&(t.form=document.forms[t.form]),BX.type.isDomNode(t.form)&&t.form[t.field]?t.field=t.form[t.field]:(e=document.getElementsByName(t.field))&&0<e.length&&(e=e[0],t.field=e)),BX.type.isString(t.field)&&(t.field=BX(t.field)));var i=!this.popup||!this.popup.isShown()||this.params.node!=t.node;this.params=t,this.params.bTime=void 0===this.params.bTime||!!this.params.bTime,this.params.bHideTime=void 0===this.params.bHideTime||!!this.params.bHideTime,this.weekStart=parseInt(this.params.weekStart||this.params.weekStart||BX.message("WEEK_START")),isNaN(this.weekStart)&&(this.weekStart=1),this.popup?this.popup.setBindElement(this.params.node):this._create(this.params);var n=!!this.params.bHideTime;return this.params.value?(this.SetValue(this.params.value),n=this.value.getUTCHours()<=0&&this.value.getUTCMinutes()<=0):this.params.field?(this.SetValue(this.params.field.value),n=this.value.getUTCHours()<=0&&this.value.getUTCMinutes()<=0):this.params.currentTime?this.SetValue(this.params.currentTime):this.SetValue(),this.params.bTime?BX.removeClass(this.DIV,"bx-calendar-time-disabled"):BX.addClass(this.DIV,"bx-calendar-time-disabled"),n?BX.removeClass(this.PARTS.TIME,"bx-calendar-set-time-opened"):BX.addClass(this.PARTS.TIME,"bx-calendar-set-time-opened"),i&&(this._auto_hide_disable(),this.popup.show(),setTimeout(BX.proxy(this._auto_hide_enable,this),0)),this.params.bSetFocus=void 0===this.params.bSetFocus||!!this.params.bSetFocus,this.params.bSetFocus&&t.node.blur(),this}}else BX.ready(BX.delegate(function(){this.Show(t)},this))},BX.JCCalendar.prototype.SetDay=function(t){return this.value.setUTCDate(t),this.SetValue(this.value)},BX.JCCalendar.prototype.SetMonth=function(t){for(this.popup_month&&this.popup_month.close(),this.value.setUTCMonth(t),t<0?t+=12:12<=t&&(t-=12);this.value.getUTCMonth()>t;)this.value.setUTCDate(this.value.getUTCDate()-1);return this.SetValue(this.value)},BX.JCCalendar.prototype.SetYear=function(t){return this.popup_year&&this.popup_year.close(),this.value.setUTCFullYear(t),this.SetValue(this.value)},BX.JCCalendar.prototype.SetDate=function(t,e){if((t=this._check_date(t)).setUTCHours(this.value.getUTCHours()),t.setUTCMinutes(this.value.getUTCMinutes()),t.setUTCSeconds(this.value.getUTCSeconds()),this.params.bTime&&!e)return this.SetValue(t);this.SetValue(t),this.SaveValue()},BX.JCCalendar.prototype.SetValue=function(t){if(this.value=t&&t.BXCHECKED?t:this._check_date(t),this.PARTS.MONTH.innerHTML=BX.message("MONTH_"+(this.value.getUTCMonth()+1)),this.PARTS.YEAR.innerHTML=this.value.getUTCFullYear(),this.params.bTime){var e=this.value.getUTCHours();this.bAmPm&&(12<=e?(this.PARTS.TIME_AMPM.innerHTML="PM",12!=e&&(e-=12)):(this.PARTS.TIME_AMPM.innerHTML="AM",0==e&&(e=12))),this.PARTS.TIME_INPUT_H.value=BX.util.str_pad_left(e.toString(),2,"0"),this.PARTS.TIME_INPUT_M.value=BX.util.str_pad_left(this.value.getUTCMinutes().toString(),2,"0")}return this._set_layer(),this},BX.JCCalendar.prototype.SaveValue=function(){this.popup_month&&this.popup_month.close(),this.popup_year&&this.popup_year.close();var t=!0;this.params.callback&&(!1===this.params.callback.apply(this,[new Date(this.value.valueOf()+6e4*this.value.getTimezoneOffset())])&&(t=!1));if(t){var e=!!this.params.bTime&&BX.hasClass(this.PARTS.TIME,"bx-calendar-set-time-opened");this.params.field&&(this.params.field.value=BX.calendar.ValueToString(this.value,e,!0),BX.fireEvent(this.params.field,"change")),this.popup.close(),this.params.callback_after&&this.params.callback_after.apply(this,[new Date(this.value.valueOf()+6e4*this.value.getTimezoneOffset()),e])}return this},BX.JCCalendar.prototype.Close=function(){return this.popup&&this.popup.close(),this},BX.JCSpinner=function(t){t=t||{},this.params={input:t.input||null,delta:t.delta||1,timeout_start:t.timeout_start||1e3,timeout_cont:t.timeout_cont||150,callback_start:t.callback_start||null,callback_change:t.callback_change||null,callback_finish:t.callback_finish||null,bSaveValue:void 0===t.bSaveValue?!!t.input:!!t.bSaveValue},this.mousedown=!1,this.direction=1},BX.JCSpinner.prototype.Show=function(){return this.node=BX.create("span",{events:{mousedown:BX.delegateEvent({attr:"data-dir"},BX.delegate(this.Start,this))},html:'<a href="javascript:void(0)" class="bx-calendar-form-arrow bx-calendar-form-arrow-top" data-dir="1"><i></i></a><a href="javascript:void(0)" class="bx-calendar-form-arrow bx-calendar-form-arrow-bottom" data-dir="-1"><i></i></a>'}),this.node},BX.JCSpinner.prototype.Start=function(){this.mousedown=!0,this.direction=0<BX.proxy_context.getAttribute("data-dir")?1:-1,BX.bind(document,"mouseup",BX.proxy(this.MouseUp,this)),this.ChangeValue(!0)},BX.JCSpinner.prototype.ChangeValue=function(t){if(this.mousedown&&this.params.input){var e=parseInt(this.params.input.value,10)+this.params.delta*this.direction;this.params.bSaveValue&&(this.params.input.value=e),t&&this.params.callback_start&&this.params.callback_start(this.params,e,this.direction),this.params.callback_change&&this.params.callback_change(this.params,e,this.direction),setTimeout(BX.proxy(this.ChangeValue,this),t?this.params.timeout_start:this.params.timeout_cont)}},BX.JCSpinner.prototype.MouseUp=function(){this.mousedown=!1,BX.unbind(document,"mouseup",BX.proxy(this.MouseUp,this)),this.params.callback_finish&&this.params.callback_finish(this.params,this.params.input.value)},window.jsCalendar={Show:function(t,e,i,n,o,s,r,a){return BX.calendar({node:t,field:e,form:r,bTime:!!o,currentTime:s,bHideTimebar:!!a})},ValueToString:BX.calendar.ValueToString},BX.CClockSelector=function(t){this.params=t,this.params.popup_buttons=this.params.popup_buttons||[new BX.PopupWindowButton({text:BX.message("CAL_BUTTON"),className:"popup-window-button-create",events:{click:BX.proxy(this.setValue,this)}})],this.isReady=!1,this.WND=new BX.PopupWindow(this.params.popup_id||"clock_selector_popup",this.params.node,this.params.popup_config||{titleBar:BX.message("CAL_TIME"),offsetLeft:-45,offsetTop:-135,autoHide:!0,closeIcon:!0,closeByEsc:!0,zIndex:this.params.zIndex}),this.SHOW=!1,BX.addCustomEvent(this.WND,"onPopupClose",BX.delegate(this.onPopupClose,this)),this.obClocks={},this.CLOCK_ID=this.params.clock_id||"clock_selector"},BX.CClockSelector.prototype.Show=function(){return this.isReady?(this.WND.setButtons(this.params.popup_buttons),this.WND.show(),this.SHOW=!0,window["bxClock_"+this.obClocks[this.CLOCK_ID]]&&setTimeout("window['bxClock_"+this.obClocks[this.CLOCK_ID]+"'].CalculateCoordinates()",40),!0):(BX.addCustomEvent("onClockRegister",BX.proxy(this.onClockRegister,this)),BX.ajax.get("/bitrix/tools/clock_selector.php",{start_time:this.params.start_time,clock_id:this.CLOCK_ID,sessid:BX.bitrix_sessid()},BX.delegate(this.Ready,this)))},BX.CClockSelector.prototype.onClockRegister=function(t){t[this.CLOCK_ID]&&(this.obClocks[this.CLOCK_ID]=t[this.CLOCK_ID],BX.removeCustomEvent("onClockRegister",BX.proxy(this.onClockRegister,this)))},BX.CClockSelector.prototype.Ready=function(t){this.content=this.CreateContent(t),this.WND.setContent(this.content),this.isReady=!0,setTimeout(BX.proxy(this.Show,this),30)},BX.CClockSelector.prototype.CreateContent=function(t){return BX.create("DIV",{events:{click:BX.PreventDefault},html:'<div class="bx-tm-popup-clock">'+t+"</div>"})},BX.CClockSelector.prototype.setValue=function(t){if(this.params.callback){var e=BX.findChild(this.content,{tagName:"INPUT"},!0);this.params.callback.apply(this.params.node,[e.value])}return BX.PreventDefault(t)},BX.CClockSelector.prototype.closeWnd=function(t){return this.WND.close(),!t&&!window.event||BX.PreventDefault(t)},BX.CClockSelector.prototype.setNode=function(t){this.WND.setBindElement(t)},BX.CClockSelector.prototype.setTime=function(t){this.params.start_time=t,window["bxClock_"+this.obClocks[this.CLOCK_ID]]&&window["bxClock_"+this.obClocks[this.CLOCK_ID]].SetTime(parseInt(t/3600),parseInt(t%3600/60))},BX.CClockSelector.prototype.setCallback=function(t){this.params.callback=t},BX.CClockSelector.prototype.onPopupClose=function(){this.SHOW=!1}}}(),phpVars||(phpVars={ADMIN_THEME_ID:".default",LANGUAGE_ID:"en",FORMAT_DATE:"DD.MM.YYYY",FORMAT_DATETIME:"DD.MM.YYYY HH:MI:SS",opt_context_ctrl:!1,cookiePrefix:"BITRIX_SM",titlePrefix:"",bitrix_sessid:"",messHideMenu:"",messShowMenu:"",messHideButtons:"",messShowButtons:"",messFilterInactive:"",messFilterActive:"",messFilterLess:"",messLoading:"Loading...",messMenuLoading:"",messMenuLoadingTitle:"",messNoData:"",messExpandTabs:"",messCollapseTabs:"",messPanelFixOn:"",messPanelFixOff:"",messPanelCollapse:"",messPanelExpand:""});var jsUtils={arEvents:Array(),addEvent:function(t,e,i,n){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!1):t["on"+e]=i,this.arEvents[this.arEvents.length]={element:t,event:e,fn:i}},removeEvent:function(t,e,i){t.detachEvent?t.detachEvent("on"+e,i):t.removeEventListener?t.removeEventListener(e,i,!1):t["on"+e]=null},removeAllEvents:function(t){var e;for(e=0;e<this.arEvents.length;e++)!this.arEvents[e]||0!=t&&t!=this.arEvents[e].element||(jsUtils.removeEvent(this.arEvents[e].element,this.arEvents[e].event,this.arEvents[e].fn),this.arEvents[e]=null);0==t&&(this.arEvents.length=0)},IsDoctype:function(){return document.compatMode?"CSS1Compat"==document.compatMode:!(!document.documentElement||!document.documentElement.clientHeight)},GetRealPos:function(t){if(window.BX)return BX.pos(t);if(!t||!t.offsetParent)return!1;var e=Array();e.left=t.offsetLeft,e.top=t.offsetTop;for(var i=t.offsetParent;i&&"BODY"!=i.tagName;)e.left+=i.offsetLeft,e.top+=i.offsetTop,i=i.offsetParent;return e.right=e.left+t.offsetWidth,e.bottom=e.top+t.offsetHeight,e},FindChildObject:function(t,e,i,n){if(!t)return null;for(var o=e.toUpperCase(),s=i?i.toLowerCase():null,r=t.childNodes.length,a=0;a<r;a++){var l,h=t.childNodes[a];if(h.tagName&&h.tagName.toUpperCase()==o&&(!i||h.className.toLowerCase()==s))return h;if(1==n)if(l=jsUtils.FindChildObject(h,e,i,!0))return l}return null},FindParentObject:function(t,e,i){if(!t)return null;for(var n=t,o=e.toUpperCase(),s=i?i.toLowerCase():null;n.parentNode;){var r=n.parentNode;if(r.tagName&&r.tagName.toUpperCase()==o&&(!i||r.className.toLowerCase()==s))return r;n=r}return null},FindNextSibling:function(t,e){if(!t)return null;for(var i=t,n=e.toUpperCase();i.nextSibling;){var o=i.nextSibling;if(o.tagName&&o.tagName.toUpperCase()==n)return o;i=o}return null},FindPreviousSibling:function(t,e){if(!t)return null;for(var i=t,n=e.toUpperCase();i.previousSibling;){var o=i.previousSibling;if(o.tagName&&o.tagName.toUpperCase()==n)return o;i=o}return null},bOpera:-1!=navigator.userAgent.toLowerCase().indexOf("opera"),bIsIE:document.attachEvent&&-1==navigator.userAgent.toLowerCase().indexOf("opera"),IsIE:function(){return this.bIsIE},IsOpera:function(){return this.bOpera},IsSafari:function(){var t=navigator.userAgent.toLowerCase();return/webkit/.test(t)},IsEditor:function(){var t=navigator.userAgent.toLowerCase(),e=(t.match(/.+(msie)[\/: ]([\d.]+)/)||[])[2],i=/webkit/.test(t);return!(this.IsOpera()||document.all&&!document.compatMode&&e<6||i)},ToggleDiv:function(t){var e=document.getElementById(t).style;return"none"!=e.display?e.display="none":e.display="block","none"!=e.display},urlencode:function(t){return escape(t).replace(new RegExp("\\+","g"),"%2B")},OpenWindow:function(t,e,i){var n=screen.width,o=screen.height;this.IsOpera()&&(n=document.body.offsetWidth,o=document.body.offsetHeight),window.open(t,"","status=no,scrollbars=yes,resizable=yes,width="+e+",height="+i+",top="+Math.floor((o-i)/2-14)+",left="+Math.floor((n-e)/2-5))},SetPageTitle:function(t){document.title=phpVars.titlePrefix+t;var e=document.getElementsByTagName("H1");e&&(e[0].innerHTML=t)},LoadPageToDiv:function(t,e){document.getElementById(e)&&(CHttpRequest.Action=function(t){CloseWaitWindow(),document.getElementById(e).innerHTML=t},ShowWaitWindow(),CHttpRequest.Send(t))},trim:function(t){var e,i;return"string"==typeof t||"object"==typeof t&&t.constructor==String?(i=/^[\s\r\n]+/g,e=t.replace(i,""),i=/[\s\r\n]+$/g,e=e.replace(i,"")):t},Redirect:function(t,e){var i=null,n=!1;t&&0<t.length&&(i=t[0]),i||(i=window.event),i&&(n=i.shiftKey),n?window.open(e):window.location.href=e},False:function(){return!1},AlignToPos:function(t,e,i){var n=t.left,o=t.bottom,s=jsUtils.GetWindowScrollPos(),r=jsUtils.GetWindowInnerSize();return r.innerWidth+s.scrollLeft-(t.left+e)<0&&(n=0<=t.right-e?t.right-e:s.scrollLeft),r.innerHeight+s.scrollTop-(t.bottom+i)<0&&(o=0<=t.top-i?t.top-i:s.scrollTop),{left:n,top:o}},EvalGlobal:function(t){try{window.execScript?window.execScript(t,"javascript"):jsUtils.IsSafari()?window.setTimeout(t,0):window.eval(t)}catch(t){}},GetStyleValue:function(t,e){var i;return t.currentStyle?i=t.currentStyle[e]:window.getComputedStyle&&(i=document.defaultView.getComputedStyle(t,null).getPropertyValue(e)),i||(i=""),i},GetWindowInnerSize:function(t){var e,i;return t||(t=document),self.innerHeight?(e=self.innerWidth,i=self.innerHeight):t.documentElement&&(t.documentElement.clientHeight||t.documentElement.clientWidth)?(e=t.documentElement.clientWidth,i=t.documentElement.clientHeight):t.body&&(e=t.body.clientWidth,i=t.body.clientHeight),{innerWidth:e,innerHeight:i}},GetWindowScrollPos:function(t){var e,i;return t||(t=document),self.pageYOffset?(e=self.pageXOffset,i=self.pageYOffset):t.documentElement&&(t.documentElement.scrollTop||t.documentElement.scrollLeft)?(e=document.documentElement.scrollLeft,i=document.documentElement.scrollTop):t.body&&(e=t.body.scrollLeft,i=t.body.scrollTop),{scrollLeft:e,scrollTop:i}},GetWindowScrollSize:function(t){var e,i;return t||(t=document),t.compatMode&&"CSS1Compat"==t.compatMode?(e=t.documentElement.scrollWidth,i=t.documentElement.scrollHeight):(i=t.body.scrollHeight>t.body.offsetHeight?t.body.scrollHeight:t.body.offsetHeight,e=t.body.scrollWidth>t.body.offsetWidth||t.compatMode&&"BackCompat"==t.compatMode||t.documentElement&&!t.documentElement.clientWidth?t.body.scrollWidth:t.body.offsetWidth),{scrollWidth:e,scrollHeight:i}},GetWindowSize:function(){var t=jsUtils.GetWindowInnerSize(),e=jsUtils.GetWindowScrollPos(),i=jsUtils.GetWindowScrollSize();return{innerWidth:t.innerWidth,innerHeight:t.innerHeight,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:i.scrollWidth,scrollHeight:i.scrollHeight}},arCustomEvents:{},addCustomEvent:function(t,e,i,n){this.arCustomEvents[t]||(this.arCustomEvents[t]=[]),i||(i=[]),n||(n=!1),this.arCustomEvents[t].push({handler:e,arParams:i,obj:n})},removeCustomEvent:function(t,e){if(this.arCustomEvents[t]){var i=this.arCustomEvents[t].length;if(1!=i){for(var n=0;n<i;n++)if(this.arCustomEvents[t][n]&&this.arCustomEvents[t][n].handler==e)return void delete this.arCustomEvents[t][n]}else delete this.arCustomEvents[t]}},onCustomEvent:function(t,e){if(this.arCustomEvents[t]){var i;e||(e=[]);for(var n=0,o=this.arCustomEvents[t].length;n<o;n++)(i=this.arCustomEvents[t][n])&&i.handler&&(i.obj?i.handler.call(i.obj,i.arParams,e):i.handler(i.arParams,e))}},loadJSFile:function(n,o,s){s||(s=document),"string"==typeof n&&(n=[n]);var r=function(t){if(t>=n.length)return function(){if(o){if("function"==typeof o)return o();if("object"==typeof o&&o.func){var t=o.params||{};o.obj?o.func.apply(o.obj,t):o.func(t)}}}();var e=s.body.appendChild(s.createElement("script"));e.src=n[t];var i=!1;e.onload=e.onreadystatechange=function(){i||e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(i=!0,setTimeout(function(){r(++t)},50))}};r(0)},loadCSSFile:function(t,e,i){if("string"==typeof t){var n=!0;t=[t]}var o,s=t.length,r=[];if(0!=s){if(e||(e=document),i||(i=window),!i.bxhead){var a=e.getElementsByTagName("HEAD");i.bxhead=a[0]}if(i.bxhead){for(o=0;o<s;o++){var l=document.createElement("LINK");l.href=t[o],l.rel="stylesheet",l.type="text/css",i.bxhead.appendChild(l),r.push(l)}return n?l:r}}},appendBXHint:function(t,e){if(t&&t.parentNode&&e){var i=new BXHint(e);t.parentNode.insertBefore(i.oIcon,t),t.parentNode.removeChild(t),i.oIcon.style.marginLeft="5px"}},PreventDefault:function(t){return t||(t=window.event),t.stopPropagation?(t.preventDefault(),t.stopPropagation()):(t.cancelBubble=!0,t.returnValue=!1),!1},CreateElement:function(t,e,i,n){n||(n=document);var o,s=n.createElement(t);if(e)for(o in e)"className"!=o&&"class"!=o?null!=e[o]&&null!=e[o]&&s.setAttribute(o,e[o]):(s.setAttribute("class",e[o]),jsUtils.IsIE()&&s.setAttribute("className",e[o]));if(i)for(o in i)s.style[o]=i[o];return s},in_array:function(t,e){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1},htmlspecialchars:function(t){return t.replace?t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t}};function JCFloatDiv(){var n=this;this.floatDiv=null,this.x=this.y=0,this.Create=function(t){var e=document.body.appendChild(document.createElement("DIV"));return e.id=t.id,e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",t.className&&(e.className=t.className),t.zIndex&&(e.style.zIndex=t.zIndex),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),e},this.Show=function(t,e,i,n,o,s){!1!==s&&(s=!0);var r=parseInt(t.style.zIndex);if((r<=0||isNaN(r))&&(r=100),t.style.zIndex=r,e<0&&(e=0),i<0&&(i=0),t.style.left=parseInt(e)+"px",t.style.top=parseInt(i)+"px",jsUtils.IsIE()&&!0===s){var a=document.getElementById(t.id+"_frame");a||((a=document.createElement("IFRAME")).src="javascript:''",a.id=t.id+"_frame",a.style.position="absolute",a.style.borderWidth="0px",a.style.zIndex=r-1,document.body.appendChild(a)),a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px",a.style.left=t.style.left,a.style.top=t.style.top,a.style.visibility="visible"}if(t.restrictDrag=o||!1,isNaN(n)&&(n=5),0<n){var l=document.getElementById(t.id+"_shadow");l||(jsUtils.IsIE()?(l=document.createElement("DIV")).style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/bitrix/themes/"+phpVars.ADMIN_THEME_ID+"/images/shadow.png',sizingMethod='scale')":(l=document.createElement("IMG")).src="/bitrix/themes/"+phpVars.ADMIN_THEME_ID+"/images/shadow.png",l.id=t.id+"_shadow",l.style.position="absolute",l.style.zIndex=r-2,l.style.left="-1000px",l.style.top="-1000px",l.style.lineHeight="normal",l.className="bx-js-float-shadow",document.body.appendChild(l)),l.style.width=t.offsetWidth+"px",l.style.height=t.offsetHeight+"px",l.style.left=parseInt(t.style.left)+n+"px",l.style.top=parseInt(t.style.top)+n+"px",l.style.visibility="visible"}t.dxShadow=n},this.Close=function(t){if(t){var e=document.getElementById(t.id+"_shadow");e&&(e.style.visibility="hidden");var i=document.getElementById(t.id+"_frame");i&&(i.style.visibility="hidden")}},this.Move=function(t,e,i){if(t){var n=t.dxShadow,o=parseInt(t.style.left)+e,s=parseInt(t.style.top)+i;if(t.restrictDrag){o<0&&(o=0),document.compatMode&&"CSS1Compat"==document.compatMode?windowWidth=document.documentElement.scrollWidth:document.body.scrollWidth>document.body.offsetWidth||document.compatMode&&"BackCompat"==document.compatMode||document.documentElement&&!document.documentElement.clientWidth?windowWidth=document.body.scrollWidth:windowWidth=document.body.offsetWidth;var r=t.offsetWidth;o>windowWidth-r-n&&(o=windowWidth-r-n),s<0&&(s=0)}t.style.left=o+"px",t.style.top=s+"px",this.AdjustShadow(t)}},this.HideShadow=function(t){document.getElementById(t.id+"_shadow").style.visibility="hidden"},this.UnhideShadow=function(t){document.getElementById(t.id+"_shadow").style.visibility="visible"},this.AdjustShadow=function(t){var e=document.getElementById(t.id+"_shadow");if(e&&"hidden"!=e.style.visibility){var i=t.dxShadow;e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px",e.style.left=parseInt(t.style.left)+i+"px",e.style.top=parseInt(t.style.top)+i+"px"}var n=document.getElementById(t.id+"_frame");n&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",n.style.left=t.style.left,n.style.top=t.style.top)},this.StartDrag=function(t,e){t||(t=window.event),this.x=t.clientX+document.body.scrollLeft,this.y=t.clientY+document.body.scrollTop,this.floatDiv=e,jsUtils.addEvent(document,"mousemove",this.MoveDrag),document.onmouseup=this.StopDrag,document.body.setCapture&&document.body.setCapture(),document.onmousedown=jsUtils.False;var i=document.body;i.ondrag=jsUtils.False,i.onselectstart=jsUtils.False,i.style.MozUserSelect=n.floatDiv.style.MozUserSelect="none",i.style.cursor="move"},this.StopDrag=function(t){document.body.releaseCapture&&document.body.releaseCapture(),jsUtils.removeEvent(document,"mousemove",n.MoveDrag),document.onmouseup=null,this.floatDiv=null,document.onmousedown=null;var e=document.body;e.ondrag=null,e.onselectstart=null,e.style.MozUserSelect=n.floatDiv.style.MozUserSelect="",e.style.cursor=""},this.MoveDrag=function(t){var e=t.clientX+document.body.scrollLeft,i=t.clientY+document.body.scrollTop;n.x==e&&n.y==i||(n.Move(n.floatDiv,e-n.x,i-n.y),n.x=e,n.y=i)}}var jsFloatDiv=new JCFloatDiv,BXHint=function(t,e,i){this.oDivOver=!1,this.timeOutID=null,this.oIcon=null,this.freeze=!1,this.x=0,this.y=0,this.time=700,t||(t=""),this.Create(t,e,i)};function WaitOnKeyPress(t){t||(t=window.event),t&&27==t.keyCode&&CloseWaitWindow()}function ShowWaitWindow(){CloseWaitWindow();var t=jsUtils.GetWindowSize(),e=document.body.appendChild(document.createElement("DIV"));if(e.id="wait_window_div",e.innerHTML=phpVars.messLoading,e.className="waitwindow",e.style.right=5-t.scrollLeft+"px",e.style.top=t.scrollTop+5+"px",jsUtils.IsIE()){var i=document.createElement("IFRAME");i.src="javascript:''",i.id="wait_window_frame",i.className="waitwindow",i.style.width=e.offsetWidth+"px",i.style.height=e.offsetHeight+"px",i.style.right=e.style.right,i.style.top=e.style.top,document.body.appendChild(i)}jsUtils.addEvent(document,"keypress",WaitOnKeyPress)}function CloseWaitWindow(){jsUtils.removeEvent(document,"keypress",WaitOnKeyPress);var t=document.getElementById("wait_window_frame");t&&t.parentNode.removeChild(t);var e=document.getElementById("wait_window_div");e&&e.parentNode.removeChild(e)}BXHint.prototype.Create=function(e,t,i){var n=this,o=0,s=0,r=null,a="icon";if(this.bWidth=!0,i&&(!1===i.width?this.bWidth=!1:i.width&&(o=i.width),i.height&&(s=i.height),i.className&&(r=i.className),!i.type||"link"!=i.type&&"icon"!=i.type||(a=i.type),0<i.time&&(this.time=i.time)),t&&(a="element"),"icon"==a)(t=document.createElement("IMG")).src=i&&i.iconSrc?i.iconSrc:"/bitrix/themes/"+phpVars.ADMIN_THEME_ID+"/public/popup/hint.gif",t.ondrag=jsUtils.False;else if("link"==a){(t=document.createElement("A")).href="",t.onclick=function(t){return!1},t.innerHTML="[?]"}this.element=t,"element"==a?(i&&i.show_on_click?jsUtils.addEvent(t,"click",function(t){t||(t=window.event),n.GetMouseXY(t),n.timeOutID=setTimeout(function(){n.Show(e,o,s,r)},10)}):jsUtils.addEvent(t,"mouseover",function(t){t||(t=window.event),n.GetMouseXY(t),n.timeOutID=setTimeout(function(){n.Show(e,o,s,r)},750)}),jsUtils.addEvent(t,"mouseout",function(t){n.timeOutID&&clearTimeout(n.timeOutID),n.SmartHide(n)})):((this.oIcon=t).onmouseover=function(t){t||(t=window.event),n.GetMouseXY(t),n.Show(e,o,s,r)},t.onmouseout=function(){n.SmartHide(n)})},BXHint.prototype.IsFrozen=function(){return this.freeze},BXHint.prototype.Freeze=function(){this.freeze=!0,this.Hide()},BXHint.prototype.UnFreeze=function(){this.freeze=!1},BXHint.prototype.GetMouseXY=function(t){t.pageX||t.pageY?(this.x=t.pageX,this.y=t.pageY):(t.clientX||t.clientY)&&(this.x=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)-document.documentElement.clientLeft,this.y=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)-document.documentElement.clientTop)},BXHint.prototype.Show=function(t,e,i,n){if(document.getElementById("__BXHint_div")&&this.Hide(),!this.freeze){var o=this,s=document.body.appendChild(document.createElement("DIV"));s.onmouseover=function(){o.oDivOver=!0},s.onmouseout=function(){o.oDivOver=!1,o.SmartHide(o)},s.id="__BXHint_div",s.className=n||"bxhint",s.style.position="absolute",e&&this.bWidth&&(s.style.width=e+"px"),i&&(s.style.height=i+"px"),s.innerHTML=t;var r=s.offsetWidth,a=s.offsetHeight;this.bWidth&&(!e&&200<r&&(r=Math.round(Math.sqrt(1.618*r*a))),s.style.width=r+"px",a=s.offsetHeight);var l={left:this.x+10,right:this.x+r,top:this.y,bottom:this.y+a};l=this.AlignToPos(l,r,a),s.style.zIndex=2100,jsFloatDiv.Show(s,l.left,l.top,3),s=null}},BXHint.prototype.AlignToPos=function(t,e,i){var n=document.body;return n.clientWidth+n.scrollLeft<t.left+e&&(t.left=0<=t.left-e?t.left-e:n.scrollLeft),n.clientHeight+n.scrollTop-t.bottom<0&&(t.top=0<=t.top-i?t.top-i:n.scrollTop),t},BXHint.prototype.Hide=function(){var t=document.getElementById("__BXHint_div");t&&(jsFloatDiv.Close(t),t.parentNode.removeChild(t),t=null)},BXHint.prototype.SmartHide=function(t){setTimeout(function(){t.oDivOver||t.Hide()},100)};var jsSelectUtils={addNewOption:function(t,e,i,n,o){var s="string"==typeof t||t instanceof String?document.getElementById(t):t;if(s){var r=s.length;if(!1!==o)for(var a=0;a<r;a++)if(s[a].value==e)return;var l=new Option(i,e,!1,!1);s.options[r]=l}!0===n&&this.sortSelect(t)},deleteOption:function(t,e){var i="string"==typeof t||t instanceof String?document.getElementById(t):t;if(i)for(var n=0;n<i.length;n++)if(i[n].value==e){i.remove(n);break}},deleteSelectedOptions:function(t){var e="string"==typeof t||t instanceof String?document.getElementById(t):t;if(e)for(var i=0;i<e.length;)e[i].selected?(e[i].selected=!1,e.remove(i)):i++},deleteAllOptions:function(t){if(t)for(var e=t.length-1;0<=e;e--)t.remove(e)},optionCompare:function(t,e){var i=t.optText.toLowerCase(),n=e.optText.toLowerCase();return n<i?1:i<n?-1:0},sortSelect:function(t){var e="string"==typeof t||t instanceof String?document.getElementById(t):t;if(e){for(var i=[],n=e.options.length,o=0;o<n;o++)i[o]={optText:e[o].text,optValue:e[o].value};i.sort(this.optionCompare),e.length=0,n=i.length;for(o=0;o<n;o++){var s=new Option(i[o].optText,i[o].optValue,!1,!1);e[o]=s}}},selectAllOptions:function(t){var e="string"==typeof t||t instanceof String?document.getElementById(t):t;if(e)for(var i=e.length,n=0;n<i;n++)e[n].selected=!0},selectOption:function(t,e){var i="string"==typeof t||t instanceof String?document.getElementById(t):t;if(i)for(var n=i.length,o=0;o<n;o++)i[o].selected=i[o].value==e},addSelectedOptions:function(t,e,i,n){if(t)for(var o=t.length,s=0;s<o;s++)t[s].selected&&this.addNewOption(e,t[s].value,t[s].text,n,i)},moveOptionsUp:function(t){if(t)for(var e=t.length,i=0;i<e;i++)if(t[i].selected&&0<i&&0==t[i-1].selected){var n=new Option(t[i].text,t[i].value),o=new Option(t[i-1].text,t[i-1].value);t[i]=o,t[i].selected=!1,t[i-1]=n,t[i-1].selected=!0}},moveOptionsDown:function(t){if(t)for(var e=t.length,i=e-1;0<=i;i--)if(t[i].selected&&i<e-1&&0==t[i+1].selected){var n=new Option(t[i].text,t[i].value),o=new Option(t[i+1].text,t[i+1].value);t[i]=o,t[i].selected=!1,t[i+1]=n,t[i+1].selected=!0}}};