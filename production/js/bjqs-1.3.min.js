!function(W){"use strict";W.fn.bjqs=function(e){var n,s=W.extend({},{width:700,height:300,animtype:"fade",animduration:450,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},e),t=this,h=t.find("ul.bjqs"),d=h.children("li"),i=null,a=null,r=null,l=null,c=null,o=null,u=null,g=null,w={slidecount:d.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},p={width:null,height:null,ratio:null},f="forward",m="previous",x=function(){p.width=t.outerWidth(),p.ratio=p.width/s.width,p.height=s.height*p.ratio,"fade"===s.animtype&&(d.css({height:s.height,width:"100%"}),d.children("img").css({height:s.height,width:"100%"}),h.css({height:s.height,width:"100%"}),t.css({height:s.height,"max-width":s.width,position:"relative"}),p.width<s.width&&(d.css({height:p.height}),d.children("img").css({height:p.height}),h.css({height:p.height}),t.css({height:p.height})),W(window).resize(function(){p.width=t.outerWidth(),p.ratio=p.width/s.width,p.height=s.height*p.ratio,d.css({height:p.height}),d.children("img").css({height:p.height}),h.css({height:p.height}),t.css({height:p.height})})),"slide"===s.animtype&&(d.css({height:s.height,width:s.width}),d.children("img").css({height:s.height,width:s.width}),h.css({height:s.height,width:s.width*s.slidecount}),t.css({height:s.height,"max-width":s.width,position:"relative"}),p.width<s.width&&(d.css({height:p.height}),d.children("img").css({height:p.height}),h.css({height:p.height}),t.css({height:p.height})),W(window).resize(function(){p.width=t.outerWidth(),p.ratio=p.width/s.width,p.height=s.height*p.ratio,d.css({height:p.height,width:p.width}),d.children("img").css({height:p.height,width:p.width}),h.css({height:p.height,width:p.width*s.slidecount}),t.css({height:p.height}),o.css({height:p.height,width:p.width}),v(function(){D(!1,w.currentslide)},200,"some unique string")}))},v=(n={},function(e,t,i){i||(i="Don't call this twice without a uniqueId"),n[i]&&clearTimeout(n[i]),n[i]=setTimeout(e,t)}),q=function(){d.css({height:s.height,width:s.width}),h.css({height:s.height,width:s.width}),t.css({height:s.height,width:s.width,position:"relative"})},k=function(){u=d.eq(0).clone(),g=d.eq(w.slidecount-1).clone(),u.attr({"data-clone":"last","data-slide":0}).appendTo(h).show(),g.attr({"data-clone":"first","data-slide":0}).prependTo(h).show(),d=h.children("li"),w.slidecount=d.length,o=W('<div class="bjqs-wrapper"></div>'),s.responsive&&p.width<s.width?(o.css({width:p.width,height:p.height,overflow:"hidden",position:"relative"}),h.css({width:p.width*(w.slidecount+2),left:-p.width*w.currentslide})):(o.css({width:s.width,height:s.height,overflow:"hidden",position:"relative"}),h.css({width:s.width*(w.slidecount+2),left:-s.width*w.currentslide})),d.css({float:"left",position:"relative",display:"list-item"}),o.prependTo(t),h.appendTo(o)},y=function(){if(i=W('<ul class="bjqs-controls"></ul>'),a=W('<li class="bjqs-next"><a href="#" data-direction="'+f+'">'+s.nexttext+"</a></li>"),r=W('<li class="bjqs-prev"><a href="#" data-direction="'+m+'">'+s.prevtext+"</a></li>"),i.on("click","a",function(e){e.preventDefault();var t=W(this).attr("data-direction");w.animating||(t===f&&D(f,!1),t===m&&D(m,!1))}),r.appendTo(i),a.appendTo(i),i.appendTo(t),s.centercontrols){i.addClass("v-centered");var e=(t.height()-a.children("a").outerHeight())/2/s.height*100+"%";a.find("a").css("top",e),r.find("a").css("top",e)}},T=function(){if(l=W('<ol class="bjqs-markers"></ol>'),W.each(d,function(e,t){var i=e+1,n=e+1;"slide"===s.animtype&&(n=e+2);var h=W('<li><a href="#">'+i+"</a></li>");i===w.currentslide&&h.addClass("active-marker"),h.on("click","a",function(e){e.preventDefault(),!w.animating&&w.currentslide!==n&&D(!1,n)}),h.appendTo(l)}),l.appendTo(t),c=l.find("li"),s.centermarkers){l.addClass("h-centered");var e=(s.width-l.width())/2;l.css("left",e)}},b=function(){W(document).keyup(function(e){w.paused||(clearInterval(w.interval),w.paused=!0),w.animating||(39===e.keyCode?(e.preventDefault(),D(f,!1)):37===e.keyCode&&(e.preventDefault(),D(m,!1))),w.paused&&s.automatic&&(w.interval=setInterval(function(){D(f)},s.animspeed),w.paused=!1)})},j=function(){t.hover(function(){w.paused||(clearInterval(w.interval),w.paused=!0)},function(){w.paused&&(w.interval=setInterval(function(){D(f,!1)},s.animspeed),w.paused=!1)})},C=function(){W.each(d,function(e,t){var i=W(t).children("img:first-child").attr("title");i||(i=W(t).children("a").find("img:first-child").attr("title")),i&&(i=W('<p class="bjqs-caption">'+i+"</p>")).appendTo(W(t))})},I=function(){var e=Math.floor(Math.random()*w.slidecount)+1;w.currentslide=e,w.currentindex=e-1},D=function(e,t){if(!w.animating&&(w.animating=!0,t?(w.nextslide=t,w.nextindex=t-1):e===f?d.eq(w.currentindex).next().length?(w.nextindex=w.currentindex+1,w.nextslide=w.currentslide+1):(w.nextindex=0,w.nextslide=1):d.eq(w.currentindex).prev().length?(w.nextindex=w.currentindex-1,w.nextslide=w.currentslide-1):(w.nextindex=w.slidecount-1,w.nextslide=w.slidecount),"fade"===s.animtype&&(s.showmarkers&&(c.removeClass("active-marker"),c.eq(w.nextindex).addClass("active-marker")),d.eq(w.currentindex).fadeOut(s.animduration),d.eq(w.nextindex).fadeIn(s.animduration,function(){w.animating=!1,w.currentslide=w.nextslide,w.currentindex=w.nextindex})),"slide"===s.animtype)){if(s.showmarkers){var i=w.nextindex-1;i===w.slidecount-2?i=0:-1===i&&(i=w.slidecount-3),c.removeClass("active-marker"),c.eq(i).addClass("active-marker")}s.responsive&&p.width<s.width?w.slidewidth=p.width:w.slidewidth=s.width,h.animate({left:-w.nextindex*w.slidewidth},s.animduration,function(){w.currentslide=w.nextslide,w.currentindex=w.nextindex,"last"===d.eq(w.currentindex).attr("data-clone")?(h.css({left:-w.slidewidth}),w.currentslide=2,w.currentindex=1):"first"===d.eq(w.currentindex).attr("data-clone")&&(h.css({left:-w.slidewidth*(w.slidecount-2)}),w.currentslide=w.slidecount-1,w.currentindex=w.slidecount-2),w.animating=!1})}};d.addClass("bjqs-slide"),s.responsive?x():q(),1<w.slidecount&&(s.randomstart&&I(),s.showcontrols&&y(),s.showmarkers&&T(),s.keyboardnav&&b(),s.hoverpause&&s.automatic&&j(),"slide"===s.animtype&&k()),s.usecaptions&&C(),"slide"!==s.animtype||s.randomstart||(w.currentindex=1,w.currentslide=2),h.show(),d.eq(w.currentindex).show(),s.automatic&&(w.interval=setInterval(function(){D(f,!1)},s.animspeed))}}(jQuery);