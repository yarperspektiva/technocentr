var bpXS=768,bpSM=980,timeoutNum=3e4,scrollbarWidth=function(){var e,s,n;return void 0===n&&(n=(s=(e=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body")).children()).innerWidth()-s.height(99).innerWidth(),e.remove()),n},GeneralFunc=function(){function e(){var e=$(document).scrollTop();if($(".menu-area").offset().top<=e?$(".menu-wrapper").addClass("menu-wrapper--fixed"):$(".menu-wrapper").removeClass("menu-wrapper--fixed"),$(document).width()<bpXS){if($(".header-wrapper").hasClass("header-wrapper--fixed"))s=$(".logo").outerHeight();else var s=$(".logo").offset().top+$(".logo").outerHeight();s<=e?$(".header-wrapper").addClass("header-wrapper--fixed"):$(".header-wrapper").removeClass("header-wrapper--fixed")}}$(document).on("click",".js-spoiler",function(e){if($(this).hasClass("menu-link")&&$(this).parents(".menu-area").length)return!0;($(this).hasClass("menu-link")||$(this).hasClass("js-slide-select"))&&(e.preventDefault(),$(this).toggleClass("spoiler--open"),$(this).next(".spoiler-content").toggleClass("spoiler-content--open"))}),e(),$(document).on("scroll",e),$(document).on("click",".js-callback",function(e){e.preventDefault(),openModalAjax($(this),{href:"/local/ajax/form-callback.php",afterShow:function(){initMaskPhoneMulti()}})}),$(".search form").off("submit"),$(document).on("click",".js-search-open",function(e){e.preventDefault(),$(".search-panel").toggleClass("search-panel--open")}),$(document).on("click",".js-open-sidebar-menu",function(e){e.preventDefault(),$(".sidebar-menu").toggleClass("sidebar-menu--open")}),$(document).on("click",".js-sidebar-overlay, .js-sidebar-close",function(e){e.preventDefault(),$(".sidebar-menu").removeClass("sidebar-menu--open")}),$(document).on("change","select",function(e){var s=$(this).find("option:selected").text();$(this).siblings(".inputselect-text").text(s)}),$(document).on("click",".js-order",function(e){e.preventDefault();var s="";$("h1").next(".catalog-detail").length&&(s=$("h1").html()),openModalAjax($(this),{href:"/local/ajax/form-order.php",beforeShow:function(){$(".js-prod-name").val(s)},afterShow:function(){initMaskPhoneMulti()}})})};afterLoad.GeneralFunc=GeneralFunc;var initMaskPhone=function(){$("[data-inputmask]").each(function(){var e=$(this).data("inputmask");$(this).mask(e)})},maskOpts={inputmask:{definitions:{"#":{validator:"[0-9]",cardinality:1}},showMaskOnHover:!1,autoUnmask:!0},match:/[0-9]/,replace:"#",listKey:"mask"},initMaskPhoneMulti=function(){$(".js-mask-phones").each(function(){var i=$(this);$res=i.find(".customer-phone").inputmasks($.extend(!0,{},maskOpts,{list:listCountries,onMaskChange:function(e,s){if(s){var n=e.name_ru;e.desc_ru&&""!=e.desc_ru&&(n+=" ("+e.desc_ru+")"),i.find(".descr").html(n)}else i.find(".descr").html("")}}),"isCompleted"),i.find(".customer-phone").blur(function(){$(".customer-phone").val().length<9&&$(".customer-phone").val("")})})},initSliders=function(){if(!$(".js-main-slider .detail-slide").length)return!1;$(".js-main-slider, .js-thumb-slider").on("afterChange",function(e,s,n,i){var t=$(s.$slides.get(s.currentSlide));$(".js-desc-pic").html(t.find(".js-gallery-more-pic").attr("title")),$(".js-thumb-slider .slick-slide").css("pointer-events","auto")}),$(".js-main-slider").on("beforeChange",function(e,s,n){$(".js-thumb-slider .slick-slide").css("pointer-events","none")}),$(".js-main-slider").slick({arrows:!1,asNavFor:".js-thumb-slider"}),$thumbOpt={slidesToShow:4,slidesToScroll:1,accessibility:!1,asNavFor:".js-main-slider",focusOnSelect:!0,draggable:!1,autoplay:!1,vertical:!0,nextArrow:'<div class="slick-arrow-vert slick-next"><svg class="icon"><use xlink:href="#icon-arr-down"></use></svg></div>',prevArrow:'<div class="slick-arrow-vert slick-prev"><svg class="icon"><use xlink:href="#icon-arr-up"></use></svg></div>'},$thumbRespOpt={breakpoint:bpXS,settings:{asNavFor:null,slidesToShow:1,slidesToScroll:1,vertical:!1,dots:!0,arrows:!1}},$thumbOpt.responsive=[$thumbRespOpt],$(".js-thumb-slider").slick($thumbOpt),$(document).width()<bpXS&&$(".js-gallery-more-pic").addClass("js-gallery-more-pic--enabled"),$(window).on("resize",function(e){$(document).width()<bpXS?$(".js-gallery-more-pic").addClass("js-gallery-more-pic--enabled"):$(".js-gallery-more-pic").removeClass("js-gallery-more-pic--enabled")}),$(document).on("click",".slick-slide:not(.slick-cloned) .js-gallery-more-pic",function(e){e.preventDefault()}),$(".slick-slide:not(.slick-cloned) .js-gallery-more-pic:not(.js-gallery-more-pic--enabled)").fancybox($.extend({},$.extend(defaultFancyOpt,{maxWidth:600,maxHeight:600})))};afterLoad.initSliders=initSliders,afterLoad.initMaskPhone=initMaskPhone,afterAjax.initMaskPhone=initMaskPhone,afterLoad.initMaskPhoneMulti=initMaskPhoneMulti,afterAjax.initMaskPhoneMulti=initMaskPhoneMulti;